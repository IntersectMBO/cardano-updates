"use strict";(self.webpackChunkcardano_updates=self.webpackChunkcardano_updates||[]).push([[20290],{3905:(e,t,r)=>{r.d(t,{Zo:()=>p,kt:()=>h});var n=r(67294);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var c=n.createContext({}),s=function(e){var t=n.useContext(c),r=t;return e&&(r="function"==typeof e?e(t):o(o({},t),e)),r},p=function(e){var t=s(e.components);return n.createElement(c.Provider,{value:t},e.children)},m="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var r=e.components,a=e.mdxType,i=e.originalType,c=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),m=s(r),d=a,h=m["".concat(c,".").concat(d)]||m[d]||u[d]||i;return r?n.createElement(h,o(o({ref:t},p),{},{components:r})):n.createElement(h,o({ref:t},p))}));function h(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=r.length,o=new Array(i);o[0]=d;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l[m]="string"==typeof e?e:a,o[1]=l;for(var s=2;s<i;s++)o[s]=r[s];return n.createElement.apply(null,o)}return n.createElement.apply(null,r)}d.displayName="MDXCreateElement"},5892:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>c,contentTitle:()=>o,default:()=>u,frontMatter:()=>i,metadata:()=>l,toc:()=>s});var n=r(87462),a=(r(67294),r(3905));const i={title:"Performance & Tracing Update",slug:"2025-03-11-performance-and-tracing",authors:"mgmeier",tags:["performance-tracing"],hide_table_of_contents:!1},o=void 0,l={permalink:"/2025-03-11-performance-and-tracing",editUrl:"https://github.com/intersectmbo/cardano-updates/tree/main/blog/2025-03-11-performance-and-tracing.md",source:"@site/blog/2025-03-11-performance-and-tracing.md",title:"Performance & Tracing Update",description:"High level summary",date:"2025-03-11T00:00:00.000Z",formattedDate:"March 11, 2025",tags:[{label:"performance-tracing",permalink:"/tags/performance-tracing"}],readingTime:2.665,hasTruncateMarker:!1,authors:[{name:"Michael Karg",title:"Performance and Tracing Team Lead",url:"https://github.com/mgmeier",imageURL:"https://github.com/mgmeier.png",key:"mgmeier"}],frontMatter:{title:"Performance & Tracing Update",slug:"2025-03-11-performance-and-tracing",authors:"mgmeier",tags:["performance-tracing"],hide_table_of_contents:!1},prevItem:{title:"Mithril Team Update",permalink:"/2025-03-12-mithril"},nextItem:{title:"Hydra Team Update",permalink:"/2025-03-07-hydra"}},c={authorsImageUrls:[void 0]},s=[{value:"High level summary",id:"high-level-summary",level:2},{value:"Low level overview",id:"low-level-overview",level:2},{value:"Development",id:"development",level:3},{value:"Infrastructure",id:"infrastructure",level:3},{value:"New Tracing",id:"new-tracing",level:3},{value:"Community",id:"community",level:3}],p={toc:s},m="wrapper";function u(e){let{components:t,...r}=e;return(0,a.kt)(m,(0,n.Z)({},p,r,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h2",{id:"high-level-summary"},"High level summary"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Development: New benchmark epoch timeline using ",(0,a.kt)("inlineCode",{parentName:"li"},"db-sync"),"; raw benchmark data now with DB storage layer as default - enabling quick queries."),(0,a.kt)("li",{parentName:"ul"},"Infrastructure: Merged workbench 'playground' profiles - easing benchmark calibration."),(0,a.kt)("li",{parentName:"ul"},"New Tracing: Plenty new features based on community feedback - including a new direct Prometheus backend; untangle system dependencies."),(0,a.kt)("li",{parentName:"ul"},"Community: Participation in the first episode of the ",(0,a.kt)("em",{parentName:"li"},"Cardano Dev Pulse")," podcast.")),(0,a.kt)("h2",{id:"low-level-overview"},"Low level overview"),(0,a.kt)("h3",{id:"development"},"Development"),(0,a.kt)("p",null,"For keeping a history of comparable benchmarks, it's essential to have an accurate timeline of mainnet protocol parameter updates by epoch. They represent the environment in which specific measurements took place, and are thus tied\ninherently to the observation process. Additionally, to reproduce specific benchmarking metrics from the past, our performance workbench has the capability to \"roll back\" those updates, and perform a benchmark given the protocol parameters of any given epoch.\nInstead of maintaining this epoch timeline by hand, we've now created an automated way to extract all key epochs applying parameter updates using ",(0,a.kt)("inlineCode",{parentName:"p"},"db-sync"),". This approach will prove both more robust, and having lower maintenance overhead."),(0,a.kt)("p",null,"Furthermore, the new DB storage backend for raw benchmarking data in ",(0,a.kt)("inlineCode",{parentName:"p"},"locli")," is now set to be the default for the performance workbench. Apart from cutting down analysis time for a benchmarking run and reducing\nthe required on-disk size for archiving, this enables the new (still under development) quick queries into raw performance data."),(0,a.kt)("h3",{id:"infrastructure"},"Infrastructure"),(0,a.kt)("p",null,"When creating the Plutus memory scaling benchmarks, we developed so-called 'playground' profiles for the workbench. These allow for easier dynamic change of individual profile parameters, building a resulting benchmark setup including\nPlutus script calibration, and observing the effect in a short local cluster run. Applying these changes to established profiles is strictly forbidden, as it would put comparability with past benchmarks at risk. So by\nintroducing this separation, we keep that safety guarantee, while still lifting it somewhat for the development cycle only."),(0,a.kt)("h3",{id:"new-tracing"},"New Tracing"),(0,a.kt)("p",null,"We've been extremely busy implementing new features and optimizations for the new tracing system, motivated by the feedback we received from the SPO community. This includes:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"A brand new backend that allows for Prometheus exposition of metrics directly from the application - without running ",(0,a.kt)("inlineCode",{parentName:"li"},"cardano-tracer")," and forwarding to it."),(0,a.kt)("li",{parentName:"ul"},"A configurable reconnection interval for the forwarder to ",(0,a.kt)("inlineCode",{parentName:"li"},"cardano-tracer"),"."),(0,a.kt)("li",{parentName:"ul"},"An always up-to-date symlink pointing to the most recent log file in a ",(0,a.kt)("inlineCode",{parentName:"li"},"cardano-tracer")," log rotation."),(0,a.kt)("li",{parentName:"ul"},"Optimizations in metrics forwarding and trace message formatting, which should lower the base CPU usage, at least in low congestion scenarios.")),(0,a.kt)("p",null,"All those will be part of the upcoming Node 10.3 release.  "),(0,a.kt)("p",null,"Currently, the ",(0,a.kt)("inlineCode",{parentName:"p"},"cardano-tracer")," service still depends on the Node for a few data type definitions. We're working on a refactoring so we can untangle this dependency. This will allow for the service\nto be built independently of the Node - simplifying a setup where other processes and applications can forward observables to ",(0,a.kt)("inlineCode",{parentName:"p"},"cardano-tracer")," and benefit from its features."),(0,a.kt)("h3",{id:"community"},"Community"),(0,a.kt)("p",null,"We had the opportunity to talk about benchmarking and performance impact of UTxO-HD on the very first episode of the ",(0,a.kt)("a",{parentName:"p",href:"https://www.youtube.com/@CardanoDevPulse"},"Cardano Dev Pulse Podcast")," (YouTube). Thank you Sam and Carlos for having us!"))}u.isMDXComponent=!0}}]);