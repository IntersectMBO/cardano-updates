"use strict";(self.webpackChunkcardano_updates=self.webpackChunkcardano_updates||[]).push([[16966],{3905:(e,t,a)=>{a.d(t,{Zo:()=>m,kt:()=>h});var r=a(67294);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},l=Object.keys(e);for(r=0;r<l.length;r++)a=l[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)a=l[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var p=r.createContext({}),s=function(e){var t=r.useContext(p),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},m=function(e){var t=s(e.components);return r.createElement(p.Provider,{value:t},e.children)},c="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},u=r.forwardRef((function(e,t){var a=e.components,n=e.mdxType,l=e.originalType,p=e.parentName,m=o(e,["components","mdxType","originalType","parentName"]),c=s(a),u=n,h=c["".concat(p,".").concat(u)]||c[u]||d[u]||l;return a?r.createElement(h,i(i({ref:t},m),{},{components:a})):r.createElement(h,i({ref:t},m))}));function h(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var l=a.length,i=new Array(l);i[0]=u;var o={};for(var p in t)hasOwnProperty.call(t,p)&&(o[p]=t[p]);o.originalType=e,o[c]="string"==typeof e?e:n,i[1]=o;for(var s=2;s<l;s++)i[s]=a[s];return r.createElement.apply(null,i)}return r.createElement.apply(null,a)}u.displayName="MDXCreateElement"},15268:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>p,contentTitle:()=>i,default:()=>d,frontMatter:()=>l,metadata:()=>o,toc:()=>s});var r=a(87462),n=(a(67294),a(3905));const l={title:"Ledger Team Update",slug:"2025-06-18-ledger",authors:"lehins",tags:["ledger"],hide_table_of_contents:!1},i=void 0,o={permalink:"/2025-06-18-ledger",editUrl:"https://github.com/intersectmbo/cardano-updates/tree/main/blog/2025-06-18-ledger.md",source:"@site/blog/2025-06-18-ledger.md",title:"Ledger Team Update",description:"High level summary",date:"2025-06-18T00:00:00.000Z",formattedDate:"June 18, 2025",tags:[{label:"ledger",permalink:"/tags/ledger"}],readingTime:2.985,hasTruncateMarker:!1,authors:[{name:"Alexey Kuleshevich",title:"Ledger Team Software Engineer",url:"https://github.com/lehins",imageURL:"https://github.com/lehins.png",key:"lehins"}],frontMatter:{title:"Ledger Team Update",slug:"2025-06-18-ledger",authors:"lehins",tags:["ledger"],hide_table_of_contents:!1},prevItem:{title:"SRE Team Update",permalink:"/2025-06-20-sre"},nextItem:{title:"Mithril Team Update",permalink:"/2025-06-18-mithril"}},p={authorsImageUrls:[void 0]},s=[{value:"High level summary",id:"high-level-summary",level:2},{value:"Low level summary",id:"low-level-summary",level:2},{value:"Features",id:"features",level:3},{value:"Testing",id:"testing",level:3},{value:"Infrastructure and releasing",id:"infrastructure-and-releasing",level:3}],m={toc:s},c="wrapper";function d(e){let{components:t,...a}=e;return(0,n.kt)(c,(0,r.Z)({},m,a,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h2",{id:"high-level-summary"},"High level summary"),(0,n.kt)("p",null,"Unfortunately, due to the ZuriHac conference, we ended up skipping the Ledger update for the last\nperiod, therefore this update contains our accomplishments over the period of four weeks."),(0,n.kt)("p",null,"Extensive investigation into current CDDL specification and efforts of improving our testing tools\nlead to discovery and fixes of numerous bugs in CDDL specification dating back all the way to the\nByron era. We have also improved readability of Ledger CDDL specification through enhancements to\nour CDDL generation tool. We have further tackled a whole bunch of tech debt and introduced\nperformance improvements. Thanks to dropping support for ghc-8.10 we were able to add some safety\nimprovements as well, that utilize features of the newer compiler."),(0,n.kt)("p",null,"Besides improvements to the existing code we have started preparation for an upcoming intra-era hard\nfork, which is planned to happen some time later this year and the new Dijkstra era that will happen\nno earlier than next year. We have fixed one more bug in preparation for the intra-era hardfork and\nstarted preliminary work for Nested Transactions."),(0,n.kt)("h2",{id:"low-level-summary"},"Low level summary"),(0,n.kt)("h3",{id:"features"},"Features"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/IntersectMBO/cardano-ledger/pull/4996"},"PR-4996")," - CDDL improvements"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/IntersectMBO/cardano-ledger/pull/5073"},"PR-5073")," - CDDL fixes"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/IntersectMBO/cardano-ledger/pull/5056"},"PR-5056")," - Reinstate ",(0,n.kt)("inlineCode",{parentName:"li"},"Annotator")," instances to main libs"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/IntersectMBO/cardano-ledger/pull/5079"},"PR-5079")," - Fix RequiresNetworkMagic encoding"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/IntersectMBO/cardano-ledger/pull/5038"},"PR-5038")," - Remove ",(0,n.kt)("inlineCode",{parentName:"li"},"MemoBytes")," from ",(0,n.kt)("inlineCode",{parentName:"li"},"ShelleyTx")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/IntersectMBO/cardano-ledger/pull/5085"},"PR-5085")," - Also make Conway","'","s pool metadata_hash be just bytes"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/IntersectMBO/cardano-ledger/pull/5090"},"PR-5090")," - Renamed AlonzoTx fields"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/IntersectMBO/cardano-ledger/pull/5086"},"PR-5086")," - Protocol version upper bound correction"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/IntersectMBO/cardano-ledger/pull/5080"},"PR-5080")," - Remove ",(0,n.kt)("inlineCode",{parentName:"li"},"MissingRequiredSigners")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/IntersectMBO/cardano-ledger/pull/5089"},"PR-5089")," - Move era definitions to ",(0,n.kt)("inlineCode",{parentName:"li"},"core:internal")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/IntersectMBO/cardano-ledger/pull/5030"},"PR-5030")," - Added Dijkstra era"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/IntersectMBO/cardano-ledger/pull/5100"},"PR-5100")," - Untaint era definitions, while preserving the safety warning."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/IntersectMBO/cardano-ledger/pull/5109"},"PR-5109")," - Add PParamUpdate minPoolCost to Shelley/Allegra/Mary CDDL"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/IntersectMBO/cardano-ledger/pull/5106"},"PR-5106")," - Introduce ",(0,n.kt)("inlineCode",{parentName:"li"},"KeyValuePairs")," for easier ",(0,n.kt)("inlineCode",{parentName:"li"},"ToJSON")," deriving"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/IntersectMBO/cardano-ledger/pull/5104"},"PR-5104")," - Dijkstra Era Transition functionality"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/IntersectMBO/cardano-ledger/pull/5099"},"PR-5099")," - Fix ",(0,n.kt)("inlineCode",{parentName:"li"},"COMPLETE")," pragmas for ",(0,n.kt)("inlineCode",{parentName:"li"},"TxCert")," and ",(0,n.kt)("inlineCode",{parentName:"li"},"NativeScript")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/IntersectMBO/cardano-ledger/pull/5116"},"PR-5116")," - Simplify ",(0,n.kt)("inlineCode",{parentName:"li"},"ToJSON")," instance for ",(0,n.kt)("inlineCode",{parentName:"li"},"TransitionConfig")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/IntersectMBO/cardano-ledger/pull/5091"},"PR-5091")," - Move unelected CC votes check to GOV"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/IntersectMBO/cardano-ledger/pull/5127"},"PR-5127")," - Pure version of ",(0,n.kt)("inlineCode",{parentName:"li"},"plutusDebug")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/IntersectMBO/cardano-ledger/pull/5122"},"PR-5122")," - Memoize block body hash computation"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/IntersectMBO/cardano-ledger/pull/5125"},"PR-5125")," - Faster upgradeTxOut for alonzo, babbage and conway")),(0,n.kt)("h3",{id:"testing"},"Testing"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/IntersectMBO/cardano-ledger/pull/4966"},"PR-4966")," - Remove ",(0,n.kt)("inlineCode",{parentName:"li"},"Pretty")," from ",(0,n.kt)("inlineCode",{parentName:"li"},"cardano-ledger-test")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/IntersectMBO/cardano-ledger/pull/5061"},"PR-5061")," - ",(0,n.kt)("inlineCode",{parentName:"li"},"constrained-generators"),": Simplify ",(0,n.kt)("inlineCode",{parentName:"li"},"HasSpec")," instance for ",(0,n.kt)("inlineCode",{parentName:"li"},"Bool")," and move more things to ",(0,n.kt)("inlineCode",{parentName:"li"},"NumSpec")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/IntersectMBO/cardano-ledger/pull/5083"},"PR-5083")," - Remove old version of constrained generators"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/IntersectMBO/cardano-ledger/pull/5082"},"PR-5082")," - Add doctests to CI"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/IntersectMBO/cardano-ledger/pull/5078"},"PR-5078")," - Fix typos, formatting, and broken references in the shelley-ma formal spec PDF"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/IntersectMBO/cardano-ledger/pull/5102"},"PR-5102")," - Add an imp test for checking deposit collection and refunds"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/IntersectMBO/cardano-ledger/pull/5118"},"PR-5118")," - Fix stake comparison test"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/IntersectMBO/cardano-ledger/pull/5088"},"PR-5088")," - Move upgrade functions for tx, body, auxData and wits to ",(0,n.kt)("inlineCode",{parentName:"li"},"testlib")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/IntersectMBO/cardano-ledger/pull/5117"},"PR-5117")," - ",(0,n.kt)("inlineCode",{parentName:"li"},"constrained-generators"),": Separate generation and internal testing out of common modules")),(0,n.kt)("h3",{id:"infrastructure-and-releasing"},"Infrastructure and releasing"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/IntersectMBO/cardano-ledger/pull/5074"},"PR-5074")," - Bump ",(0,n.kt)("inlineCode",{parentName:"li"},".git-blame-ignore-revs")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/IntersectMBO/cardano-ledger/pull/5081"},"PR-5081")," - Add script for setting up ",(0,n.kt)("inlineCode",{parentName:"li"},"direnv")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/IntersectMBO/cardano-ledger/pull/5092"},"PR-5092")," - Fix hackage nix in flake"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/IntersectMBO/cardano-ledger/pull/5110"},"PR-5110")," - Upgrade deprecated Sphinx config option in ",(0,n.kt)("inlineCode",{parentName:"li"},"doc/")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/IntersectMBO/cardano-ledger/pull/5107"},"PR-5107")," - ",(0,n.kt)("inlineCode",{parentName:"li"},"doctest")," in ",(0,n.kt)("inlineCode",{parentName:"li"},"nix develop")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/IntersectMBO/cardano-ledger/pull/5112"},"PR-5112")," - Remove ghcid related files"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/IntersectMBO/cardano-ledger/pull/5114"},"PR-5114")," - cabal.project: Update index-states and drop un-needed SRPs"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/IntersectMBO/cardano-ledger/pull/5113"},"PR-5113")," - Bump requests from 2.32.3 to 2.32.4 in /doc")))}d.isMDXComponent=!0}}]);