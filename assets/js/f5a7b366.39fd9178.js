"use strict";(self.webpackChunkcardano_updates=self.webpackChunkcardano_updates||[]).push([[17295],{3905:(e,t,o)=>{o.d(t,{Zo:()=>c,kt:()=>d});var r=o(67294);function n(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function a(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function i(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?a(Object(o),!0).forEach((function(t){n(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):a(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function s(e,t){if(null==e)return{};var o,r,n=function(e,t){if(null==e)return{};var o,r,n={},a=Object.keys(e);for(r=0;r<a.length;r++)o=a[r],t.indexOf(o)>=0||(n[o]=e[o]);return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)o=a[r],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}var l=r.createContext({}),p=function(e){var t=r.useContext(l),o=t;return e&&(o="function"==typeof e?e(t):i(i({},t),e)),o},c=function(e){var t=p(e.components);return r.createElement(l.Provider,{value:t},e.children)},u="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},h=r.forwardRef((function(e,t){var o=e.components,n=e.mdxType,a=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),u=p(o),h=n,d=u["".concat(l,".").concat(h)]||u[h]||m[h]||a;return o?r.createElement(d,i(i({ref:t},c),{},{components:o})):r.createElement(d,i({ref:t},c))}));function d(e,t){var o=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var a=o.length,i=new Array(a);i[0]=h;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[u]="string"==typeof e?e:n,i[1]=s;for(var p=2;p<a;p++)i[p]=o[p];return r.createElement.apply(null,i)}return r.createElement.apply(null,o)}h.displayName="MDXCreateElement"},78316:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>m,frontMatter:()=>a,metadata:()=>s,toc:()=>p});var r=o(87462),n=(o(67294),o(3905));const a={title:"Network Team Update",slug:"2025-02-19-network",authors:["coot"],tags:["network"],hide_table_of_contents:!1},i=void 0,s={permalink:"/2025-02-19-network",editUrl:"https://github.com/intersectmbo/cardano-updates/tree/main/blog/2025-02-19-network.md",source:"@site/blog/2025-02-19-network.md",title:"Network Team Update",description:"Overview of sprint 80 & sprint 81",date:"2025-02-19T00:00:00.000Z",formattedDate:"February 19, 2025",tags:[{label:"network",permalink:"/tags/network"}],readingTime:1.99,hasTruncateMarker:!1,authors:[{name:"Marcin Szamotulski",title:"Network Team Lead",url:"https://github.com/coot",imageURL:"https://github.com/coot.png",key:"coot"}],frontMatter:{title:"Network Team Update",slug:"2025-02-19-network",authors:["coot"],tags:["network"],hide_table_of_contents:!1},prevItem:{title:"Mithril Team Update",permalink:"/2025-02-19-mithril"},nextItem:{title:"Node API & CLI Team Update",permalink:"/2025-02-15-node-cli-api"}},l={authorsImageUrls:[void 0]},p=[{value:"Overview of sprint 80 &amp; sprint 81",id:"overview-of-sprint-80--sprint-81",level:2},{value:"Current workstream",id:"current-workstream",level:3},{value:"Fixes which made into the on-going <code>cardano-node-10.2.1</code>",id:"fixes-which-made-into-the-on-going-cardano-node-1021",level:3},{value:"New mux strategy for starting mini-protocols",id:"new-mux-strategy-for-starting-mini-protocols",level:3},{value:"Local-TX-Monitor protocol changes",id:"local-tx-monitor-protocol-changes",level:3},{value:"Network Specification Updates",id:"network-specification-updates",level:3},{value:"Other minor changes",id:"other-minor-changes",level:3}],c={toc:p},u="wrapper";function m(e){let{components:t,...o}=e;return(0,n.kt)(u,(0,r.Z)({},c,o,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h2",{id:"overview-of-sprint-80--sprint-81"},"Overview of ",(0,n.kt)("a",{parentName:"h2",href:"https://github.com/orgs/IntersectMBO/projects/5/views/1?filterQuery=sprint%3A%22Sprint+80%22"},"sprint 80")," & ",(0,n.kt)("a",{parentName:"h2",href:"https://github.com/orgs/IntersectMBO/projects/5/views/1?filterQuery=sprint%3A%22Sprint+81%22"},"sprint 81")),(0,n.kt)("h3",{id:"current-workstream"},"Current workstream"),(0,n.kt)("p",null,"We decided to hold some PRs in favour of some others to simplify the merging\nprocess.  Here's a dependency graph for PRs on which we're working on.  The\n",(0,n.kt)("a",{parentName:"p",href:"https://github.com/IntersectMBO/ouroboros-network/pull/5016"},(0,n.kt)("strong",{parentName:"a"},"Extensible Ouroboros Network Diffusion Stack"))," PR\nwas the largest in our queue."),(0,n.kt)("mermaid",{value:'flowchart TD;\n  SRV[SRV implementation]:::open\n  E[Mux: bind threads to a capability]:::merged\n  D[<b>Peer Selection Exports</b>]:::open\n  C[Public Network State]:::open\n  B[Drop NonP2P Components]:::merged\n  A[Extensible Ouroboros Network Components]:::merged\n  MAIN[main]\n  ouroboros-network-0.19\n  tx[TX Submission Logic]:::open\n\n\n  B--\x3eA;\n  C--\x3eB;\n  D--\x3eB;\n  E--\x3eA;\n  A--\x3eMAIN\n  SRV--\x3eA;\n  MAIN--\x3eouroboros-network-0.19\n  tx--\x3eouroboros-network-0.19\n\n  click A "https://github.com/IntersectMBO/ouroboros-network/pull/5016" _blank\n  click B "https://github.com/IntersectMBO/ouroboros-network/pull/5007" _blank\n  click C "https://github.com/IntersectMBO/ouroboros-network/pull/5046" _blank\n  click D "https://github.com/IntersectMBO/ouroboros-network/pull/5081" _blank\n  click E "https://github.com/IntersectMBO/ouroboros-network/pull/5069" _blank\n  click SRV "https://github.com/IntersectMBO/ouroboros-network/pull/5018" _blank\n  click tx "https://github.com/IntersectMBO/ouroboros-network/pull/4887" _blank\n\n  classDef merged color:#000000, stroke:#8256D0, fill:#8256D0, font-weight:bold\n  classDef open color:#000000, stroke:#347D39, fill:#347D39, font-weight:bold'}),(0,n.kt)("h3",{id:"fixes-which-made-into-the-on-going-cardano-node-1021"},"Fixes which made into the on-going ",(0,n.kt)("inlineCode",{parentName:"h3"},"cardano-node-10.2.1")),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"We fixed the peer-sharing application to only use the negotiated\n",(0,n.kt)("inlineCode",{parentName:"li"},"peerSharing")," flag in the ",(0,n.kt)("a",{parentName:"li",href:"https://ouroboros-network.cardano.intersectmbo.org/ouroboros-network-api/Ouroboros-Network-NodeToNode-Version.html#t:NodeToNodeVersionData"},(0,n.kt)("inlineCode",{parentName:"a"},"NodeToNodeVersionData")),"; see\n",(0,n.kt)("a",{parentName:"li",href:"https://github.com/IntersectMBO/ouroboros-network/pull/5061"},"ouroboros-network#5061"),"."),(0,n.kt)("li",{parentName:"ul"},"We modified ",(0,n.kt)("inlineCode",{parentName:"li"},"IOError")," exception handling: ",(0,n.kt)("a",{parentName:"li",href:"https://github.com/IntersectMBO/ouroboros-network/pull/5076"},"ouroboros-network#5076"),".")),(0,n.kt)("p",null,"Previously, we introduced a new ",(0,n.kt)("inlineCode",{parentName:"p"},"IOError")," handling policy due to a discussion with\nan SPO to make some scenarios easier to debug.  After testing it (the changes\nnever made it into a release), it turned out this could lead to attacks on the\nsystem.  Thus, we advocate for better monitoring of nodes (e.g. if resources\nlike file descriptors memory are available, the node is making progress)\nrather than rely on ",(0,n.kt)("inlineCode",{parentName:"p"},"cardano-node")," to be up and running."),(0,n.kt)("h3",{id:"new-mux-strategy-for-starting-mini-protocols"},"New mux strategy for starting mini-protocols"),(0,n.kt)("p",null,(0,n.kt)("a",{parentName:"p",href:"https://github.com/karknu"},"Karl Knutsson")," (",(0,n.kt)("a",{parentName:"p",href:"https://www.cardanofoundation.org/"},"CF"),") implemented a new strategy for starting\nmini-protocols, ",(0,n.kt)("inlineCode",{parentName:"p"},"StartOnDemandAny"),".  A mini-protocol which is using this\nstrategy will be started as soon as any ",(0,n.kt)("inlineCode",{parentName:"p"},"StartOnDemand")," (or ",(0,n.kt)("inlineCode",{parentName:"p"},"StartOnDemandAny"),")\nmini-protocol receives input from the network.  We will use this starting\nstrategy for the ",(0,n.kt)("inlineCode",{parentName:"p"},"keep-alive")," mini-protocol."),(0,n.kt)("h3",{id:"local-tx-monitor-protocol-changes"},"Local-TX-Monitor protocol changes"),(0,n.kt)("p",null,"A new query was added, which allows the retrieval of all measures/dimensions of the\nmempool capacity, e.g. byte-size capacity, ledger's execution units for both\nmemory and execution steps, and reference\nscripts size. See ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/IntersectMBO/ouroboros-network/pull/4918"},"ouroboros-network#4918"),"."),(0,n.kt)("h3",{id:"network-specification-updates"},"Network Specification Updates"),(0,n.kt)("p",null,"We made language improvements in the network specification, see\n",(0,n.kt)("a",{parentName:"p",href:"https://github.com/IntersectMBO/ouroboros-network/pull/5044"},"ouroboros-network#5044"),"; and some smaller changes/fixes\n",(0,n.kt)("a",{parentName:"p",href:"https://github.com/IntersectMBO/ouroboros-network/pull/5053"},"ouroboros-network#5053"),"."),(0,n.kt)("h3",{id:"other-minor-changes"},"Other minor changes"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/IntersectMBO/ouroboros-network/pull/5050"},(0,n.kt)("strong",{parentName:"a"},"Label some threads")),";"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/IntersectMBO/ouroboros-network/pull/5072"},(0,n.kt)("strong",{parentName:"a"},"Churn no timeouts test failure")),";"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/IntersectMBO/ouroboros-network/pull/5073"},(0,n.kt)("strong",{parentName:"a"},"Added haddocks to MiniProtocol type")),";")))}m.isMDXComponent=!0}}]);