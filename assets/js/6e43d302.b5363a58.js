"use strict";(self.webpackChunkcardano_updates=self.webpackChunkcardano_updates||[]).push([[59747],{3905:(e,t,a)=>{a.d(t,{Zo:()=>s,kt:()=>c});var l=a(67294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function n(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,l)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?n(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function p(e,t){if(null==e)return{};var a,l,r=function(e,t){if(null==e)return{};var a,l,r={},n=Object.keys(e);for(l=0;l<n.length;l++)a=n[l],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(l=0;l<n.length;l++)a=n[l],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var u=l.createContext({}),o=function(e){var t=l.useContext(u),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},s=function(e){var t=o(e.components);return l.createElement(u.Provider,{value:t},e.children)},m="mdxType",h={inlineCode:"code",wrapper:function(e){var t=e.children;return l.createElement(l.Fragment,{},t)}},d=l.forwardRef((function(e,t){var a=e.components,r=e.mdxType,n=e.originalType,u=e.parentName,s=p(e,["components","mdxType","originalType","parentName"]),m=o(a),d=r,c=m["".concat(u,".").concat(d)]||m[d]||h[d]||n;return a?l.createElement(c,i(i({ref:t},s),{},{components:a})):l.createElement(c,i({ref:t},s))}));function c(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var n=a.length,i=new Array(n);i[0]=d;var p={};for(var u in t)hasOwnProperty.call(t,u)&&(p[u]=t[u]);p.originalType=e,p[m]="string"==typeof e?e:r,i[1]=p;for(var o=2;o<n;o++)i[o]=a[o];return l.createElement.apply(null,i)}return l.createElement.apply(null,a)}d.displayName="MDXCreateElement"},3666:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>u,contentTitle:()=>i,default:()=>h,frontMatter:()=>n,metadata:()=>p,toc:()=>o});var l=a(87462),r=(a(67294),a(3905));const n={title:"Ledger Team Update",slug:"2023-09-29-ledger",authors:"lehins",tags:["ledger"],hide_table_of_contents:!1},i=void 0,p={permalink:"/2023-09-29-ledger",editUrl:"https://github.com/intersectmbo/cardano-updates/tree/main/blog/2023-09-29-ledger.md",source:"@site/blog/2023-09-29-ledger.md",title:"Ledger Team Update",description:"High level summary",date:"2023-09-29T00:00:00.000Z",formattedDate:"September 29, 2023",tags:[{label:"ledger",permalink:"/tags/ledger"}],readingTime:2.465,hasTruncateMarker:!1,authors:[{name:"Alexey Kuleshevich",title:"Ledger Team Software Engineer",url:"https://github.com/lehins",imageURL:"https://github.com/lehins.png",key:"lehins"}],frontMatter:{title:"Ledger Team Update",slug:"2023-09-29-ledger",authors:"lehins",tags:["ledger"],hide_table_of_contents:!1},prevItem:{title:"Hydra Team Update",permalink:"/2023-09-29-hydra"},nextItem:{title:"SRE Team Update",permalink:"/2023-09-29-sre"}},u={authorsImageUrls:[void 0]},o=[{value:"High level summary",id:"high-level-summary",level:2},{value:"Low level summary",id:"low-level-summary",level:2},{value:"Conway era",id:"conway-era",level:3},{value:"Performance",id:"performance",level:3},{value:"Releasing",id:"releasing",level:3},{value:"Testing",id:"testing",level:3}],s={toc:o},m="wrapper";function h(e){let{components:t,...a}=e;return(0,r.kt)(m,(0,l.Z)({},s,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"high-level-summary"},"High level summary"),(0,r.kt)("p",null,"Few important Conway related features were completed in this two week period:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Constitutional Committee was the last missing Conway related entity that has now been\nfully implemented."),(0,r.kt)("li",{parentName:"ul"},"Treasury withdrawals governance actions have been fixed and now behave as expected."),(0,r.kt)("li",{parentName:"ul"},"Current treasury amount supplied in the transaction is now enforced by the rules."),(0,r.kt)("li",{parentName:"ul"},"DRep's expiry is prevented by delaying the expiry for all DReps whenever there are no\nproposals to vote on."),(0,r.kt)("li",{parentName:"ul"},"Semantics of how CostModels are updated with Protocol Parameters have been changed to\nallow for individual Plutus language version updates, rather than requiring a complete\nreplacement of all CostModels")),(0,r.kt)("p",null,"Besides the new features there were also important performance and testing improvements:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"In particular stake distribution computation and native script handling received some\noptimizations."),(0,r.kt)("li",{parentName:"ul"},"New testing DSL has been implemented that drastically simplifies writing unit tests for\nledger rules."),(0,r.kt)("li",{parentName:"ul"},"Integration tests and benchmarks are now possible for Conway era because of the overhaul\nof functionality for initial funds and staking injection whenever node starts up in\nConway, while bypassing all previous eras.")),(0,r.kt)("h2",{id:"low-level-summary"},"Low level summary"),(0,r.kt)("h3",{id:"conway-era"},"Conway era"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/pull/3729"},"pull-3729")," - DRep expiry update after a contiguous set of epochs with no proposals to vote on"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/pull/3739"},"pull-3739")," - Rename some PParams to be consistent with Agda specification"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/pull/3743"},"pull-3743")," - Move DRepDistr from VState to ConwayGovState"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/pull/3746"},"pull-3746")," - Implement ",(0,r.kt)("inlineCode",{parentName:"li"},"tcTranslationContextL")," for Shelley"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/pull/3737"},"pull-3737")," - Implement EraTransition"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/pull/3749"},"pull-3749")," - Add predicate failure: current treasury value mismatch in LEDGER"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/pull/3748"},"pull-3748")," - Apply enacted treasury withdrawals"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/pull/3745"},"pull-3745")," - Constitutional Committee Ratification"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/pull/3763"},"pull-3763")," - Plutus interface improvements"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/pull/3771"},"pull-3771")," - Changed how costmodel updates are applied"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/pull/3766"},"pull-3766")," - Prevent updating protocol version with ",(0,r.kt)("inlineCode",{parentName:"li"},"PParamUpdate"))),(0,r.kt)("h3",{id:"performance"},"Performance"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/pull/3765"},"pull-3765")," - Improve native script handling"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/pull/3747"},"pull-3747")," - Use (CompactForm Coin) in IncrementalStake, DRepDistr (and other places) instead of Coin"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/pull/3758"},"pull-3758")," - Cardano-Perf regression: UMap.size regression fix"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/pull/3754"},"pull-3754")," - Use Alonzo-style TxOut encoder when possible")),(0,r.kt)("h3",{id:"releasing"},"Releasing"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/pull/3742"},"pull-3742")," - Update fourmolu, ghcid and hls. Update haskellNix and iohkNix flakes"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/pull/3744"},"pull-3744")," - Changelog 8.4"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/pull/3752"},"pull-3752")," - Patch release of cardano ledger conway 1.8.1.0"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/pull/3753"},"pull-3753")," - Minor cleanup and changelog entries"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/pull/3760"},"pull-3760")," - Fixup issues for release"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/pull/3764"},"pull-3764")," - Bump plutus deps to 1.13")),(0,r.kt)("h3",{id:"testing"},"Testing"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/pull/3734"},"pull-3734")," - Removed ",(0,r.kt)("inlineCode",{parentName:"li"},"Shaped")," instance for ",(0,r.kt)("inlineCode",{parentName:"li"},"Rep")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/pull/3735"},"pull-3735")," - Simplify the implementations of ",(0,r.kt)("inlineCode",{parentName:"li"},"hasOrd")," and ",(0,r.kt)("inlineCode",{parentName:"li"},"hasEq")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/pull/3728"},"pull-3728")," - STS tests based on constraints"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/pull/3714"},"pull-3714")," - Implement the remaining upgradable families"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/pull/3733"},"pull-3733")," - Add some unit tests for Conway features"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/pull/3762"},"pull-3762")," - Update CDDL for praos headers.")))}h.isMDXComponent=!0}}]);