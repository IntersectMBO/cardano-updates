"use strict";(self.webpackChunkcardano_updates=self.webpackChunkcardano_updates||[]).push([[90045],{3905:(e,t,o)=>{o.d(t,{Zo:()=>h,kt:()=>m});var n=o(67294);function a(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function r(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function i(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?r(Object(o),!0).forEach((function(t){a(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function s(e,t){if(null==e)return{};var o,n,a=function(e,t){if(null==e)return{};var o,n,a={},r=Object.keys(e);for(n=0;n<r.length;n++)o=r[n],t.indexOf(o)>=0||(a[o]=e[o]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)o=r[n],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(a[o]=e[o])}return a}var l=n.createContext({}),c=function(e){var t=n.useContext(l),o=t;return e&&(o="function"==typeof e?e(t):i(i({},t),e)),o},h=function(e){var t=c(e.components);return n.createElement(l.Provider,{value:t},e.children)},u="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var o=e.components,a=e.mdxType,r=e.originalType,l=e.parentName,h=s(e,["components","mdxType","originalType","parentName"]),u=c(o),d=a,m=u["".concat(l,".").concat(d)]||u[d]||p[d]||r;return o?n.createElement(m,i(i({ref:t},h),{},{components:o})):n.createElement(m,i({ref:t},h))}));function m(e,t){var o=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=o.length,i=new Array(r);i[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[u]="string"==typeof e?e:a,i[1]=s;for(var c=2;c<r;c++)i[c]=o[c];return n.createElement.apply(null,i)}return n.createElement.apply(null,o)}d.displayName="MDXCreateElement"},45165:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>p,frontMatter:()=>r,metadata:()=>s,toc:()=>c});var n=o(87462),a=(o(67294),o(3905));const r={title:"Initial CIP 1694 Security Analysis and Responses",slug:"2023-11-20-cip1694",authors:"kevinhammond",tags:["ledger","cip1694","security"],hide_table_of_contents:!1},i=void 0,s={permalink:"/2023-11-20-cip1694",editUrl:"https://github.com/intersectmbo/cardano-updates/tree/main/blog/2023-11-20-cip1694.md",source:"@site/blog/2023-11-20-cip1694.md",title:"Initial CIP 1694 Security Analysis and Responses",description:"High level summary",date:"2023-11-20T00:00:00.000Z",formattedDate:"November 20, 2023",tags:[{label:"ledger",permalink:"/tags/ledger"},{label:"cip1694",permalink:"/tags/cip-1694"},{label:"security",permalink:"/tags/security"}],readingTime:5.345,hasTruncateMarker:!1,authors:[{name:"Kevin Hammond",title:"Head of Software Engineering, Cardano Core",url:"https://github.com/kevinhammond",imageURL:"https://github.com/kevinhammond.png",key:"kevinhammond"}],frontMatter:{title:"Initial CIP 1694 Security Analysis and Responses",slug:"2023-11-20-cip1694",authors:"kevinhammond",tags:["ledger","cip1694","security"],hide_table_of_contents:!1},prevItem:{title:"Mithril Team Update",permalink:"/2023-11-22-mithril"},nextItem:{title:"Hydra Team Update",permalink:"/2023-11-17-hydra"}},l={authorsImageUrls:[void 0]},c=[{value:"High level summary",id:"high-level-summary",level:2},{value:"Initial CIP-1694 Security Analysis and Responses",id:"initial-cip-1694-security-analysis-and-responses",level:2},{value:"Section: The constitutional committee",id:"section-the-constitutional-committee",level:3},{value:"Section: Size of the constitutional committee",id:"section-size-of-the-constitutional-committee",level:3},{value:"Section: Terms",id:"section-terms",level:3},{value:"Section: Registered DReps",id:"section-registered-dreps",level:3},{value:"Section: Ratification",id:"section-ratification",level:3},{value:"Section: Content",id:"section-content",level:3},{value:"Section: Protocol Parameter groups",id:"section-protocol-parameter-groups",level:3},{value:"Section: Votes",id:"section-votes",level:3},{value:"Section: Separation of Hard Fork Initiation from Standard Protocol Parameter Changes",id:"section-separation-of-hard-fork-initiation-from-standard-protocol-parameter-changes",level:3},{value:"Section: Changes post Edinburgh workshop (July 2023)",id:"section-changes-post-edinburgh-workshop-july-2023",level:3},{value:"Section: Reduced deposits for some government actions",id:"section-reduced-deposits-for-some-government-actions",level:3}],h={toc:c},u="wrapper";function p(e){let{components:t,...o}=e;return(0,a.kt)(u,(0,n.Z)({},h,o,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h2",{id:"high-level-summary"},"High level summary"),(0,a.kt)("p",null,"We have undertaken an initial high-level security analysis of the CIP-1694 design.  We summarise the analysis and our responses here."),(0,a.kt)("h2",{id:"initial-cip-1694-security-analysis-and-responses"},"Initial CIP-1694 Security Analysis and Responses"),(0,a.kt)("h3",{id:"section-the-constitutional-committee"},"Section: The constitutional committee"),(0,a.kt)("hr",null),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},'\u201cFor example, if we consider the hypothetical Constitution rule "The Cardano network must always be able to produce new blocks" - In this example, if the governance action to reduce block size to 0 is passed, then there will be no way of passing or enacting further proposals. That is, this governance action is completely non-reversable. Suggestion: Instating a built-in mechanism that checks (and perhaps enforces) that the proposed governance actions, if passed, can be reverted in the future.')),(0,a.kt)("p",null,"There is a 'guardrails document' in preparation which captures issues such as these.  Some of them may be automatable, as suggested; others will need to be evaluated by humans."),(0,a.kt)("hr",null),(0,a.kt)("h3",{id:"section-size-of-the-constitutional-committee"},"Section: Size of the constitutional committee"),(0,a.kt)("hr",null),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"A possible issue with very large committee sizes (or large number of proposals/voters in general) is that it may take longer to have votes appear on-chain, which in extreme cases may require longer voting periods.")),(0,a.kt)("p",null,"Thanks. Yes, we\u2019ve been thinking about this issue for a long time, see for example the section \u2018Final safety measure, post bootstrapping\u2019. We don\u2019t consider this as an issue for the CC since they need to be elected while DReps can just register, so we expect the number of CC members to be much less than the number of DReps"),(0,a.kt)("hr",null),(0,a.kt)("h3",{id:"section-terms"},"Section: Terms"),(0,a.kt)("hr",null),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"The following sentence is a bit awkward to read: \u201cFor example, a committee of size five with a threshold of 3/5 a minimum size of three and two expired members can still pass governance actions if two non-expired members vote Yes.\u201d \u2014> Suggestion: \u201cFor example, if we have a committee of size five with a threshold of 3/5, then a committee of three non-expired and two expired members can still pass governance actions if two non-expired members vote Yes.\u201d ")),(0,a.kt)("p",null,"Thanks. Yes, that suggestion is a bit easier to read."),(0,a.kt)("hr",null),(0,a.kt)("h3",{id:"section-registered-dreps"},"Section: Registered DReps"),(0,a.kt)("hr",null),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u201cAdditionally, registered DReps will need to vote regularly to still be considered active.\u201d - There is a minor issue with requiring \u201cvoting regularly\u201d. That is, if there are no proposals to vote on for a long time, this means that no DRep can vote regularly (or they have to issue bogus proposals just to vote on them).")),(0,a.kt)("p",null,"Thanks. We\u2019ve added a mechanism to prevent that issue in the spec/code where if there\u2019s nothing to vote on for an entire epoch, we increment the epoch that each DRep expires."),(0,a.kt)("hr",null),(0,a.kt)("h3",{id:"section-ratification"},"Section: Ratification"),(0,a.kt)("hr",null),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"It is a bit unclear why protocol changes: network group and technical group are two separate groups.")),(0,a.kt)("p",null,"These correspond exactly to the groups that are administered by the Parameter Committee."),(0,a.kt)("hr",null),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"I didn\u2019t understand the rationale for requiring 100% \u201cYes\u201d votes to pass \u201cInfo\u201d type governance actions? It seems they have the least potential to harm the system.")),(0,a.kt)("p",null,"Yes, it\u2019s not about harming the system, since ",(0,a.kt)("inlineCode",{parentName:"p"},"Info"),"\nactions have no direct effect on the operation of Cardano. The motivation is simply to record the actual level of support for the action. "),(0,a.kt)("p",null,"Once an action is enacted it\u2019s no longer possible to vote on it. So if there was e.g. a threshold of 50%, then there is no way of telling whether the support for it might eventually have reached 90% or higher if it was not immediately enacted when the threshold was reached."),(0,a.kt)("hr",null),(0,a.kt)("h3",{id:"section-content"},"Section: Content"),(0,a.kt)("hr",null),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"For Hard-fork initiation, the changed parameters should probably also be required as part of Additional data.")),(0,a.kt)("p",null,"Protocol parameters can be changed in arbitrary ways by the hard fork and new ones might be introduced, so anything this action pins down might not actually be the value that will be present after the hard fork."),(0,a.kt)("hr",null),(0,a.kt)("h3",{id:"section-protocol-parameter-groups"},"Section: Protocol Parameter groups"),(0,a.kt)("hr",null),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"It is a bit unclear to the reader what some of these parameters mean, for example: monetary expansion (rho) and treasury expansion (tau). Suggestion: Include brief explanations for the non-obvious parameters.")),(0,a.kt)("p",null,"These are existing protocol parameters, described in e.g. ",(0,a.kt)("a",{parentName:"p",href:"https://docs.cardano.org/explore-cardano/parameter-guide/#:~:text=Protocol%20parameters%20on%20Cardano%20are,to%20changing%20conditions%20over%20time."},"https://cips.cardano.org/cips/cip9/"),"9 or ",(0,a.kt)("a",{parentName:"p",href:"https://docs.cardano.org/explore-cardano/parameter-guide/#:~:text=Protocol%20parameters%20on%20Cardano%20are,to%20changing%20conditions%20over%20time."},"The Cardano Protocol Parameters Guide"),"."),(0,a.kt)("hr",null),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"With the current set of governance actions, it seems that it is not possible to add new types of protocol parameters, or categories of governance voting thresholds. Suggestion: Consider possibility of incorporating governance actions that allow addition of new protocol parameters, deletion of defunct protocol parameters, or modification of governance voting threshold categories. ")),(0,a.kt)("p",null,"All of this needs to be done via a hard fork. If we had an action that added a parameter then there is no way of giving it semantics anyway, since that must be done by logic in the code."),(0,a.kt)("hr",null),(0,a.kt)("h3",{id:"section-votes"},"Section: Votes"),(0,a.kt)("hr",null),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Is a constitutional committee member also a DRep? If so, do they vote twice, once as a committee member and once as a DRep?")),(0,a.kt)("p",null,"They may or may not be (and they could also be an SPO). Note that this is fine, since these are completely separate tallies. This is also not preventable, since we don\u2019t have an on-chain mechanism for identity. And yes, each credential gets to vote on each action for all roles in the governance system it has."),(0,a.kt)("hr",null),(0,a.kt)("h3",{id:"section-separation-of-hard-fork-initiation-from-standard-protocol-parameter-changes"},"Section: Separation of Hard Fork Initiation from Standard Protocol Parameter Changes"),(0,a.kt)("hr",null),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"It is unclear whether there would be automated checks for whether a proposal is indeed a soft fork or hard fork, which would reduce human error in categorising proposals.")),(0,a.kt)("p",null,"There is no on-chain mechanism that could enforce this, the best we could do is some kind of certificate.  However, this may not be trustworthy, of course. We will consider this in future versions of Voltaire."),(0,a.kt)("hr",null),(0,a.kt)("h3",{id:"section-changes-post-edinburgh-workshop-july-2023"},"Section: Changes post Edinburgh workshop (July 2023)"),(0,a.kt)("hr",null),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u201cAll governance actions are enacted one epoch after they are ratified.\u201d - I\u2019m not sure if this line is currently in the main body of the CIP?")),(0,a.kt)("p",null,"It is, but it is phrased differently: \u2018All governance actions are enacted on the epoch boundary after their ratification.\u2019"),(0,a.kt)("hr",null),(0,a.kt)("h3",{id:"section-reduced-deposits-for-some-government-actions"},"Section: Reduced deposits for some government actions"),(0,a.kt)("hr",null),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Another downside of requiring endorsement from the constitutional committee is that this likely does not apply to constitutional committee-related proposals, such as no-confidence votes.")),(0,a.kt)("p",null,"Indeed. We have no plans for this at the moment."))}p.isMDXComponent=!0}}]);