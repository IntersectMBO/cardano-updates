"use strict";(self.webpackChunkcardano_updates=self.webpackChunkcardano_updates||[]).push([[48275],{3905:(e,t,a)=>{a.d(t,{Zo:()=>s,kt:()=>m});var n=a(67294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var u=n.createContext({}),d=function(e){var t=n.useContext(u),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},s=function(e){var t=d(e.components);return n.createElement(u.Provider,{value:t},e.children)},p="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},h=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,o=e.originalType,u=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),p=d(a),h=r,m=p["".concat(u,".").concat(h)]||p[h]||c[h]||o;return a?n.createElement(m,i(i({ref:t},s),{},{components:a})):n.createElement(m,i({ref:t},s))}));function m(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=a.length,i=new Array(o);i[0]=h;var l={};for(var u in t)hasOwnProperty.call(t,u)&&(l[u]=t[u]);l.originalType=e,l[p]="string"==typeof e?e:r,i[1]=l;for(var d=2;d<o;d++)i[d]=a[d];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}h.displayName="MDXCreateElement"},87687:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>u,contentTitle:()=>i,default:()=>c,frontMatter:()=>o,metadata:()=>l,toc:()=>d});var n=a(87462),r=(a(67294),a(3905));const o={title:"Ledger Team Update",slug:"2022-09-30-ledger",authors:"JaredCorduan",tags:["ledger"],hide_table_of_contents:!1},i=void 0,l={permalink:"/2022-09-30-ledger",editUrl:"https://github.com/intersectmbo/cardano-updates/tree/main/blog/2022-09-30-ledger.md",source:"@site/blog/2022-09-30-ledger.md",title:"Ledger Team Update",description:"Ledger Update",date:"2022-09-30T00:00:00.000Z",formattedDate:"September 30, 2022",tags:[{label:"ledger",permalink:"/tags/ledger"}],readingTime:2.285,hasTruncateMarker:!1,authors:[{name:"Jared Corduan",title:"Ledger Team Lead",url:"https://github.com/JaredCorduan",imageURL:"https://github.com/JaredCorduan.png",key:"JaredCorduan"}],frontMatter:{title:"Ledger Team Update",slug:"2022-09-30-ledger",authors:"JaredCorduan",tags:["ledger"],hide_table_of_contents:!1},prevItem:{title:"Node API & CLI Team Update",permalink:"/2022-10-04-node-cli-api"},nextItem:{title:"Network Team Update",permalink:"/2022-09-27-network"}},u={authorsImageUrls:[void 0]},d=[{value:"Ledger Update",id:"ledger-update",level:2},{value:"Technical debt issues completed",id:"technical-debt-issues-completed",level:3},{value:"Technical debt in progress",id:"technical-debt-in-progress",level:3}],s={toc:d},p="wrapper";function c(e){let{components:t,...a}=e;return(0,r.kt)(p,(0,n.Z)({},s,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"ledger-update"},"Ledger Update"),(0,r.kt)("p",null,"We have continued focusing nearly entirely on addressing technical debt.\nA lot of design work has begun for the next ledger era,\nbut we do not yet have anything concrete to share."),(0,r.kt)("h3",{id:"technical-debt-issues-completed"},"Technical debt issues completed"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"[",(0,r.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/issues/1676"},"issue-1676"),"][",(0,r.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/pull/2992"},"pull-2992"),"] We have finally removed the ledger dependency on the\n",(0,r.kt)("inlineCode",{parentName:"li"},"cardano-prelude")," package. It was barely used in the ledger repository, and it added a dependency\nthat we did not want to maintain. It was a bit difficult to remove, and we had\nto coordinate removing it from cardano-base.\nA lot ended up going into ",(0,r.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/pull/2992"},"pull-2992"),", due to the coordination effort, and we ended\nup updating Plutus as well.\nThis means that we've now also made a lot of progress on the problematic cost model serialization\nissues described in ",(0,r.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/issues/2902"},"issue-2902"),".\nIn particular, after we resolve ",(0,r.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/issues/3014"},"issue-3014"),", we will not have to wait an epoch before\nreleasing a cost model for a new version of Plutus, as we had to do for the Vasil HF."),(0,r.kt)("li",{parentName:"ul"},"[",(0,r.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/issues/3046"},"issue-3046"),"][",(0,r.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/pull/3055"},"pull-3055"),"] We moved a module that is now only used in Byron to a Byron package."),(0,r.kt)("li",{parentName:"ul"},"[",(0,r.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/issues/3047"},"issue-3047"),"][",(0,r.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/pull/3054"},"pull-3054"),"] We improved the interface to the ",(0,r.kt)("inlineCode",{parentName:"li"},"Value")," (multi-asset) type."),(0,r.kt)("li",{parentName:"ul"},"[",(0,r.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/pull/3044"},"pull-3044"),"] We debugged and fixed a tricky compilation issue. Certain kinds of field updates\nwere adding approximately 20 minutes to our compile time!"),(0,r.kt)("li",{parentName:"ul"},"[",(0,r.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/issues/2932"},"issue-2932"),"][",(0,r.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/pull/3036"},"pull-3036"),"] As a part of our ongoing re-organization of the codebase, we\nhave added a ",(0,r.kt)("inlineCode",{parentName:"li"},"Cardano.Ledger.[Era].Core")," module to each ledger era that has a TxBody class.\nMost classes defined in the era should go in this new module.\nWe also re-export the ",(0,r.kt)("inlineCode",{parentName:"li"},"Cardno.Ledger.Core")," module and the previous ",(0,r.kt)("inlineCode",{parentName:"li"},"Cardano.Ledger.[Era].Core"),"\nmodules from each era.")),(0,r.kt)("h3",{id:"technical-debt-in-progress"},"Technical debt in progress"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"[",(0,r.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/issues/3034"},"issue-3034"),"][",(0,r.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/issues/3035"},"issue-3035"),"][",(0,r.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-node/issues/4421"},"node-issue-4421"),"] We are continuing to write benchmarks to understand exactly where\nall the time is being spent on executing the ",(0,r.kt)("inlineCode",{parentName:"li"},"TICKF")," transition.\nThe consolidation of the per-stake-credential stake distribution to the per-stake-pool\ndistribution does seem to account for a large amount of time (near a second as written, which we\nhave down to about half a second with some optimizations),\nbut this does not account for everything.\nApplying the reward update may also be a big contributing factor."),(0,r.kt)("li",{parentName:"ul"},"[",(0,r.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/pull/3033"},"pull-3033"),"][",(0,r.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/pull/3038"},"pull-3038"),"][",(0,r.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/pull/3041"},"pull-3041"),"] A separate team is working on upgrading all the\ncardano-node repositories to work with ghc 9.2.4. We have been helping out with this effort."),(0,r.kt)("li",{parentName:"ul"},"The nix scripts used to build our new\n",(0,r.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/formal-ledger-specifications"},"formal ledger model"),"\ndo not work consistently for everyone, and we have been working on fixing these issues."),(0,r.kt)("li",{parentName:"ul"},"[",(0,r.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/issues/3014"},"issue-3014"),"] We are still working on adding a versioning scheme to all of the ledger\nserializers.")))}c.isMDXComponent=!0}}]);