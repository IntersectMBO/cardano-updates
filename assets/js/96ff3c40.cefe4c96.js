"use strict";(self.webpackChunkcardano_updates=self.webpackChunkcardano_updates||[]).push([[65856],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>c});var o=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=o.createContext({}),l=function(e){var t=o.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},u=function(e){var t=l(e.components);return o.createElement(s.Provider,{value:t},e.children)},m="mdxType",h={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},d=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,u=p(e,["components","mdxType","originalType","parentName"]),m=l(n),d=r,c=m["".concat(s,".").concat(d)]||m[d]||h[d]||i;return n?o.createElement(c,a(a({ref:t},u),{},{components:n})):o.createElement(c,a({ref:t},u))}));function c(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,a=new Array(i);a[0]=d;var p={};for(var s in t)hasOwnProperty.call(t,s)&&(p[s]=t[s]);p.originalType=e,p[m]="string"==typeof e?e:r,a[1]=p;for(var l=2;l<i;l++)a[l]=n[l];return o.createElement.apply(null,a)}return o.createElement.apply(null,n)}d.displayName="MDXCreateElement"},84611:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>a,default:()=>h,frontMatter:()=>i,metadata:()=>p,toc:()=>l});var o=n(87462),r=(n(67294),n(3905));const i={title:"Network Team Update",slug:"2023-12-08-network",authors:"coot",tags:["network"],hide_table_of_contents:!1},a=void 0,p={permalink:"/2023-12-08-network",editUrl:"https://github.com/intersectmbo/cardano-updates/tree/main/blog/2023-12-08-network.md",source:"@site/blog/2023-12-08-network.md",title:"Network Team Update",description:"High-level overview of sprint 49 & sprint 50",date:"2023-12-08T00:00:00.000Z",formattedDate:"December 8, 2023",tags:[{label:"network",permalink:"/tags/network"}],readingTime:2.445,hasTruncateMarker:!1,authors:[{name:"Marcin Szamotulski",title:"Network Team Lead",url:"https://github.com/coot",imageURL:"https://github.com/coot.png",key:"coot"}],frontMatter:{title:"Network Team Update",slug:"2023-12-08-network",authors:"coot",tags:["network"],hide_table_of_contents:!1},prevItem:{title:"Goedel Team Update",permalink:"/2023-12-08-goedel"},nextItem:{title:"Node API & CLI Team Update",permalink:"/2023-12-08-node-cli-api"}},s={authorsImageUrls:[void 0]},l=[{value:"High-level overview of sprint 49 &amp; sprint 50",id:"high-level-overview-of-sprint-49--sprint-50",level:2},{value:"Fixed PeerSelection bug",id:"fixed-peerselection-bug",level:3},{value:"Bootstrap Peers",id:"bootstrap-peers",level:3},{value:"Tx-Submission",id:"tx-submission",level:3},{value:"Peer Sharing",id:"peer-sharing",level:2},{value:"IOSim",id:"iosim",level:3},{value:"Cardano-Ping",id:"cardano-ping",level:3},{value:"Technical Debt",id:"technical-debt",level:3}],u={toc:l},m="wrapper";function h(e){let{components:t,...n}=e;return(0,r.kt)(m,(0,o.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"high-level-overview-of-sprint-49--sprint-50"},"High-level overview of ",(0,r.kt)("a",{parentName:"h2",href:"https://github.com/orgs/input-output-hk/projects/19/views/16?filterQuery=sprint%3A%22sprint+49%22"},"sprint 49")," & ",(0,r.kt)("a",{parentName:"h2",href:"https://github.com/orgs/input-output-hk/projects/19/views/16?filterQuery=sprint%3A%22sprint+50%22"},"sprint 50")),(0,r.kt)("h3",{id:"fixed-peerselection-bug"},"Fixed PeerSelection bug"),(0,r.kt)("p",null,"Karl Knutsson (",(0,r.kt)("a",{parentName:"p",href:"https://cardanofoundation.org"},"Cardano Foundation (CF)"),") found a bug in\nthe ",(0,r.kt)("inlineCode",{parentName:"p"},"cardano-node-8.7.0")," version used on the Sancho Net which was fixed in ",(0,r.kt)("inlineCode",{parentName:"p"},"8.7.1"),".\nIt resulted in a node not being able to reconnect to an upstream peer once it\nwas demoted by an asynchronous exception.  This bug would be caught by Q&A in\na mainet release, but for testnet releases, Q&A test suite is not used. We also\ndeveloped a test which covers the bug in the ",(0,r.kt)("inlineCode",{parentName:"p"},"ouroboros-network"),", we also identified\na missing ",(0,r.kt)("inlineCode",{parentName:"p"},"PeerSelection")," test which we need to port to our simulation network.\nSee ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/input-output-hk/ouroboros-network/pull/4734"},"ouroboros-network#4734"),", ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/input-output-hk/ouroboros-network/issues/4665"},"ouroboros-network#4665"),"."),(0,r.kt)("h3",{id:"bootstrap-peers"},"Bootstrap Peers"),(0,r.kt)("p",null,"Still under review, ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/input-output-hk/ouroboros-network/pull/4555"},"ouroboros-network#4555"),".  The consensus team is now\nimplementing the API we need for bootstrap peers.  Once consensus API is implemented we will integrate changes in an experimental branch of\n",(0,r.kt)("inlineCode",{parentName:"p"},"cardano-node"),"."),(0,r.kt)("h3",{id:"tx-submission"},"Tx-Submission"),(0,r.kt)("p",null,"We started working on a new implementation of the tx-submission application.  No\n",(0,r.kt)("inlineCode",{parentName:"p"},"tx-submission")," protocol changes are foreseen, but we want to be able to\ndownload each ",(0,r.kt)("inlineCode",{parentName:"p"},"tx")," from just one upstream peer and share the results between\ndifferent connections.  We want to distribute the bandwidth between multiple\nclients.  We also think that this work will prepare us for the future\nOuroboros-Leios changes, which will contain various versions of ",(0,r.kt)("inlineCode",{parentName:"p"},"tx-submission"),"\nlike mini-protocols. See ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/input-output-hk/ouroboros-network/pull/4701"},"ouroboros-network#4701"),"."),(0,r.kt)("h2",{id:"peer-sharing"},"Peer Sharing"),(0,r.kt)("p",null,"Various fixes and improvements were implemented:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{parentName:"p",href:"https://github.com/input-output-hk/ouroboros-network/pull/4725"},"ouroboros-network#4725")),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"disabled peer sharing with initiator-only nodes: currently it's not\npossible to get peers from initiator-only nodes (edge nodes, e.g.\nwallets).  In the future, we might change this, which will require running\na server-side of the ",(0,r.kt)("inlineCode",{parentName:"li"},"peer-sharing")," protocol by such nodes. See\n",(0,r.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/ouroboros-network/issues/4726"},"ouroboros-network#4726"),"."),(0,r.kt)("li",{parentName:"ul"},"fixed ",(0,r.kt)("inlineCode",{parentName:"li"},"peer-sharing")," codec"),(0,r.kt)("li",{parentName:"ul"},"fixed a handshake bug which returned a wrong peer-sharing option"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{parentName:"p",href:"https://github.com/input-output-hk/ouroboros-network/pull/4728"},"ouroboros-network#4728")),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"disabled ",(0,r.kt)("inlineCode",{parentName:"li"},"peer-sharing")," for ",(0,r.kt)("inlineCode",{parentName:"li"},"NodeToNodeV_11")," and ",(0,r.kt)("inlineCode",{parentName:"li"},"NodeToNodeV_12")))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Karl Knutsson (",(0,r.kt)("a",{parentName:"p",href:"https://cardanofoundation.org"},"CF"),") has been working on additional improvements, e.g. ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/input-output-hk/ouroboros-network/pull/4735"},"ouroboros-network#4735")))),(0,r.kt)("p",null,"With these fixes, Karl Knutsson (",(0,r.kt)("a",{parentName:"p",href:"https://cardanofoundation.org"},"CF"),") was able to see that two peers on the mainnet\ncan discover themselves through ",(0,r.kt)("inlineCode",{parentName:"p"},"peer-sharing")," and keep being mutually useful\nand thus the connection surviving ",(0,r.kt)("inlineCode",{parentName:"p"},"outbound-governor")," churn events."),(0,r.kt)("h3",{id:"iosim"},"IOSim"),(0,r.kt)("p",null,"We improved the memory footprint of ",(0,r.kt)("inlineCode",{parentName:"p"},"IOSim")," in ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/input-output-hk/io-sim/pull/126"},"io-sim#126"),", see\n",(0,r.kt)("a",{parentName:"p",href:"https://github.com/input-output-hk/ouroboros-network/pull/4722"},"ouroboros-network#4721")," for heap profile improvements on large test cases."),(0,r.kt)("p",null,"We are working on optimising the memory footprint of ",(0,r.kt)("inlineCode",{parentName:"p"},"IOSimPOR"),".  We are\nreimplementing ",(0,r.kt)("inlineCode",{parentName:"p"},"VectorClocks")," using a trie, instead of a map which leads to\nsignificant improvements."),(0,r.kt)("h3",{id:"cardano-ping"},"Cardano-Ping"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"cardano-node-0.2.0.10")," was released to ",(0,r.kt)("inlineCode",{parentName:"p"},"CHaP"),", ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/input-output-hk/ouroboros-network/pull/4746"},"ouroboros-network#4746"),".  This\nversion exports more APIs which turned out to be useful in ",(0,r.kt)("inlineCode",{parentName:"p"},"cardano-node")," test\nsuite, see ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/input-output-hk/cardano-node/pull/5536"},"cardano-node#5536"),"."),(0,r.kt)("h3",{id:"technical-debt"},"Technical Debt"),(0,r.kt)("p",null,"We addressed some small tech-debt issues in ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/input-output-hk/ouroboros-network/pull/4722"},"ouroboros-network#4722"),":"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"fixed some typos"),(0,r.kt)("li",{parentName:"ul"},"using ",(0,r.kt)("inlineCode",{parentName:"li"},"bracket")," instead of ",(0,r.kt)("inlineCode",{parentName:"li"},"onException")," in ",(0,r.kt)("inlineCode",{parentName:"li"},"withSnocket")),(0,r.kt)("li",{parentName:"ul"},"improved haddocks"),(0,r.kt)("li",{parentName:"ul"},"organised ",(0,r.kt)("inlineCode",{parentName:"li"},"TracePeerSelection")," constructors")),(0,r.kt)("p",null,"We improved the memory footprint of some of our tests in ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/input-output-hk/ouroboros-network/pull/4722"},"ouroboros-network#4721"),"."))}h.isMDXComponent=!0}}]);