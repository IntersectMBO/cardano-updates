"use strict";(self.webpackChunkcardano_updates=self.webpackChunkcardano_updates||[]).push([[20433],{3905:(e,t,a)=>{a.d(t,{Zo:()=>s,kt:()=>c});var r=a(67294);function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function n(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?n(Object(a),!0).forEach((function(t){l(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function p(e,t){if(null==e)return{};var a,r,l=function(e,t){if(null==e)return{};var a,r,l={},n=Object.keys(e);for(r=0;r<n.length;r++)a=n[r],t.indexOf(a)>=0||(l[a]=e[a]);return l}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)a=n[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(l[a]=e[a])}return l}var o=r.createContext({}),u=function(e){var t=r.useContext(o),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},s=function(e){var t=u(e.components);return r.createElement(o.Provider,{value:t},e.children)},d="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},h=r.forwardRef((function(e,t){var a=e.components,l=e.mdxType,n=e.originalType,o=e.parentName,s=p(e,["components","mdxType","originalType","parentName"]),d=u(a),h=l,c=d["".concat(o,".").concat(h)]||d[h]||m[h]||n;return a?r.createElement(c,i(i({ref:t},s),{},{components:a})):r.createElement(c,i({ref:t},s))}));function c(e,t){var a=arguments,l=t&&t.mdxType;if("string"==typeof e||l){var n=a.length,i=new Array(n);i[0]=h;var p={};for(var o in t)hasOwnProperty.call(t,o)&&(p[o]=t[o]);p.originalType=e,p[d]="string"==typeof e?e:l,i[1]=p;for(var u=2;u<n;u++)i[u]=a[u];return r.createElement.apply(null,i)}return r.createElement.apply(null,a)}h.displayName="MDXCreateElement"},31145:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>o,contentTitle:()=>i,default:()=>m,frontMatter:()=>n,metadata:()=>p,toc:()=>u});var r=a(87462),l=(a(67294),a(3905));const n={title:"Ledger Team Update",slug:"2023-11-08-ledger",authors:"lehins",tags:["ledger"],hide_table_of_contents:!1},i=void 0,p={permalink:"/2023-11-08-ledger",editUrl:"https://github.com/intersectmbo/cardano-updates/tree/main/blog/2023-11-08-ledger.md",source:"@site/blog/2023-11-08-ledger.md",title:"Ledger Team Update",description:"High level summary",date:"2023-11-08T00:00:00.000Z",formattedDate:"November 8, 2023",tags:[{label:"ledger",permalink:"/tags/ledger"}],readingTime:2.685,hasTruncateMarker:!1,authors:[{name:"Alexey Kuleshevich",title:"Ledger Team Software Engineer",url:"https://github.com/lehins",imageURL:"https://github.com/lehins.png",key:"lehins"}],frontMatter:{title:"Ledger Team Update",slug:"2023-11-08-ledger",authors:"lehins",tags:["ledger"],hide_table_of_contents:!1},prevItem:{title:"DB-sync Team Update",permalink:"/2023-11-09-db-sync"},nextItem:{title:"Mithril Team Update",permalink:"/2023-11-08-mithril"}},o={authorsImageUrls:[void 0]},u=[{value:"High level summary",id:"high-level-summary",level:2},{value:"Low level summary",id:"low-level-summary",level:2},{value:"Conway",id:"conway",level:3},{value:"Testing",id:"testing",level:3},{value:"Improvements and releasing",id:"improvements-and-releasing",level:3}],s={toc:u},d="wrapper";function m(e){let{components:t,...a}=e;return(0,l.kt)(d,(0,r.Z)({},s,a,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("h2",{id:"high-level-summary"},"High level summary"),(0,l.kt)("p",null,"This update contains mostly improvements to quality of Conway era implementation and\ntooling that we use for testing Ledger. Major Conway bugs that were discovered and\nsquashed are:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"PParamsUpdate proposals will now correctly use DRep thresholds for ratification"),(0,l.kt)("li",{parentName:"ul"},"Treasury withdrawals are now properly enacted."),(0,l.kt)("li",{parentName:"ul"},"Corrected snapshotting and DRep Stake Distribution Pulser initialization"),(0,l.kt)("li",{parentName:"ul"},"Delegation to non-existent Stake pool is no longer possible")),(0,l.kt)("p",null,"Other important quality of life improvements are addition of reusable interfaces for an\nordered set ",(0,l.kt)("inlineCode",{parentName:"p"},"OSet")," and ordered map ",(0,l.kt)("inlineCode",{parentName:"p"},"OMap"),". Which allowed us to disable duplicate\ncertificates and proposals in a transaction. As a precursor to ",(0,l.kt)("inlineCode",{parentName:"p"},"PlutusV3")," integration, a\nserious reorganization of Plutus related functionality was performed."),(0,l.kt)("p",null,"Conway related additions that are noteworthy: Conway Ledger events, disallowing voting on\nexpired proposals, addition of Anchor to Constitutional Committee resignation proposals."),(0,l.kt)("p",null,'Significant improvements have been made to a specialized "Imp" test library that allows us\nwriting concise stateful unit tests for verifying the Ledger logic. Serious progress has\nbeen made on the conformance testing, where we can now interface with Haskell generated\ncode from the Agda specification. Serialization testing has been extended to increase\nbinary conformance coverage.'),(0,l.kt)("h2",{id:"low-level-summary"},"Low level summary"),(0,l.kt)("h3",{id:"conway"},"Conway"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/pull/3808"},"pull-3808")," - Enhance ",(0,l.kt)("inlineCode",{parentName:"li"},"CommitteeMembersState")," query to return quorum and NoConfidence"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/pull/3801"},"pull-3801")," - Fix epoch rule and tests"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/pull/3803"},"pull-3803")," - Fix delegation validation"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/pull/3759"},"pull-3759")," - Reshuffle things to the DRepPulser incorporates some snap shot things"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/pull/3779"},"pull-3779")," - Prevent duplicate certs and proposals"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/pull/3794"},"pull-3794")," - Added anchor to resign certs"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/pull/3797"},"pull-3797")," - Cleanup JSON instances for Conway governance"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/pull/3848"},"pull-3848")," - Plutus modules restructure"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/pull/3840"},"pull-3840")," - Fix anomalies in Deposits in the Conway Era"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/pull/3856"},"pull-3856")," - Add governance related ledger events"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/pull/3825"},"pull-3825")," - Prevent voting on expired GovActions"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/pull/3831"},"pull-3831")," - Treasury withdrawal fix"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/pull/3791"},"pull-3791")," - Use a Data.OMap.Strict to replace ProposalsSnapshot"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/pull/3836"},"pull-3836")," - PParamsUpdate enactment fix"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/pull/3846"},"pull-3846")," - Revert argument order swap.")),(0,l.kt)("h3",{id:"testing"},"Testing"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/pull/3782"},"pull-3782")," - Move ",(0,l.kt)("inlineCode",{parentName:"li"},"ImpTest")," to Shelley testlib"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/pull/3842"},"pull-3842")," - Imp improvements"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/pull/3844"},"pull-3844")," - Add mappings to Agda types"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/pull/3853"},"pull-3853")," - Fix strange assertion failure, which hides real Block too big problem."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/pull/3809"},"pull-3809")," - CDDL roundtrip testing"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/pull/3832"},"pull-3832")," - Treasury withdrawals tests"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/pull/3839"},"pull-3839")," - Added ",(0,l.kt)("inlineCode",{parentName:"li"},"cardano-ledger-conformance")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/pull/3841"},"pull-3841")," - Add ",(0,l.kt)("inlineCode",{parentName:"li"},"sha256")," to ",(0,l.kt)("inlineCode",{parentName:"li"},"cardano-ledger-executable-spec"))),(0,l.kt)("h3",{id:"improvements-and-releasing"},"Improvements and releasing"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/pull/3843"},"pull-3843")," - Add ...WithLogs versions of evalScripts and friends"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/pull/3795"},"pull-3795")," - Bump plutus to 1.15"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/pull/3798"},"pull-3798")," - Bump urllib3 from 1.26.17 to 1.26.18 in /doc"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/pull/3799"},"pull-3799")," - Changes needed for 8.6 release"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/pull/3807"},"pull-3807")," - Add invalidBeforeL and invalidHereAfterL functions"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/pull/3819"},"pull-3819")," - Fixups needed for a release"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/pull/3829"},"pull-3829")," - Post release CHANGELOG version bumps"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/pull/3830"},"pull-3830")," - Bump aeson to 2.2"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/pull/3833"},"pull-3833")," - Backport release cardano-ledger-conway-1.10.1.0"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/pull/3828"},"pull-3828")," - Add changelog for node release 8.6")))}m.isMDXComponent=!0}}]);