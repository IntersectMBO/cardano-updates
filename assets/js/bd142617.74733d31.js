"use strict";(self.webpackChunkcardano_updates=self.webpackChunkcardano_updates||[]).push([[74947],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>m});var r=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=r.createContext({}),d=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=d(e.components);return r.createElement(l.Provider,{value:t},e.children)},p="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},h=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),p=d(n),h=a,m=p["".concat(l,".").concat(h)]||p[h]||u[h]||o;return n?r.createElement(m,i(i({ref:t},c),{},{components:n})):r.createElement(m,i({ref:t},c))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,i=new Array(o);i[0]=h;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[p]="string"==typeof e?e:a,i[1]=s;for(var d=2;d<o;d++)i[d]=n[d];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}h.displayName="MDXCreateElement"},52450:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>u,frontMatter:()=>o,metadata:()=>s,toc:()=>d});var r=n(87462),a=(n(67294),n(3905));const o={title:"Unexpected Ledger State Replay in the Conway era",slug:"2024-09-12-incident",authors:"kevinhammond",tags:["ledger","consensus","incident"],hide_table_of_contents:!1},i=void 0,s={permalink:"/2024-09-12-incident",editUrl:"https://github.com/intersectmbo/cardano-updates/tree/main/blog/2024-09-12-incident.md",source:"@site/blog/2024-09-12-incident.md",title:"Unexpected Ledger State Replay in the Conway era",description:"Unexpected Ledger State Replay in the Conway era",date:"2024-09-12T00:00:00.000Z",formattedDate:"September 12, 2024",tags:[{label:"ledger",permalink:"/tags/ledger"},{label:"consensus",permalink:"/tags/consensus"},{label:"incident",permalink:"/tags/incident"}],readingTime:.77,hasTruncateMarker:!1,authors:[{name:"Kevin Hammond",title:"Head of Software Engineering, Cardano Core",url:"https://github.com/kevinhammond",imageURL:"https://github.com/kevinhammond.png",key:"kevinhammond"}],frontMatter:{title:"Unexpected Ledger State Replay in the Conway era",slug:"2024-09-12-incident",authors:"kevinhammond",tags:["ledger","consensus","incident"],hide_table_of_contents:!1},prevItem:{title:"Node API & CLI Team Update",permalink:"/2024-09-18-node-cli-api"},nextItem:{title:"Large Reference Scripts",permalink:"/2024-09-11-incident"}},l={authorsImageUrls:[void 0]},d=[{value:"Unexpected Ledger State Replay in the Conway era",id:"unexpected-ledger-state-replay-in-the-conway-era",level:2},{value:"Further Details",id:"further-details",level:3}],c={toc:d},p="wrapper";function u(e){let{components:t,...n}=e;return(0,a.kt)(p,(0,r.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h2",{id:"unexpected-ledger-state-replay-in-the-conway-era"},"Unexpected Ledger State Replay in the Conway era"),(0,a.kt)("p",null,"An issue was identified shortly before the Chang hard fork: it was\nfound that ledger state snapshots would break ledger replay in the\nConway era under mainnet conditions.  The ledger and consensus teams\nworked rapidly to resolve the issue with a hotfix released within 24\nhours of the hard fork.  In order to avoid pauses in node availability,\nit was recommended that users should not restart their node\nprocess until they had upgraded their node to the hotfix - this included any node\ntype: relays, block producers, DB-Sync nodes, etc."),(0,a.kt)("p",null,"The issue is documented ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/IntersectMBO/cardano-ledger/pull/4589"},"here"),".  The cause was a slight inconsistency between the ledger state snapshots that\nwere written and those that could be read back; a side effect of the removal of pointer addresses in the Conway\nera. Nodes version 9.1.1 and later resolve this issue."),(0,a.kt)("h3",{id:"further-details"},"Further Details"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://github.com/IntersectMBO/cardano-node/releases/tag/9.1.1"},"Node version 9.1.1")),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://github.com/IntersectMBO/cardano-ledger/pull/4589"},"GitHub Issue")))}u.isMDXComponent=!0}}]);