"use strict";(self.webpackChunkcardano_updates=self.webpackChunkcardano_updates||[]).push([[80156],{3905:(e,t,r)=>{r.d(t,{Zo:()=>p,kt:()=>m});var a=r(67294);function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},l=Object.keys(e);for(a=0;a<l.length;a++)r=l[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)r=l[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var u=a.createContext({}),d=function(e){var t=a.useContext(u),r=t;return e&&(r="function"==typeof e?e(t):o(o({},t),e)),r},p=function(e){var t=d(e.components);return a.createElement(u.Provider,{value:t},e.children)},s="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},h=a.forwardRef((function(e,t){var r=e.components,n=e.mdxType,l=e.originalType,u=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),s=d(r),h=n,m=s["".concat(u,".").concat(h)]||s[h]||c[h]||l;return r?a.createElement(m,o(o({ref:t},p),{},{components:r})):a.createElement(m,o({ref:t},p))}));function m(e,t){var r=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var l=r.length,o=new Array(l);o[0]=h;var i={};for(var u in t)hasOwnProperty.call(t,u)&&(i[u]=t[u]);i.originalType=e,i[s]="string"==typeof e?e:n,o[1]=i;for(var d=2;d<l;d++)o[d]=r[d];return a.createElement.apply(null,o)}return a.createElement.apply(null,r)}h.displayName="MDXCreateElement"},86936:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>u,contentTitle:()=>o,default:()=>c,frontMatter:()=>l,metadata:()=>i,toc:()=>d});var a=r(87462),n=(r(67294),r(3905));const l={title:"Ledger Team Update",slug:"2022-12-09-ledger",authors:"JaredCorduan",tags:["ledger"],hide_table_of_contents:!1},o=void 0,i={permalink:"/2022-12-09-ledger",editUrl:"https://github.com/intersectmbo/cardano-updates/tree/main/blog/2022-12-09-ledger.md",source:"@site/blog/2022-12-09-ledger.md",title:"Ledger Team Update",description:"High level summary",date:"2022-12-09T00:00:00.000Z",formattedDate:"December 9, 2022",tags:[{label:"ledger",permalink:"/tags/ledger"}],readingTime:2.87,hasTruncateMarker:!1,authors:[{name:"Jared Corduan",title:"Ledger Team Lead",url:"https://github.com/JaredCorduan",imageURL:"https://github.com/JaredCorduan.png",key:"JaredCorduan"}],frontMatter:{title:"Ledger Team Update",slug:"2022-12-09-ledger",authors:"JaredCorduan",tags:["ledger"],hide_table_of_contents:!1},prevItem:{title:"Hydra Team Update",permalink:"/2022-12-09-hydra"},nextItem:{title:"Hydra Team Update",permalink:"/2022-12-02-hydra"}},u={authorsImageUrls:[void 0]},d=[{value:"High level summary",id:"high-level-summary",level:2},{value:"Lower level summary",id:"lower-level-summary",level:2},{value:"Cardano ledger API",id:"cardano-ledger-api",level:4},{value:"Architectural Decision Records (ADRs)",id:"architectural-decision-records-adrs",level:4},{value:"Tracking individual deposits",id:"tracking-individual-deposits",level:4},{value:"Removing pointer addresses",id:"removing-pointer-addresses",level:4},{value:"Technical debt",id:"technical-debt",level:4}],p={toc:d},s="wrapper";function c(e){let{components:t,...r}=e;return(0,n.kt)(s,(0,a.Z)({},p,r,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h2",{id:"high-level-summary"},"High level summary"),(0,n.kt)("p",null,"The Plutus tools team at IOG has started helping the ledger team to build out a user friendly\n",(0,n.kt)("inlineCode",{parentName:"p"},"cardano-ledger-api")," package!\nA ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/input-output-hk/cardano-ledger/projects/5"},"GitHub project"),"\nwill be filled out in the days ahead,\npeople interested in the API can use it to follow along and join in on the conversations."),(0,n.kt)("p",null,"The ledger team has started using\n",(0,n.kt)("a",{parentName:"p",href:"https://github.com/input-output-hk/cardano-ledger/blob/6fc0e198560fb4169d435da882394930789a8af8/docs/adr/2022-12-01_001-record-architectural-decisions.md"},"architectural decision records"),"\nto leave a record of important decisions that the team makes.\nWe will retroactively go back through past decisions and make ADRs for them."),(0,n.kt)("p",null,"The logic to track individual deposits is now nearly in place.\nWe are prioritizing correctness with our first pull request, and will follow up with\nperformance optimizations and general cleanup next."),(0,n.kt)("p",null,"Pointer addresses are being deprecated with the Cardano major protocol version 8.\nSee ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/cardano-foundation/CIPs/pull/374"},"CPS-0002"),"\nfor more context."),(0,n.kt)("h2",{id:"lower-level-summary"},"Lower level summary"),(0,n.kt)("h4",{id:"cardano-ledger-api"},"Cardano ledger API"),(0,n.kt)("p",null,"The ",(0,n.kt)("strong",{parentName:"p"},"Plutus tools team")," has taken our minimal ",(0,n.kt)("inlineCode",{parentName:"p"},"cardano-ledger-api")," package and started filling it\nout and adding much needed documentation.\nThey have also added doctests!\nIn the days to come, the Plutus tools team will map out a lot more work for the API and record\nit in this\n",(0,n.kt)("a",{parentName:"p",href:"https://github.com/input-output-hk/cardano-ledger/projects/5"},"GitHub project"),"."),(0,n.kt)("p",null,"See"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/pull/3182"},"pull-3182")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/pull/3188"},"pull-3188"))),(0,n.kt)("h4",{id:"architectural-decision-records-adrs"},"Architectural Decision Records (ADRs)"),(0,n.kt)("p",null,"We are now providing more context and leaving a record of important decisions that are made\nin the ledger. The first ADR explains the very lightweight process."),(0,n.kt)("p",null,"See"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/pull/3177"},"pull-3177")," (rendered ",(0,n.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/blob/6fc0e198560fb4169d435da882394930789a8af8/docs/adr/2022-12-01_001-record-architectural-decisions.md"},"here"),")")),(0,n.kt)("h4",{id:"tracking-individual-deposits"},"Tracking individual deposits"),(0,n.kt)("p",null,"See ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/input-output-hk/cardano-ledger/pull/3190/files"},"ADR-3"),"\nfor background.\nWe now have the logic in place to track individual deposits, and a host of property tests\nto make sure that the logic is correct.\nThe current implementation uses more memory than it needs to, and we will address that next,\nwith our hope being to only use one word (8 bytes) per registered stake credential.\nThere is a fair amount of other cleanup needed for general maintainability."),(0,n.kt)("p",null,"See"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/pull/3127"},"pull-3127")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/pull/3195"},"pull-3195")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/pull/3202"},"pull-3202"))),(0,n.kt)("h4",{id:"removing-pointer-addresses"},"Removing pointer addresses"),(0,n.kt)("p",null,"Pointer addresses, which have never seen any real use\n(there are something like eleven on mainnet), are being deprecated starting at Cardano major\nversion 9.\n",(0,n.kt)("a",{parentName:"p",href:"https://github.com/cardano-foundation/CIPs/pull/374"},"CPS-0002")," gives the context.\nWe are disabling them by first preventing transaction outputs containing them\nfrom being serialized by the node at the moment we switch to version 9.\nAt the hard fork after that, we will translate the existing few pointer addresses\nto enterprise addresses."),(0,n.kt)("p",null,"See"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/pull/3174"},"pull-3174"))),(0,n.kt)("h4",{id:"technical-debt"},"Technical debt"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/pull/3162"},"pull-3162")," - Sometimes we have to put safeguards in place for hard forks which may never\nbe exercised. After we have passed the given hardfork, we are able to clean up the code\nand simplify our logic. We removed all of the ones that we are currently easily able to."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/pull/3165"},"pull-3165")," - We improved the type safety of our code while also discovering and fixing\na serialization bug."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/pull/3172"},"pull-3172")," - We removed dead code."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/pull/3175"},"pull-3175")," - The Allegra and the Mary code used to be coupled in a particular way the we grew to\ndislike. We made these two ledger eras now uniform with the rest of our code base."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/pull/3184"},"pull-3184")," - We organized our property testing code."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/pull/3200"},"pull-3200")," - The Plutus tools teams fixed an outstanding bug in the translation from the\nledger state to the Plutus script context.")))}c.isMDXComponent=!0}}]);