"use strict";(self.webpackChunkcardano_updates=self.webpackChunkcardano_updates||[]).push([[55855],{3905:(e,t,r)=>{r.d(t,{Zo:()=>s,kt:()=>m});var a=r(67294);function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},l=Object.keys(e);for(a=0;a<l.length;a++)r=l[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)r=l[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var p=a.createContext({}),u=function(e){var t=a.useContext(p),r=t;return e&&(r="function"==typeof e?e(t):o(o({},t),e)),r},s=function(e){var t=u(e.components);return a.createElement(p.Provider,{value:t},e.children)},h="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var r=e.components,n=e.mdxType,l=e.originalType,p=e.parentName,s=i(e,["components","mdxType","originalType","parentName"]),h=u(r),d=n,m=h["".concat(p,".").concat(d)]||h[d]||c[d]||l;return r?a.createElement(m,o(o({ref:t},s),{},{components:r})):a.createElement(m,o({ref:t},s))}));function m(e,t){var r=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var l=r.length,o=new Array(l);o[0]=d;var i={};for(var p in t)hasOwnProperty.call(t,p)&&(i[p]=t[p]);i.originalType=e,i[h]="string"==typeof e?e:n,o[1]=i;for(var u=2;u<l;u++)o[u]=r[u];return a.createElement.apply(null,o)}return a.createElement.apply(null,r)}d.displayName="MDXCreateElement"},29632:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>p,contentTitle:()=>o,default:()=>c,frontMatter:()=>l,metadata:()=>i,toc:()=>u});var a=r(87462),n=(r(67294),r(3905));const l={title:"Ledger Team Update",slug:"2023-02-17-ledger",authors:"JaredCorduan",tags:["ledger"],hide_table_of_contents:!1},o=void 0,i={permalink:"/2023-02-17-ledger",editUrl:"https://github.com/intersectmbo/cardano-updates/tree/main/blog/2023-02-17-ledger.md",source:"@site/blog/2023-02-17-ledger.md",title:"Ledger Team Update",description:"High level summary",date:"2023-02-17T00:00:00.000Z",formattedDate:"February 17, 2023",tags:[{label:"ledger",permalink:"/tags/ledger"}],readingTime:2.33,hasTruncateMarker:!1,authors:[{name:"Jared Corduan",title:"Ledger Team Lead",url:"https://github.com/JaredCorduan",imageURL:"https://github.com/JaredCorduan.png",key:"JaredCorduan"}],frontMatter:{title:"Ledger Team Update",slug:"2023-02-17-ledger",authors:"JaredCorduan",tags:["ledger"],hide_table_of_contents:!1},prevItem:{title:"Hydra Team Update",permalink:"/2023-02-17-hydra"},nextItem:{title:"Network Team Update",permalink:"/2023-02-17-network"}},p={authorsImageUrls:[void 0]},u=[{value:"High level summary",id:"high-level-summary",level:2},{value:"Lower level summary",id:"lower-level-summary",level:2},{value:"Integration work",id:"integration-work",level:3},{value:"Technical debt",id:"technical-debt",level:3},{value:"Small documentation improvements",id:"small-documentation-improvements",level:3},{value:"Specifying CIP-1694",id:"specifying-cip-1694",level:3},{value:"Constraint based testing",id:"constraint-based-testing",level:3}],s={toc:u},h="wrapper";function c(e){let{components:t,...r}=e;return(0,n.kt)(h,(0,a.Z)({},s,r,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h2",{id:"high-level-summary"},"High level summary"),(0,n.kt)("p",null,"This past two weeks saw many months worth of ledger changes integrated with the ",(0,n.kt)("inlineCode",{parentName:"p"},"cardano-base"),"\nand ",(0,n.kt)("inlineCode",{parentName:"p"},"ouroboros-network")," repositories.\nThe vast majority of the effort involved all the changes to the ledger serialization libraries\n(and the interplay with ",(0,n.kt)("inlineCode",{parentName:"p"},"cardano-base"),") which now support proper versioning.\nSupporting the conway ledger era, and in particular allowing the ledger state to transition\nto a whole new system of governance, also played a noticeable part in the integration."),(0,n.kt)("p",null,"Besides the integration work, the team continues to address technical debt, improve the\ndocumentation, make our testing infrastructure better (such as experimenting with better\nnightly tests), and formally specifying more parts of CIP-1694."),(0,n.kt)("h2",{id:"lower-level-summary"},"Lower level summary"),(0,n.kt)("h3",{id:"integration-work"},"Integration work"),(0,n.kt)("p",null,"Below is all the integration work completed, which will enable a release to node from\nthe current ledger master. Many thanks to\n",(0,n.kt)("a",{parentName:"p",href:"https://github.com/lehins"},"Alexey")," for this colossal undertaking!"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/pull/3303"},"pull-3303")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/pull/3302"},"pull-3302")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/pull/3300"},"pull-3300")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/pull/3299"},"pull-3299")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/pull/3298"},"pull-3298")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/pull/3297"},"pull-3297")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/pull/3292"},"pull-3292")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/pull/3289"},"pull-3289")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/pull/3288"},"pull-3288")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/pull/3279"},"pull-3279")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/pull/3282"},"pull-3282")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/ouroboros-network/pull/4349"},"pull-4349"))),(0,n.kt)("h3",{id:"technical-debt"},"Technical debt"),(0,n.kt)("p",null,"Starting in major protocol version 9, zero-valued multi-assets will no longer be permitted\nin the CBOR specification. See ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/input-output-hk/cardano-ledger/pull/3241"},"pull-3241"),"."),(0,n.kt)("p",null,"We now have our ",(0,n.kt)("inlineCode",{parentName:"p"},".cabal")," files being checked for a consistent formatting given by\n",(0,n.kt)("inlineCode",{parentName:"p"},"cabal format")," in our CI. See ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/input-output-hk/cardano-ledger/pull/3286"},"pull-3286"),"."),(0,n.kt)("p",null,"We are still experimenting with better nightly tests for our long running\nproperty based tests. See ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/input-output-hk/cardano-ledger/pull/3276"},"pull-3276")," and ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/input-output-hk/cardano-ledger/pull/3296"},"pull-3296"),"."),(0,n.kt)("h3",{id:"small-documentation-improvements"},"Small documentation improvements"),(0,n.kt)("p",null,"The hand proofs of the preservation ADA property have been added back to the\nShelley ledger specification. See ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/input-output-hk/cardano-ledger/pull/3295"},"pull-3295"),"."),(0,n.kt)("p",null,"We have clarified how the script integrity hash is computed in the CDDL description.\nSee ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/input-output-hk/cardano-ledger/pull/3290"},"pull-3290"),"."),(0,n.kt)("h3",{id:"specifying-cip-1694"},"Specifying CIP-1694"),(0,n.kt)("p",null,"Our new formal specifications backed by Agda have seen a lot of progress!\nUpgrading to Agda 2.6.3 fixed our main build infrastructure problems,\nand we no longer have to rely on our custom fork. See ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/input-output-hk/formal-ledger-specifications/pull/50"},"pull-50"),"."),(0,n.kt)("p",null,"Our progress on formally specifying CIP-1694 can be followed here:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"in Agda: ",(0,n.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/formal-ledger-specifications/pull/40"},"pull-40")),(0,n.kt)("li",{parentName:"ul"},"the corresponding Haskell: ",(0,n.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-ledger/pull/3291"},"pull-3291"))),(0,n.kt)("h3",{id:"constraint-based-testing"},"Constraint based testing"),(0,n.kt)("p",null,"We are still actively working on our new constraint based property testing framework.\nWe have nearly all of the constraints for an entire ledger state\nhooked into generators, and tests that the generators do indeed obey the constraints.\nThe variable count in the constraints is over 100!\nThere is still much work to do on shrinking, making the generators faster,\nand writing actual property tests for the ledger, but the approach still seems viable and\nwe are hopeful that it could replace our trace generators.\nThe WIP can be followed here: ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/input-output-hk/cardano-ledger/pull/3219"},"pull-3219"),"."))}c.isMDXComponent=!0}}]);