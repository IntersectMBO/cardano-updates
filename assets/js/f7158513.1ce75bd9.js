"use strict";(self.webpackChunkcardano_updates=self.webpackChunkcardano_updates||[]).push([[91848],{3905:(e,t,a)=>{a.d(t,{Zo:()=>s,kt:()=>k});var n=a(67294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var p=n.createContext({}),d=function(e){var t=n.useContext(p),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},s=function(e){var t=d(e.components);return n.createElement(p.Provider,{value:t},e.children)},u="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},c=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,i=e.originalType,p=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),u=d(a),c=r,k=u["".concat(p,".").concat(c)]||u[c]||m[c]||i;return a?n.createElement(k,o(o({ref:t},s),{},{components:a})):n.createElement(k,o({ref:t},s))}));function k(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=a.length,o=new Array(i);o[0]=c;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l[u]="string"==typeof e?e:r,o[1]=l;for(var d=2;d<i;d++)o[d]=a[d];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}c.displayName="MDXCreateElement"},89705:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>p,contentTitle:()=>o,default:()=>m,frontMatter:()=>i,metadata:()=>l,toc:()=>d});var n=a(87462),r=(a(67294),a(3905));const i={title:"SRE Team Update",slug:"2024-07-25-sre",authors:"manveru",tags:["sre"],hide_table_of_contents:!1},o=void 0,l={permalink:"/2024-07-25-sre",editUrl:"https://github.com/intersectmbo/cardano-updates/tree/main/blog/2024-07-25-sre.md",source:"@site/blog/2024-07-25-sre.md",title:"SRE Team Update",description:"High level summary",date:"2024-07-25T00:00:00.000Z",formattedDate:"July 25, 2024",tags:[{label:"sre",permalink:"/tags/sre"}],readingTime:3.505,hasTruncateMarker:!1,authors:[{name:"Michael Fellinger",title:"SRE Team Lead",url:"https://github.com/manveru",imageURL:"https://github.com/manveru.png",key:"manveru"}],frontMatter:{title:"SRE Team Update",slug:"2024-07-25-sre",authors:"manveru",tags:["sre"],hide_table_of_contents:!1},prevItem:{title:"Mithril Team Update",permalink:"/2024-07-31-mithril"},nextItem:{title:"Hydra Team Update",permalink:"/2024-07-24-hydra"}},p={authorsImageUrls:[void 0]},d=[{value:"High level summary",id:"high-level-summary",level:2},{value:"Cardano Airgap",id:"cardano-airgap",level:3},{value:"Cardano Parts",id:"cardano-parts",level:3},{value:"Cardano Playground",id:"cardano-playground",level:3},{value:"Cardano Mainnet",id:"cardano-mainnet",level:3},{value:"Cardano Monitoring",id:"cardano-monitoring",level:3},{value:"IOHK Nix",id:"iohk-nix",level:3},{value:"Cardano Ops",id:"cardano-ops",level:3},{value:"CAPkgs",id:"capkgs",level:3}],s={toc:d},u="wrapper";function m(e){let{components:t,...a}=e;return(0,r.kt)(u,(0,n.Z)({},s,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"high-level-summary"},"High level summary"),(0,r.kt)("p",null,"The SRE team continues work on cardano environment improvements and general maintenance."),(0,r.kt)("p",null,"Some notable recent changes, updates or improvements include:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Our new baseline version of Cardano Node is ",(0,r.kt)("inlineCode",{parentName:"p"},"9.1.0")," and all environments have been updated.\nThe main change from node ",(0,r.kt)("inlineCode",{parentName:"p"},"9.0.0")," is that node ",(0,r.kt)("inlineCode",{parentName:"p"},"9.1.0")," requires a Conway genesis file at startup, where the genesis file was optional in node ",(0,r.kt)("inlineCode",{parentName:"p"},"9.0.0"),".")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Sanchonet had another respin for node ",(0,r.kt)("inlineCode",{parentName:"p"},"9.0.0")," with new Conway genesis parameters and has since been upgraded to node ",(0,r.kt)("inlineCode",{parentName:"p"},"9.1.0"),".")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"The ",(0,r.kt)("inlineCode",{parentName:"p"},"cardano-monitoring")," cluster received a lot of documentation and improvements and now also serves as the home for ",(0,r.kt)("inlineCode",{parentName:"p"},"devx-ci")," metrics.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Hydra CI performance was improved once again by changes to our custom Nix evaluator.\nWe also found further ways to improve the resource usage of waiting for IFDs."))),(0,r.kt)("h3",{id:"cardano-airgap"},"Cardano Airgap"),(0,r.kt)("p",null,"A new project that provides a completely airgapped environment for constitution members to sign proposals and transactions.\nIt consists of an image for USB sticks and ensures all private data is stored securely with strong encryption."),(0,r.kt)("p",null,"We'll keep it updated as required with the latest Cardano versions."),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://github.com/Intersectmbo/cardano-airgap"},"cardano-airgap")),(0,r.kt)("h3",{id:"cardano-parts"},"Cardano Parts"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"cardano-node and cardano-node-ng are now at version ",(0,r.kt)("inlineCode",{parentName:"li"},"9.0.0")),(0,r.kt)("li",{parentName:"ul"},"cardano-db-sync and cardano-db-sync-ng are now at version ",(0,r.kt)("inlineCode",{parentName:"li"},"13.3.0.0")),(0,r.kt)("li",{parentName:"ul"},"Several NixOS modules and recipes have been fixed and improved."),(0,r.kt)("li",{parentName:"ul"},"Bump dependency of ",(0,r.kt)("inlineCode",{parentName:"li"},"capkgs")," for node, db-sync, mithril, and cardano-wallet updates."),(0,r.kt)("li",{parentName:"ul"},"Update profile-cardano-db-sync-snapshots for schema 13.3 docs and with script edge case fixes"),(0,r.kt)("li",{parentName:"ul"},"Update profile-cardano-node-group to use a SIGINT instead of SIGTERM for systemd stop"),(0,r.kt)("li",{parentName:"ul"},"Update profile-common to deploy ",(0,r.kt)("inlineCode",{parentName:"li"},"atd")," service"),(0,r.kt)("li",{parentName:"ul"},"Update template recipe ",(0,r.kt)("inlineCode",{parentName:"li"},"dbsync-prep")," to match faucet script defaults"),(0,r.kt)("li",{parentName:"ul"},"Update template recipe ",(0,r.kt)("inlineCode",{parentName:"li"},"update-ips")," to fix a nushell breaking change"),(0,r.kt)("li",{parentName:"ul"},"Update ",(0,r.kt)("inlineCode",{parentName:"li"},".envrc")," with a newer direnv version and allows for symlinks on ",(0,r.kt)("inlineCode",{parentName:"li"},".envrc.local")," and ",(0,r.kt)("inlineCode",{parentName:"li"},"~/.age/credentials"))),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://github.com/input-output-hk/cardano-parts/pull/44"},"PR#44")),(0,r.kt)("h3",{id:"cardano-playground"},"Cardano Playground"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"All networks are now running cardano-node ",(0,r.kt)("inlineCode",{parentName:"li"},"9.1.0")," in preparation of the Chang hard-fork."),(0,r.kt)("li",{parentName:"ul"},"Also upgraded db-sync to ",(0,r.kt)("inlineCode",{parentName:"li"},"13.3.0.0")),(0,r.kt)("li",{parentName:"ul"},"Added the ",(0,r.kt)("inlineCode",{parentName:"li"},"cardano-ipfs")," module and a derivation for ",(0,r.kt)("inlineCode",{parentName:"li"},"pinata-go-cli")," that is used to store and distribute documents that can be referenced on chain."),(0,r.kt)("li",{parentName:"ul"},"Some updates to the ",(0,r.kt)("a",{parentName:"li",href:"https://book.play.dev.cardano.org/"},"Cardano Operations Book")," about:",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"UseLedgerPeerAfter updates"),(0,r.kt)("li",{parentName:"ul"},"Sanchonet respins configs"),(0,r.kt)("li",{parentName:"ul"},"Dbsync ",(0,r.kt)("inlineCode",{parentName:"li"},"EnableFutureGenesis")," flag"))),(0,r.kt)("li",{parentName:"ul"},"Add a block header block producer readiness test"),(0,r.kt)("li",{parentName:"ul"},"Respin of sanchonet for node ",(0,r.kt)("inlineCode",{parentName:"li"},"9.0.0"),", then upgraded to ",(0,r.kt)("inlineCode",{parentName:"li"},"9.1.0")),(0,r.kt)("li",{parentName:"ul"},"Tune webserver size and Varnish RAM to improve caching efficiency"),(0,r.kt)("li",{parentName:"ul"},"Updates ",(0,r.kt)("inlineCode",{parentName:"li"},"govtool")," module for multi-nginx module compatibility"),(0,r.kt)("li",{parentName:"ul"},"Updates ",(0,r.kt)("inlineCode",{parentName:"li"},"update-ips")," recipe for nushell breaking change in nixpkgs 24.05"),(0,r.kt)("li",{parentName:"ul"},"Updates ",(0,r.kt)("inlineCode",{parentName:"li"},"direnv")," version, allow symlinks config files used by ",(0,r.kt)("inlineCode",{parentName:"li"},"direnv")),(0,r.kt)("li",{parentName:"ul"},"Update ",(0,r.kt)("inlineCode",{parentName:"li"},".envrc")," with a newer direnv version, allow symlinks on direnv used config files")),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://github.com/input-output-hk/cardano-playground/pull/28"},"PR#28")),(0,r.kt)("h3",{id:"cardano-mainnet"},"Cardano Mainnet"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Upgraded Cardano Node to ",(0,r.kt)("inlineCode",{parentName:"li"},"9.0.0")),(0,r.kt)("li",{parentName:"ul"},"Upgraded Cardano DB Sync to ",(0,r.kt)("inlineCode",{parentName:"li"},"13.3.0.0")),(0,r.kt)("li",{parentName:"ul"},"Bump ",(0,r.kt)("inlineCode",{parentName:"li"},"capkgs")," dependency"),(0,r.kt)("li",{parentName:"ul"},"Investigate bootstrap missingBlock error and deploy fixes for it."),(0,r.kt)("li",{parentName:"ul"},"Update scripts to be compatible with latest ",(0,r.kt)("inlineCode",{parentName:"li"},"nushell")," version")),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://github.com/input-output-hk/cardano-mainnet/pull/17"},"PR#17")),(0,r.kt)("h3",{id:"cardano-monitoring"},"Cardano Monitoring"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Write comprehensive documentation for all the Nix code, as well as detailed instructions for usage and deployment."),(0,r.kt)("li",{parentName:"ul"},"Overhaul most Just tasks to bring them more in sync with the other repositories"),(0,r.kt)("li",{parentName:"ul"},"Upgrade all machines to NixOS 24.05"),(0,r.kt)("li",{parentName:"ul"},"Upgrade ",(0,r.kt)("inlineCode",{parentName:"li"},"auth-keys-hub")," to prevent lockout in case ",(0,r.kt)("inlineCode",{parentName:"li"},"SOPS")," is unable to decrypt"),(0,r.kt)("li",{parentName:"ul"},"Fix ",(0,r.kt)("inlineCode",{parentName:"li"},"SOPS")," decryption failure on boot because of missing network."),(0,r.kt)("li",{parentName:"ul"},"Limit bootloader entries to 5 since the ",(0,r.kt)("inlineCode",{parentName:"li"},"/boot")," partition is tiny"),(0,r.kt)("li",{parentName:"ul"},"Additionally add fallback SSH keys for emergency use")),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://github.com/input-output-hk/cardano-monitoring/pull/1"},"PR#1")),(0,r.kt)("h3",{id:"iohk-nix"},"IOHK Nix"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Update ledger peers to be after a more recent epoch boundary to improve bootstrapping and fix a private chain p2p delayed sync config issue."),(0,r.kt)("li",{parentName:"ul"},"Update sanchonet conway-genesis for respin",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"DRep voting thresholds both need to be 65%"),(0,r.kt)("li",{parentName:"ul"},"Set ",(0,r.kt)("inlineCode",{parentName:"li"},"govActionLifetime")," above the guardrail because of the short epochs."),(0,r.kt)("li",{parentName:"ul"},"Set ",(0,r.kt)("inlineCode",{parentName:"li"},"minCommitteeSize")," to 5 (from recommended 7) because only 5 ICC members were able to provide keys for the respin.")))),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://github.com/input-output-hk/iohk-nix/pull/584"},"PR#584"),"\n",(0,r.kt)("a",{parentName:"p",href:"https://github.com/input-output-hk/iohk-nix/pull/585"},"PR#585")),(0,r.kt)("h3",{id:"cardano-ops"},"Cardano Ops"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"tweak the stop timeout and change Cardano Node killsignal to ",(0,r.kt)("inlineCode",{parentName:"li"},"SIGINT")," for clean restarts.")),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://github.com/input-output-hk/cardano-ops/compare/7dd0502...07a4721"},"Diff")),(0,r.kt)("h3",{id:"capkgs"},"CAPkgs"),(0,r.kt)("p",null,"Added following packages:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"cardano-node ",(0,r.kt)("inlineCode",{parentName:"li"},"9.0.0")," and ",(0,r.kt)("inlineCode",{parentName:"li"},"9.1.0")),(0,r.kt)("li",{parentName:"ul"},"For cardano-db-sync releases of ",(0,r.kt)("inlineCode",{parentName:"li"},"sancho-5.1.0")," and ",(0,r.kt)("inlineCode",{parentName:"li"},"13.3.0.0")),(0,r.kt)("li",{parentName:"ul"},"For mithril ",(0,r.kt)("inlineCode",{parentName:"li"},"2428.0")," and ",(0,r.kt)("inlineCode",{parentName:"li"},"mithril-unstable")),(0,r.kt)("li",{parentName:"ul"},"For cardano-wallet ",(0,r.kt)("inlineCode",{parentName:"li"},"v2024-07-19"))))}m.isMDXComponent=!0}}]);