"use strict";(self.webpackChunkcardano_updates=self.webpackChunkcardano_updates||[]).push([[31446],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>h});var a=n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=a.createContext({}),c=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=c(e.components);return a.createElement(s.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,r=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),u=c(n),m=o,h=u["".concat(s,".").concat(m)]||u[m]||d[m]||r;return n?a.createElement(h,i(i({ref:t},p),{},{components:n})):a.createElement(h,i({ref:t},p))}));function h(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=n.length,i=new Array(r);i[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[u]="string"==typeof e?e:o,i[1]=l;for(var c=2;c<r;c++)i[c]=n[c];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},70559:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>d,frontMatter:()=>r,metadata:()=>l,toc:()=>c});var a=n(87462),o=(n(67294),n(3905));const r={title:"Benchmarking -- Node 10.1.1",slug:"2024-10-performance-10.1.1",authors:"mgmeier",tags:["benchmarking-reports"],hide_table_of_contents:!1},i=void 0,l={permalink:"/reports/2024-10-performance-10.1.1",editUrl:"https://github.com/intersectmbo/cardano-updates/tree/main/reports/2024-10-performance-10.1.1.md",source:"@site/reports/2024-10-performance-10.1.1.md",title:"Benchmarking -- Node 10.1.1",description:"Setup",date:"2024-10-31T11:03:27.000Z",formattedDate:"October 31, 2024",tags:[{label:"benchmarking-reports",permalink:"/reports/tags/benchmarking-reports"}],readingTime:3.925,hasTruncateMarker:!1,authors:[{name:"Michael Karg",title:"Performance and Tracing Team Lead",url:"https://github.com/mgmeier",imageURL:"https://github.com/mgmeier.png",key:"mgmeier"}],frontMatter:{title:"Benchmarking -- Node 10.1.1",slug:"2024-10-performance-10.1.1",authors:"mgmeier",tags:["benchmarking-reports"],hide_table_of_contents:!1},prevItem:{title:"Benchmarking -- Node 10.1.4",permalink:"/reports/2025-01-performance-10.1.4"},nextItem:{title:"Benchmarking -- Node 8.9.0",permalink:"/reports/2024-03-performance-8.9.0"}},s={authorsImageUrls:[void 0]},c=[{value:"Setup",id:"setup",level:2},{value:"Observations",id:"observations",level:2},{value:"Resource Usage",id:"resource-usage",level:3},{value:"Forging Loop",id:"forging-loop",level:3},{value:"Peer propagation",id:"peer-propagation",level:3},{value:"End-to-end propagation",id:"end-to-end-propagation",level:3},{value:"Conclusion",id:"conclusion",level:3},{value:"Contact",id:"contact",level:2},{value:"Attachments",id:"attachments",level:2}],p={toc:c},u="wrapper";function d(e){let{components:t,...r}=e;return(0,o.kt)(u,(0,a.Z)({},p,r,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h2",{id:"setup"},"Setup"),(0,o.kt)("p",null,"As part of the release benchmarking cycle, we're comparing benchmarking runs for 2 different versions of ",(0,o.kt)("inlineCode",{parentName:"p"},"cardano-node"),":"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"9.2.0")," - baseline from a previous mainnet release"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"10.1.1")," - the current mainnet release")),(0,o.kt)("p",null,"For this benchmark, we're gathering various metrics under 3 different workloads:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("em",{parentName:"li"},"value-only"),": Each transaction consumes 2 inputs and creates 2 outputs, changing the UTxO set. This workload produces full blocks (> 80kB) exclusively."),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("em",{parentName:"li"},"Plutus"),": Each transaction contains a Plutus script exhausting the per-tx execution budget. This workload produces small blocks (< 3kB) exclusively."),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("em",{parentName:"li"},"value+voting"),": On top of above value workload, this one has DReps vote on and ratify governance actions - forcing additional computation for vote tallying and proposal enactment.")),(0,o.kt)("p",null,"Benchmarking is performed on a cluster of 52 block producing nodes spread across 3 different AWS regions, interconnected using a static, restricted topology. All runs\nwere performed in the Conway era."),(0,o.kt)("h2",{id:"observations"},"Observations"),(0,o.kt)("p",null,"These benchmarks are about evaluating specific corner cases in a constrained environment that allows for reliable reproduction of results; they're not trying to directly recreate the operational conditions on Mainnet.  "),(0,o.kt)("h3",{id:"resource-usage"},"Resource Usage"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("inlineCode",{parentName:"li"},"10.1.1")," shows an improvement of 4% (8% under Plutus workload) in Process CPU usage."),(0,o.kt)("li",{parentName:"ol"},"Allocation Rate improves by 8% (11% under Plutus workload), while Heap Size remains unchanged."),(0,o.kt)("li",{parentName:"ol"},"CPU 85% spans decrease by 18% (5% under Plutus workload)."),(0,o.kt)("li",{parentName:"ol"},"Compared to value-only workload, ongoing voting leads to a slight increase of 5% in Process CPU usage.")),(0,o.kt)("p",null,"Caveat: Individual metrics can't be evaluated in isolate; the resource usage profile as a whole provides insight into the system's performance and responsiveness."),(0,o.kt)("h3",{id:"forging-loop"},"Forging Loop"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Under Plutus workload, ",(0,o.kt)("inlineCode",{parentName:"li"},"10.1.1")," exhibits a formidable speedup of 70ms in the forging loop - due to mempool snapshots being produced much more quickly."),(0,o.kt)("li",{parentName:"ol"},"Under value workload, there are no significant changes to forger metrics."),(0,o.kt)("li",{parentName:"ol"},"With voting added on top of the value workload, we can observe mempool snapshots and adoption time on the block producer rise by 10ms each.")),(0,o.kt)("p",null,"The metric ",(0,o.kt)("em",{parentName:"p"},"'Slot start to announced'")," (see in attachments) is cumulative, and demonstrates how far into a slot the block producing node first announces the new header."),(0,o.kt)("h3",{id:"peer-propagation"},"Peer propagation"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Block Fetch duration increases slightly by 16ms (or 5%) under value workload."),(0,o.kt)("li",{parentName:"ol"},"Under Plutus workload, there are no significant changes to peer-related metrics."),(0,o.kt)("li",{parentName:"ol"},"With the additional voting workload, peer adoption times rise by 12ms on average - confirming the observation for adoption time on the block producer.")),(0,o.kt)("h3",{id:"end-to-end-propagation"},"End-to-end propagation"),(0,o.kt)("p",null,"This metric encompasses block diffusion and adoption across specific percentages of the benchmarking cluster, with 0.80 adoption meaning adoption on 80% of all cluster nodes.  "),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("inlineCode",{parentName:"li"},"10.1.1")," exhibits a slight increase of 2% - 3% in cluster adoption times under value workload."),(0,o.kt)("li",{parentName:"ol"},"Under Plutus workload however, we observe significant improvement of 18% up to the 50th centile, and 9% - 13% in the 80th centile and above."),(0,o.kt)("li",{parentName:"ol"},"While the former is due to slightly increased Block Fetch duration, the latter is the consequence of much quicker mempool snapshots involving Plutus transactions."),(0,o.kt)("li",{parentName:"ol"},"Submitting the additional voting workload, we can observe a consistent 4% - 6% increase in cluster adoption times across all centiles.")),(0,o.kt)("h3",{id:"conclusion"},"Conclusion"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"We do not detect any perfomance regression in ",(0,o.kt)("inlineCode",{parentName:"li"},"10.1.1")," compared to ",(0,o.kt)("inlineCode",{parentName:"li"},"9.2.0"),"."),(0,o.kt)("li",{parentName:"ul"},"To the contrary - ",(0,o.kt)("inlineCode",{parentName:"li"},"10.1.1")," is lighter on the Node process resource usage overall."),(0,o.kt)("li",{parentName:"ul"},"Improved forging and diffusion timings can be expected for blocks heavy on Plutus transactions."),(0,o.kt)("li",{parentName:"ul"},"Stressing the governance / voting capabalities of the Conway ledger lets us ascertain an (expected) performance cost of voting."),(0,o.kt)("li",{parentName:"ul"},"This cost has demonstrated to be reasonable, and to not contain lurking perfomance risks to the system."),(0,o.kt)("li",{parentName:"ul"},"It is expected to manifest only during periods of heavy vote tallying / proposal enactment, slightly affecting block adoption times.")),(0,o.kt)("p",null,"NB. The same amount of DReps are registered for each workload. However, only under ",(0,o.kt)("em",{parentName:"p"},"value+voting")," do they become active by submitting votes. This requires an increased UTxO set size, so it uses\na baseline seperate from ",(0,o.kt)("em",{parentName:"p"},"value-only"),", resulting in slightly different absolute values.  "),(0,o.kt)("h2",{id:"contact"},"Contact"),(0,o.kt)("p",null,"As for publishing such benchmarking results, we are aware that more context and detail may be needed with regard to specfic metrics or benchmarking methodology. "),(0,o.kt)("p",null,"We are still looking to gather questions, both general and specific, so that we can provide a suitable FAQ and possibly improve presentation in the future."),(0,o.kt)("h2",{id:"attachments"},"Attachments"),(0,o.kt)("p",null,"Full report for ",(0,o.kt)("em",{parentName:"p"},"value-only workload"),", PDF downloadable ",(0,o.kt)("a",{target:"_blank",href:n(88261).Z},"here"),"."),(0,o.kt)("p",null,"Full report for ",(0,o.kt)("em",{parentName:"p"},"Plutus workload"),", PDF downloadable ",(0,o.kt)("a",{target:"_blank",href:n(69137).Z},"here"),".  "),(0,o.kt)("p",null,"Full report for ",(0,o.kt)("em",{parentName:"p"},"value+voting workload"),", PDF downloadable ",(0,o.kt)("a",{target:"_blank",href:n(38586).Z},"here"),".  "),(0,o.kt)("p",null,"NB. The release benchmarks for ",(0,o.kt)("inlineCode",{parentName:"p"},"10.1.1")," were performed on tag ",(0,o.kt)("inlineCode",{parentName:"p"},"10.0.0-pre"),". The minor version bump did not include changes relevant to performance; thus, measurements taken on ",(0,o.kt)("inlineCode",{parentName:"p"},"10.0.0-pre")," remain valid."))}d.isMDXComponent=!0},69137:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/files/release-10.1.1.plutus-93a0ea846deddadcf6fa48be2df28f24.pdf"},88261:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/files/release-10.1.1.value-only-0de4dbcc83d1c8caa8aa01fc857bf5ec.pdf"},38586:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/files/release-10.1.1.voting-01ee31495edecaf8c36b79c94247919a.pdf"}}]);