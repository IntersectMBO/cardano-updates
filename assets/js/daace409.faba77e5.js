"use strict";(self.webpackChunkcardano_updates=self.webpackChunkcardano_updates||[]).push([[89008],{23947:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>l,contentTitle:()=>u,default:()=>d,frontMatter:()=>r,metadata:()=>s,toc:()=>p});var n=o(87462),i=(o(67294),o(3905)),a=o(22004);const r={title:"Network Team Update",slug:"2022-09-27-network",authors:"coot",tags:["network"],hide_table_of_contents:!1},u=void 0,s={permalink:"/2022-09-27-network",editUrl:"https://github.com/intersectmbo/cardano-updates/tree/main/blog/2022-09-27-network.md",source:"@site/blog/2022-09-27-network.md",title:"Network Team Update",description:"Network Update",date:"2022-09-27T00:00:00.000Z",formattedDate:"September 27, 2022",tags:[{label:"network",permalink:"/tags/network"}],readingTime:2.24,hasTruncateMarker:!1,authors:[{name:"Marcin Szamotulski",title:"Network Team Lead",url:"https://github.com/coot",imageURL:"https://github.com/coot.png",key:"coot"}],frontMatter:{title:"Network Team Update",slug:"2022-09-27-network",authors:"coot",tags:["network"],hide_table_of_contents:!1},prevItem:{title:"Ledger Team Update",permalink:"/2022-09-30-ledger"},nextItem:{title:"Consensus Team Update",permalink:"/2022-09-20-consensus"}},l={authorsImageUrls:[void 0]},p=[{value:"Network Update",id:"network-update",level:2},{value:"Ouroboros Network",id:"ouroboros-network",level:3},{value:"Ouroboros Consensus",id:"ouroboros-consensus",level:3},{value:"Some older items, which were not announced",id:"some-older-items-which-were-not-announced",level:4},{value:"Cardano Node",id:"cardano-node",level:3},{value:"IO-Sim",id:"io-sim",level:3},{value:"Typed Protocols",id:"typed-protocols",level:3},{value:"Input Endorsers Simulation",id:"input-endorsers-simulation",level:3}],k={toc:p},h="wrapper";function d(e){let{components:t,...o}=e;return(0,i.kt)(h,(0,n.Z)({},k,o,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h2",{id:"network-update"},"Network Update"),(0,i.kt)("h3",{id:"ouroboros-network"},"Ouroboros Network"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"We finished high and low level ",(0,i.kt)("em",{parentName:"li"},"peer sharing")," design. See\n",(0,i.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/ouroboros-network/wiki/Peer-Sharing-Implementation-Plan"},"Peer Sharing Implementation Plan")),(0,i.kt)("li",{parentName:"ul"},"We started working on low-level design of ",(0,i.kt)("em",{parentName:"li"},"eclipse evasion")," (work in\nprogress)."),(0,i.kt)("li",{parentName:"ul"},"We decided to use ",(0,i.kt)("strong",{parentName:"li"},"peer sharing")," instead of overloaded and ambiguous ",(0,i.kt)("em",{parentName:"li"},"gossip")," term.\n",(0,i.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/ouroboros-network/pull/3980"},"PR input-output-hk/ouroboros-network#3980")),(0,i.kt)("li",{parentName:"ul"},"We fixed technical dept\n",(0,i.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/ouroboros-network/issues/3905"},"issue input-output-hk/cardano-node#3905")," in\nthe simulation testing of diffusion\n",(0,i.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/ouroboros-network/pull/4004"},"PR input-output-hk/cardano-node#4004")),(0,i.kt)("li",{parentName:"ul"},"We deployed all our nodes using our new nix based deployment architecture.\nWhen deploying we found an issue in the\n",(0,i.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-node/issues/3752"},(0,i.kt)("inlineCode",{parentName:"a"},"RTView")),".")),(0,i.kt)("h3",{id:"ouroboros-consensus"},"Ouroboros Consensus"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Recently we found out that the consensus does not log exceptions thrown during\nintiialisation.  This was fixed in\n",(0,i.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/ouroboros-network/pull/4015"},"PR input-output-hk/ouroboros-network#4015"),"\nAs part of this pull request we also changed that all exceptions rethrown by\nthe connection handler thread are wrapped in ",(0,i.kt)("inlineCode",{parentName:"li"},"ExceptionInHandler"),".")),(0,i.kt)("h4",{id:"some-older-items-which-were-not-announced"},"Some older items, which were not announced"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"We identified and fixed an issue related to socket activation (socket options\nwhere not set for sockets passed through socket activation).\n",(0,i.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/ouroboros-network/pull/3979"},"PR input-output-hk/cardano-node#3979"),"\nThis fix will be released in the next ",(0,i.kt)("inlineCode",{parentName:"li"},"cardano-node")," release.")),(0,i.kt)("h3",{id:"cardano-node"},"Cardano Node"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"We extended the NixOs service module so that one can modify ",(0,i.kt)("inlineCode",{parentName:"li"},"socketPath"),",\n",(0,i.kt)("inlineCode",{parentName:"li"},"runtimeDir"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"databasePath"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"traceSocketPathAccept"),",\n",(0,i.kt)("inlineCode",{parentName:"li"},"traceSocketPathConnect")," and ",(0,i.kt)("inlineCode",{parentName:"li"},"stateDir")," options.\n",(0,i.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/cardano-node/pull/4196"},"PR input-output-hk/cardano-node#4196"))),(0,i.kt)("h3",{id:"io-sim"},"IO-Sim"),(0,i.kt)("p",null,"We resolved a number of issues before release of ",(0,i.kt)("inlineCode",{parentName:"p"},"io-sim")," on hackage:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/ouroboros-network/issues/2797"},"issue input-output-hk/ouroboros-network#2797")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/ouroboros-network/issues/2650"},"issue input-output-hk/ouroboros-network#2650")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/ouroboros-network/issues/3436"},"issue input-output-hk/ouroboros-network#3436")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/ouroboros-network/issues/2588"},"issue input-output-hk/ouroboros-network#2588")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/ouroboros-network/issues/2587"},"issue input-output-hk/ouroboros-network#2587")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/ouroboros-network/issues/2586"},"issue input-output-hk/ouroboros-network#2586"))),(0,i.kt)("p",null,"See ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/input-output-hk/io-sim/pull/24"},"PR #24"),"."),(0,i.kt)("p",null,"We also improved experience for contributors of ",(0,i.kt)("inlineCode",{parentName:"p"},"io-sim")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"typed-protocols")," by adding issue templates:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/io-sim/pull/25"},"PR input-output-hk/io-sim#25"))),(0,i.kt)("h3",{id:"typed-protocols"},"Typed Protocols"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"We pushed a branch which identifies a GHC quirk:\n",(0,i.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/typed-protocols/tree/coot/typed-protocols-rewrite-StateToken-problem"},"coot/typed-protocols-rewrite-StateToken-problem"),".\nThat's too be resolved in order to push forward review of the redesign in\n",(0,i.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/typed-protocols/pull/3"},"PR input-output-hk/typed-protocols#3"),"."),(0,i.kt)("li",{parentName:"ul"},"As for ",(0,i.kt)("inlineCode",{parentName:"li"},"io-sim"),", we wrote issue templates:\n",(0,i.kt)("a",{parentName:"li",href:"https://github.com/input-output-hk/typed-protocols/pull/11"},"PR input-output-hk/typed-protocols#11"))),(0,i.kt)("h3",{id:"input-endorsers-simulation"},"Input Endorsers Simulation"),(0,i.kt)("p",null,"New features include:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Histograms of block arrival frequency, for both network (inbound) and CPU\n(block validation). This is interesting to check that we're not overloading\nthe CPU block validation capacity, or network link capacity. Or alternatively\nto observe the behaviour in an overload situation if we set the block\ngeneration rate high enough.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},'Pie chart of utilisation of TCP links. This shows how small a fraction of\nlinks are being used at any one time, and shows that once the system "warms\nup" and is operating stably, most block delivery is ballistic.')),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Showing off the new screen layout combinators, that let us put multiple\ncharts, titles etc on screen at once and scale them to whatever screen or\nvideo resolution we like without having to tweak numbers (this example is\nscaled to fit 1080HD video resolution)."))),(0,i.kt)(a.Z,{playing:!0,controls:!0,url:"/p2p-relay-5.mp4",mdxType:"ReactPlayer"}))}d.isMDXComponent=!0}}]);