"use strict";(self.webpackChunkcardano_updates=self.webpackChunkcardano_updates||[]).push([[94687],{3905:(e,t,n)=>{n.d(t,{Zo:()=>m,kt:()=>g});var r=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=r.createContext({}),c=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},m=function(e){var t=c(e.components);return r.createElement(s.Provider,{value:t},e.children)},d="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},u=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,s=e.parentName,m=l(e,["components","mdxType","originalType","parentName"]),d=c(n),u=a,g=d["".concat(s,".").concat(u)]||d[u]||p[u]||o;return n?r.createElement(g,i(i({ref:t},m),{},{components:n})):r.createElement(g,i({ref:t},m))}));function g(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,i=new Array(o);i[0]=u;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[d]="string"==typeof e?e:a,i[1]=l;for(var c=2;c<o;c++)i[c]=n[c];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}u.displayName="MDXCreateElement"},5701:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>p,frontMatter:()=>o,metadata:()=>l,toc:()=>c});var r=n(87462),a=(n(67294),n(3905));const o={title:"Performance & Tracing Update",slug:"2024-11-04-performance-and-tracing",authors:"mgmeier",tags:["performance-tracing"],hide_table_of_contents:!1},i=void 0,l={permalink:"/2024-11-04-performance-and-tracing",editUrl:"https://github.com/intersectmbo/cardano-updates/tree/main/blog/2024-11-04-performance-and-tracing.md",source:"@site/blog/2024-11-04-performance-and-tracing.md",title:"Performance & Tracing Update",description:"High level summary",date:"2024-11-04T00:00:00.000Z",formattedDate:"November 4, 2024",tags:[{label:"performance-tracing",permalink:"/tags/performance-tracing"}],readingTime:2.685,hasTruncateMarker:!1,authors:[{name:"Michael Karg",title:"Performance and Tracing Team Lead",url:"https://github.com/mgmeier",imageURL:"https://github.com/mgmeier.png",key:"mgmeier"}],frontMatter:{title:"Performance & Tracing Update",slug:"2024-11-04-performance-and-tracing",authors:"mgmeier",tags:["performance-tracing"],hide_table_of_contents:!1},prevItem:{title:"DB Sync Team Update",permalink:"/2024-11-04-db-sync"},nextItem:{title:"SRE Team Update",permalink:"/2024-11-01-sre"}},s={authorsImageUrls:[void 0]},c=[{value:"High level summary",id:"high-level-summary",level:2},{value:"Low level overview",id:"low-level-overview",level:2},{value:"Benchmarking",id:"benchmarking",level:3},{value:"Development",id:"development",level:3},{value:"Tracing",id:"tracing",level:3}],m={toc:c},d="wrapper";function p(e){let{components:t,...n}=e;return(0,a.kt)(d,(0,r.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h2",{id:"high-level-summary"},"High level summary"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Benchmarking: Governance action / voting benchmarks on Node ",(0,a.kt)("inlineCode",{parentName:"li"},"10.0"),"; performed PlutusV3 RIPEMD-160 benchmarks."),(0,a.kt)("li",{parentName:"ul"},"Development: Governance action workload fully implemented; generator-based is submission ongoing work."),(0,a.kt)("li",{parentName:"ul"},"Tracing: New tracing system production ready - ",(0,a.kt)("inlineCode",{parentName:"li"},"cardano-tracer-0.3")," released; work advancing on ",(0,a.kt)("inlineCode",{parentName:"li"},"typed-protocols-0.3")," bump and metrics naming.")),(0,a.kt)("h2",{id:"low-level-overview"},"Low level overview"),(0,a.kt)("h3",{id:"benchmarking"},"Benchmarking"),(0,a.kt)("p",null,"We've run and analyzed the new voting workload on Node ",(0,a.kt)("inlineCode",{parentName:"p"},"10.0"),". This workload is a stream of voting transactions submitted on top of the existing\nvalue workload from release benchmarking. The delta in the comparison can claim to demonstrate the \"performance cost of voting\" in the Conway ledger era.\nThe workload itself is a puppeteer of 10.000 DReps overall, who vote on up to 5 governance actions simultaneously. We made sure these are\nmutually independent proposals, that vote tallying occurs, and that the actions get ratified and enacted (and hence removed from the ledger). Then, voting moves on to\nthe next actions - keeping the number of actions needing vote tallying stable over the benchmark. We could observe a very slight performance cost of voting; it's\ndeemed to be a reasonable one given the stress we've put the system under.  "),(0,a.kt)("p",null,"The results can be found ",(0,a.kt)("a",{parentName:"p",href:"/reports/2024-10-performance-10.1.1"},"here")," along with those from release benchmkarks.  "),(0,a.kt)("p",null,"Furthermore, we've developed and run a new Plutus benchmark targeting the RIPEMD-160 internal. We've compared the resulting performance observations against\nother Plutus workloads - both memory-constrained and (same as RIPEMD-160) CPU-constrained. We have concluded that there are no performance risks to that algorithm in PlutusV3,\ngiven existing execution budgets, and that it's consistently priced wrt. other CPU-intensive internals."),(0,a.kt)("h3",{id:"development"},"Development"),(0,a.kt)("p",null,"The voting workload is currently implemented using decentralized submission via ",(0,a.kt)("inlineCode",{parentName:"p"},"cardano-cli")," on each of our cluster machines. It has proven reliable - and scalable,\nat least to some extent. We're already working on improvements that reduce the (very slight) overhead of using the CLI for submission. Additionally, we're aiming\nfor a linear performance comparison when submitting twice the number votes per transaction at the same TPS rate - forcing double the work for vote tallying. "),(0,a.kt)("p",null,"Implementation of that workload using the centralized (and much better scalable) ",(0,a.kt)("inlineCode",{parentName:"p"},"tx-generator")," submission service is still ongoing."),(0,a.kt)("h3",{id:"tracing"},"Tracing"),(0,a.kt)("p",null,"Metrics naming is currently receiving a last round of consistency checking, so that it's aligned as closely as possible between legacy and new tracing system. In the process, we're\nadressing aspects of documentation, and incorporating feedback to define a few metrics in the new system that previously were present in the legacy one only. "),(0,a.kt)("p",null,"For migrating to the new ",(0,a.kt)("inlineCode",{parentName:"p"},"typed-protocols-0.3")," API, two of the new tracing system's packages are affected. The work for ",(0,a.kt)("inlineCode",{parentName:"p"},"ekg-forward-0.7")," is completed and merged to ",(0,a.kt)("inlineCode",{parentName:"p"},"master")," - yet to be released on CHaP. Work on the second package, ",(0,a.kt)("inlineCode",{parentName:"p"},"trace-forward"),", is ongoing."),(0,a.kt)("p",null,"We've finally released ",(0,a.kt)("inlineCode",{parentName:"p"},"cardano-tracer-0.3"),", which incorporates all features, enhancements and fixes that have been reported on here over the past months. This release\nmarks 100% production readiness of the new tracing system. We're focusing now on making documentation and example scripts and configs yet more user-friendly for\ncommunity rollout. We're very much looking forward to receiving feedback - and have time and space reserved to address it, as well as to provide intial support for\nthe migration away from the legacy system."))}p.isMDXComponent=!0}}]);