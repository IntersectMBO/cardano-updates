<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-tags-post-list-page plugin-blog plugin-id-updates">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">54 posts tagged with &quot;performance-tracing&quot; | Cardano Development Updates</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://updates.cardano.intersectmbo.org/tags/performance-tracing"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" property="og:title" content="54 posts tagged with &quot;performance-tracing&quot; | Cardano Development Updates"><meta data-rh="true" name="docusaurus_tag" content="blog_tags_posts"><meta data-rh="true" name="docsearch:docusaurus_tag" content="blog_tags_posts"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://updates.cardano.intersectmbo.org/tags/performance-tracing"><link data-rh="true" rel="alternate" href="https://updates.cardano.intersectmbo.org/tags/performance-tracing" hreflang="en"><link data-rh="true" rel="alternate" href="https://updates.cardano.intersectmbo.org/tags/performance-tracing" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/rss.xml" title="Cardano Updates Feed RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/atom.xml" title="Cardano Updates Feed Atom Feed">
<link rel="alternate" type="application/json" href="/feed.json" title="Cardano Updates Feed JSON Feed">



<link rel="alternate" type="application/rss+xml" href="/quarterly/rss.xml" title="Cardano Development Updates RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/quarterly/atom.xml" title="Cardano Development Updates Atom Feed">
<link rel="alternate" type="application/rss+xml" href="/reports/rss.xml" title="Cardano Development Updates RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/reports/atom.xml" title="Cardano Development Updates Atom Feed">

<script src="https://plausible.io/js/script.js" defer="defer" data-domain="updates.cardano.intersectmbo.org"></script><link rel="stylesheet" href="/assets/css/styles.5c10ca85.css">
<link rel="preload" href="/assets/js/runtime~main.a4621276.js" as="script">
<link rel="preload" href="/assets/js/main.40817c1a.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Cardano Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.svg" alt="Cardano Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Cardano Updates</b></a></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">Home</a><a class="navbar__item navbar__link" href="/quarterly">Quarterly</a><a class="navbar__item navbar__link" href="/reports">Reports</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current="page" class="navbar__link active" aria-haspopup="true" aria-expanded="false" role="button" href="/tags">Topics</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/tags">All Topics</a></li><li><a class="dropdown__link" href="/tags/network">Network</a></li><li><a class="dropdown__link" href="/tags/consensus">Consensus</a></li><li><a class="dropdown__link" href="/tags/ledger">Ledger</a></li><li><a class="dropdown__link" href="/tags/hydra">Hydra</a></li><li><a class="dropdown__link" href="/tags/db-sync">DB Sync</a></li><li><a class="dropdown__link" href="/tags/cli-api">Node CLI &amp; API</a></li><li><a class="dropdown__link" href="/quarterly/tags/cli-api-quarterly">Node CLI &amp; API Quarterly</a></li><li><a class="dropdown__link" href="/tags/crypto">Crypto</a></li><li><a class="dropdown__link" href="/tags/goedel">Goedel</a></li><li><a class="dropdown__link" href="/tags/mithril">Mithril</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/tags/performance-tracing">Performance &amp; Tracing</a></li><li><a class="dropdown__link" href="/reports/tags/benchmarking-reports">Benchmarking Reports</a></li><li><a class="dropdown__link" href="/tags/incident">Incident Reports</a></li><li><a class="dropdown__link" href="/tags/security">Security Reports</a></li></ul></div><a class="navbar__item navbar__link" href="/archive">Archive</a><a href="https://updates.cardano.intersectmbo.org" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">Recent Posts</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2025-10-29-consensus">Consensus Team Update</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2025-10-29-ledger">Ledger Team Update</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2025-10-29-mithril">Mithril Team Update</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2025-10-27-performance-and-tracing">Performance &amp; Tracing Update</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2025-10-24-network">Network Team Update</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2025-10-22-mithril">Mithril Team Update</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2025-10-17-hydra">Hydra Team Update</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2025-10-15-mithril">Mithril Team Update</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2025-10-14-consensus">Consensus Team Update</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2025-10-10-sre">SRE Team Update</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><header class="margin-bottom--xl"><h1>54 posts tagged with &quot;performance-tracing&quot;</h1><a href="/tags">View All Tags</a></header><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/2025-10-27-performance-and-tracing">Performance &amp; Tracing Update</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2025-10-27T00:00:00.000Z" itemprop="datePublished">October 27, 2025</time> Â· <!-- -->5 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/mgmeier" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/mgmeier.png" alt="Michael Karg"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/mgmeier" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Michael Karg</span></a></div><small class="avatar__subtitle" itemprop="description">Performance and Tracing Team Lead</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">â</a></h2><ul><li><strong>Benchmarking</strong>: Various maintenance to prepare for upcoming Node 10.6 changes; metrics migration guide for SPOs.</li><li><strong>Development</strong>: Prototyping a <code>PromQL</code>-based alert system for new tracing.</li><li><strong>Infrastructure</strong>: Located a space leak that was interfering with on-disk benchmarks.</li><li><strong>Tracing</strong>: Equipping <code>dmq-node</code> with the new tracing system; <code>cardano-tracer</code> library and API ongoing.</li><li><strong>Leios</strong>: Impact analysis and tech design; preparation for simulations hand-off.</li><li><strong>Hydra</strong>: Kick-off for development of system integration level benchmarks.</li><li><strong>Node diversity</strong>: Trace semantics specification ongoing; example test case ready for merging.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="low-level-overview">Low level overview<a class="hash-link" href="#low-level-overview" title="Direct link to heading">â</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="benchmarking">Benchmarking<a class="hash-link" href="#benchmarking" title="Direct link to heading">â</a></h3><p>We&#x27;ve performed various maintenance tasks to accomodate our automation to several breaking changes that come with Node 10.6. There are new constraints on Plutus cost models in genesis files which make it more difficult
to set up a customized testnet, like our benchmarking cluster. Furthermore, we&#x27;ve been assisting with integrating and debugging the upcoming release&#x27;s components, such as tx validation in the <code>cardano-api</code>, or the implementation
of new trace messages the Node emits.  </p><p>As the new tracing system will be the default on Node 10.6, we&#x27;ve created a tool which, given a side-by-side listing of metrics names from both systems, will automatically generate an exhaustive migration guide for SPOs. As the metrics names have changed slightly,
a migration for existing monitoring setups is required as a one-off effort. The migration guide will be published on the <a href="https://developers.cardano.org/docs/operate-a-stake-pool" target="_blank" rel="noopener noreferrer">Cardano Developer Portal</a>.  </p><p>Whilst the legacy tracing system is still fully operational in Node 10.6, the release marks the begin of its deprecation period - giving SPOs sufficient time to adjust their setups.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="development">Development<a class="hash-link" href="#development" title="Direct link to heading">â</a></h3><p>While <code>cardano-tracer</code> logs forwarded trace messages according to detailed configs, and exposes forwarded metrics, it does not provide any built-in functionality for monitoring and alerts. The experimental <code>RTView</code> component, which still can be built for <code>cardano-tracer</code> and remains fully functional, was an attempt to provide dashboards and alerts out of the box. However, due to its restricted design and low interoperability with existing monitoring standards, it has been discontinued.  </p><p>Currently, we&#x27;re taking another stab at this: We&#x27;re building a prototype that creates timeseries directly from observed metrics, and is able to parse and evaluate <a href="https://prometheus.io/docs/prometheus/latest/querying/basics" target="_blank" rel="noopener noreferrer">PromQL</a> queries referring to them. Based on that prototype, we&#x27;ll assess resource usage and feasibility of fully building
that feature into <code>cardano-tracer</code>. As most monitoring alerts can be (and are) defined as conditions on <code>PromQL</code> query results, and <code>PromQL</code> is an established industry standard, we see a low barrier for adaptation. Furthermore, if built sufficiently modular, it would eliminate the need to operate additional 3rd party services for scraping metrics and monitoring for alert conditions - at least in some usage scenarios.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="infrastructure">Infrastructure<a class="hash-link" href="#infrastructure" title="Direct link to heading">â</a></h3><p>With help and support from the Consensus team (Gracias, Javier!), we were able to locate a space leak that affected on-disk benchmarks. While the current on-disk benchmarks are representative, the space leak prevented us from scaling memory limits for the Node process with finer granularity.
This will get merged post 10.6 release, and will be of much use when we do comparative benchmarks of the LMDB and the new <code>lsm-trees</code> on-disk backing stores.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="tracing">Tracing<a class="hash-link" href="#tracing" title="Direct link to heading">â</a></h3><p>We&#x27;ve been working on equipping the Network team&#x27;s new <code>dmq-node</code> service with our new tracing system, <code>trace-dispatcher</code> - still a work in progress. Currently, the <code>dmq-node</code> uses plain contravariant tracing. Having a configurable system, with an API abstraction to define metadata and message serializations as well as process metrics, is a necessary step towards production-ready tracing. The added benefit of using <code>trace-dispatcher</code> is reusability of definitions already implemented in <code>cardano-node</code>, and a uniform way of how
<code>cardano-node</code> and <code>dmq-node</code> are configured, as well as how the expose trace evidence and metrics.  </p><p>The work on <code>cardano-tracer</code> as a library, with principled API and intra-process communications, is ongoing. Implementation is almost complete, and will enter testing phase soon.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="leios">Leios<a class="hash-link" href="#leios" title="Direct link to heading">â</a></h3><p>We&#x27;ve contributed to <a href="https://github.com/input-output-hk/ouroboros-leios/blob/main/docs/ImpactAnalysis.md" target="_blank" rel="noopener noreferrer">Leios Impact Analysis</a>. The Performance &amp; Tracing section summarizes how implementing, and eventually benchmarking Leios will impact various aspects of our approach. This spans from adding new Leios-specific observables into component code, to deriving
submission workloads suitable for Leios, to finding a scaling approach to be able to correlate performance observations to exact changes in Leios protocol parameters.  </p><p>Additionally, we&#x27;re currently working on the Leios technical design and implementation plan, which lays out our approach and derives some very high-level steps on how to realize it, based on the impact analysis.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="hydra">Hydra<a class="hash-link" href="#hydra" title="Direct link to heading">â</a></h3><p>We&#x27;ve kicked off a collaboration with the Hydra team. The goal is to build system integration level benchmarks for Hydra, which can target system pressure points, and which are able to scale operations in various directions - much akin to what we&#x27;re doing for
the Cardano node. Eventually, those benchmarks should provide more than just immediate feedback for Hydra engineers; they should be able to yield realistic figures of what to expect from operating one (or more) Hydra heads, and what the resource requirements are to achieve that.
Currently, we&#x27;re familiarizing ourselves with the system and its built-in observability to assess if it meets the requirements for the benchmarks we have in mind.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="node-diversity">Node diversity<a class="hash-link" href="#node-diversity" title="Direct link to heading">â</a></h3><p>The work on (multi-)node conformance testing is ongoing. We&#x27;re in the process of creating a specification document for semantics of existing Node traces. While a few of them might be unique to the Haskell implementation, the majority documents how
Cardano itself runs and behaves; those traces can implemented accordingly across diverse Node projects.  </p><p>Our own demonstration test case for conformance testing is fully implemented and ready to be merged after the Node 10.6 release. It validates a metric exposed by a node wrt. trace evidence in its logs and internal events the metric is based on; see <a href="https://github.com/IntersectMBO/cardano-node/pull/6322" target="_blank" rel="noopener noreferrer">cardano-node PR#6322</a>.</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/performance-tracing">performance-tracing</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/2025-09-23-performance-and-tracing">Performance &amp; Tracing Update</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2025-09-23T00:00:00.000Z" itemprop="datePublished">September 23, 2025</time> Â· <!-- -->4 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/mgmeier" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/mgmeier.png" alt="Michael Karg"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/mgmeier" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Michael Karg</span></a></div><small class="avatar__subtitle" itemprop="description">Performance and Tracing Team Lead</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">â</a></h2><ul><li><strong>Benchmarking</strong>: Feature benchmarks for a new tx submission logic; generalized on-disk benchmark profiles.</li><li><strong>Development</strong>: New tracing system for <code>cardano-submit-api</code>; Node conformance testing groundwork, being applied to metrics.</li><li><strong>Infrastructure</strong>: Dijkstra era being incorporated into benchmark tooling.</li><li><strong>Tracing</strong>: Creating a library package and API from <code>cardano-tracer</code>, facilitating dedicated trace consumer applications.</li><li><strong>Team</strong>: Ruslan joins Performance &amp; Tracing, will be aimed at Leios.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="low-level-overview">Low level overview<a class="hash-link" href="#low-level-overview" title="Direct link to heading">â</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="benchmarking">Benchmarking<a class="hash-link" href="#benchmarking" title="Direct link to heading">â</a></h3><p>We&#x27;ve performed and analysed feature benchmarks of <code>TxSubmission</code> protocol, version 2. It&#x27;s designed to reduce redundant exchange of transactions between network nodes. To that end we&#x27;ve created a dedicated benchmark
which is able to locally reproduce performance observations on the cloud cluster - and hence be executed with GHC profiling for tracking time and space usage.  </p><p>The on-disk (<code>LMDB</code>) benchmarks for the cluster have been generalized into full-fledged benchmarking profiles that can be scaled for available RAM (and thus the pressure on the on-disk backing store to perform disk I/O) - and be applied
to other backing store implementations as well. This will allow for direct performance comparisons with the <code>lsm-trees</code> solution, once it is integrated into the Node.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="development">Development<a class="hash-link" href="#development" title="Direct link to heading">â</a></h3><p>There&#x27;s a microservice, <code>cardano-submit-api</code>, which is run independently from the Node (if desired). It allows for Cardano transactions to be submitted via HTTP POST, instead of Cardano native protocols. It&#x27;s still using
the legacy tracing system, which is why we&#x27;re currently porting its logging and metrics to the new one.  </p><p>We&#x27;re also laying groundwork for (multi-)node conformance testing. This entails creating a specification document for semantics of existing traces. These traces can then be emitted accordingly across diverse node implementations. Given the unified semantics,
these points of evidence can then be evaluated against each other, against our Haskell reference implementation, or against a model of specified / expected behaviour, resulting in a quantifiable way to assess conformance across individual implementations.
Currently, we&#x27;re implementing a playground version of this in the tracing system&#x27;s own test suite, where we assess whether the metrics a node exposes conforms to the trace evidence in its logs, and to the metrics it forwards to <code>cardano-tracer</code>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="infrastructure">Infrastructure<a class="hash-link" href="#infrastructure" title="Direct link to heading">â</a></h3><p>As a maintenance task, we&#x27;re integrating the new Dijkstra ledger era into our performance workbench and all benchmarking tools. This will allow us to specify existing profiles in the new era (allowing us to comparatively benchmark its implementation against previous eras)
as well as create new benchmarks making use of any Dijkstra-specific feature.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="tracing">Tracing<a class="hash-link" href="#tracing" title="Direct link to heading">â</a></h3><p>The trace consuming / processing service <code>cardano-tracer</code> had been built as a monolithic application. We&#x27;re currently redesigning it as a more modular one, splitting it up into a library and an application proper (which hosts all its current high-level functionality).
The underlying library will be equipped with an API that meets community standards in the future. For now, we&#x27;re focusing on making all library components safely restartable and reconfigurable, as well as providing abstract, clean intra-process communications (<code>cardano-tracer</code> is a highly multi-threaded app). These capabilities are also verified in the test suite.  </p><p>This will facilitate rapid development of custom, specialized applications for trace consumption and processing: The library package will provide all mid-level abstractions, as well as the Cardano native multiplexed forwarding protocol. It will allow any application
to focus exclusively on implementing the high-level features it aims to.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="team">Team<a class="hash-link" href="#team" title="Direct link to heading">â</a></h3><p>Ruslan joined Performance &amp; Tracing as a Software Engineer. He has a ton of functional programming experience under his belt, in Idris, in Haskell and in Scala. Additionally, he used to work as a perfomance engineer for a large, distributed commercial system. This all
makes him an ideal candidate for Cardano performance engineering, and perspectively for all new Leios benchmarks and performance tests. Welcome, Ruslan!</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/performance-tracing">performance-tracing</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/2025-08-08-performance-and-tracing">Performance &amp; Tracing Update</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2025-08-08T00:00:00.000Z" itemprop="datePublished">August 8, 2025</time> Â· <!-- -->4 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/mgmeier" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/mgmeier.png" alt="Michael Karg"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/mgmeier" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Michael Karg</span></a></div><small class="avatar__subtitle" itemprop="description">Performance and Tracing Team Lead</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">â</a></h2><ul><li><strong>Benchmarking</strong>: Release benchmarks for <code>10.5</code>; LMDB (UTxOs on-disk) benchmarks.</li><li><strong>Development</strong>: New memory-constrained benchmark families, targeting UTxOs on-disk.</li><li><strong>Infrastructure</strong>: Migration of bench cluster completed.</li><li><strong>Tracing</strong>: Deprecation of legacy system; TCP forwarding merged; improved self-documentation.</li><li><strong>Meetup</strong>: Performance &amp; Tracing meetup held in Cardiff, Wales.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="low-level-overview">Low level overview<a class="hash-link" href="#low-level-overview" title="Direct link to heading">â</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="benchmarking">Benchmarking<a class="hash-link" href="#benchmarking" title="Direct link to heading">â</a></h3><p>We&#x27;ve performed and analysed release benchmarks for Node <code>10.5</code>. The pre-release turned on peer sharing by default; our benchmarks indicated a negative performance impact when enabling this on block producers. The current release <code>10.5.1</code> does not enable peer sharing
for block producers; the published final results can be found in the <a href="https://updates.cardano.intersectmbo.org/reports/2025-07-performance-10.5.0" target="_blank" rel="noopener noreferrer">Performance report for 10.5</a>.  </p><p>Additionally, we&#x27;ve achieved meaningful benchmarks for UTxOs-on-disk, which use the LMDB backend. Our new profiles support seamless scaling of RAM pressure on the backend, forcing disk I/O to a varying degree. We&#x27;re currently analysing the observations made, and
gathering more data using different scaling factors if needed; the goal is a reliable assessmemt of LMDB&#x27;s viability for block producing nodes.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="development">Development<a class="hash-link" href="#development" title="Direct link to heading">â</a></h3><p>Developing RAM-constrained benchmarks that would put tunable pressure on an UTxOs-on-disk backend posed a unique challenge.  </p><p>First and foremost, limiting memory for past in-memory benchmarks has never been a requirement at all. A consistent approach to do so given the existing deployment had to be built, along with pertinent diagnostic tooling. Second, the LMDB backend
is not managed by Haskell&#x27;s GHC runtime, but comes with its own memory management - which required us to develop a double-pronged approach to selectively apply RAM limits. Lastly, other parts of the Node&#x27;s code didn&#x27;t support executing in tightly limited, constant
space and would lead to the OS terminating the Node for running out of memory.  </p><p>The interaction of various <code>cgroup</code> limits on Linux kernels, memory settings in our Nomad deployment and GHC RTS options let us create a stable runtime behavior over the course of the benchmark - a hard requirement, as system metrics taken at the
beginning of a run must be comparable to those towards the end. A blocker for initializing the Node for benchmarks was resolved in <a href="https://github.com/IntersectMBO/cardano-node/pull/6295" target="_blank" rel="noopener noreferrer">cardano-node PR#6295</a>: Using <code>mmap</code> allowed us to use the OS&#x27;s virtual memory subsystem for on-demand loading instead of it being
managed by the Haskell runtime - which significantly brought down the heap size required for the task.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="infrastructure">Infrastructure<a class="hash-link" href="#infrastructure" title="Direct link to heading">â</a></h3><p>The migration to the new benchmarking cluster is finalized. For representative performance measurements of UTxOs-on-disk, we require direct SSD storage on each cloud machine instance. Along with deploying the new hardware came a full upgrade of OS and <code>nixpgks</code> software.
Validating the migration was extra effort: A seemingly innocent cloud provider service (which was newly added to their <code>NixOS</code> image) did nothing more than a heartbeat request every 5 min to some central infrastructure server. Yet, it caused the
standard deviation of some of our network related metrics to double - thus reducing confidence in those metrics.  </p><p>After validation, we performed a complete re-run of existing performance baselines on the new hardware.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="tracing">Tracing<a class="hash-link" href="#tracing" title="Direct link to heading">â</a></h3><p>Work on the new tracing system has yielded various improvements. Trace forwarding over TCP is now fully functional and merged to <code>master</code>. This will make setting up forwarding to remote hosts much easier than by using UNIX domain sockets / Windows named pipes.
However, it&#x27;s recommended for secure and isolated environments only (<a href="https://github.com/IntersectMBO/cardano-node/pull/6241" target="_blank" rel="noopener noreferrer">cardano-node PR#6241</a>).  </p><p>The auto-documentation feature of the new system has improved user experience; the generated documents are now structed in a more accessible way, and contain necessary metadata as to which Node version / commit is being documented by them (<a href="https://github.com/IntersectMBO/cardano-node/pull/6283" target="_blank" rel="noopener noreferrer">cardano-node PR#6283</a>).  </p><p>Another refactoring targeted the new system&#x27;s core library, <code>trace-dispatcher</code>. It now comes with a minimal dependency footprint and fully equipped with all necessary type definitions to be built using Haskell&#x27;s community packages (Hackage) exclusively. This greatly
enhances the ease to use it for other applications than the Node as well - Cardano or non-Cardano (<a href="https://github.com/IntersectMBO/cardano-node/pull/6268" target="_blank" rel="noopener noreferrer">cardano-node PR#6268</a>). Increasing the dependency footprint is only required for additional features, like trace forwarding.  </p><p>With the upcoming Node <code>10.6</code> release, we plan to officially deprecate the legacy tracing system. This means it will enter a grace period of ~3 months, where both systems coexist in the same Node build; then, it will be decommissioned and actively removed from the code base.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="meetup">Meetup<a class="hash-link" href="#meetup" title="Direct link to heading">â</a></h3><p>We organized 2025&#x27;s in-person team meetup in Cardiff, Wales. We had highly insightful and productive days - I would like to thank all team members who contributed, and extend my special thanks to guests from outside of the team: Your
presence and contributions were greatly appreciated, Can Huzmeli and Neil Davies.</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/performance-tracing">performance-tracing</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/2025-05-26-performance-and-tracing">Performance &amp; Tracing Update</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2025-05-26T00:00:00.000Z" itemprop="datePublished">May 26, 2025</time> Â· <!-- -->4 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/mgmeier" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/mgmeier.png" alt="Michael Karg"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/mgmeier" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Michael Karg</span></a></div><small class="avatar__subtitle" itemprop="description">Performance and Tracing Team Lead</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">â</a></h2><ul><li><strong>Benchmarking</strong>: Feature benchmarks for ledger metrics tracer and <code>InboundGovernor</code> optimizations.</li><li><strong>Development</strong>: Ledger metrics merged; 2 hotfixes for old tracing.</li><li><strong>Infrastructure</strong>: Migration plan for on-disk benchmarks (LMDB, LSM-tree); initial Leios impact analysis.</li><li><strong>New Tracing</strong>: Tracer service now independent of Node; new feature enabling forwarding over TCP.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="low-level-overview">Low level overview<a class="hash-link" href="#low-level-overview" title="Direct link to heading">â</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="benchmarking">Benchmarking<a class="hash-link" href="#benchmarking" title="Direct link to heading">â</a></h3><p>We&#x27;ve completed two distinct feature benchmarks: The new periodic ledger metrics tracer and <code>InboundGovernor</code> optimizations on the network layer. Both features have shown a positive performance impact; the former
improves CPU usage and block production metrics, the latter slightly improves diffusion metrics.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="development">Development<a class="hash-link" href="#development" title="Direct link to heading">â</a></h3><p>Having finalized and benchmarked the periodic ledger metrics tracer feature, it was merged to <code>master</code> and will be part of the upcoming <code>10.5</code> release. The feature decorrelates obtaining several metrics from the beginning of the forging loop.
This avoids competition for synchronization primitives during the &quot;hot phase&quot; of block production. Furthermore, by decoupling those metrics from a forging tracer, we enable exposing those metrics from a relay as well. <a href="https://github.com/IntersectMBO/cardano-node/pull/6180" target="_blank" rel="noopener noreferrer">cardano-node PR#6180</a></p><p>Additionally, we&#x27;ve been vital in creating two hotfixes for the old tracing system: </p><ol><li>The old tracing system metric <code>utxoSize</code> was missing due to using the pre-UTxO-HD variant of querying the set size. The fix ports the correct solution from the new tracing system to the old one: <a href="https://github.com/IntersectMBO/cardano-node/pull/6217" target="_blank" rel="noopener noreferrer">cardano-node PR#6217</a></li><li>On the upcoming Node <code>10.5</code> integration branch only, the old tracing system could leak file descriptors. Again, the fix was ported from the new tracing system to the old one - kudos to Karl Knutsson: <a href="https://github.com/input-output-hk/iohk-monitoring-framework/pull/654" target="_blank" rel="noopener noreferrer">iohk-monitoring PR#654</a></li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="infrastructure">Infrastructure<a class="hash-link" href="#infrastructure" title="Direct link to heading">â</a></h3><p>We&#x27;ve discussed and set up a migration plan for our benchmarking cluster hardware. For fair and representative performance measurements of on-disk backing stores of UTxO-HD, we require direct SSD storage on the machine instance in the cloud; running
disk I/O through additional layers to and from some shared SSD device, even in the same data center, would introduce significant confounding factors. The plan includes invalidating as little of our existing performance baselines as possible when
migrating to the new hardware. We&#x27;re looking forward to benchmark the current on-disk backend (LMDB) for block producers - as well as the futuere LSM-tree based one.  </p><p>We&#x27;ve also discussed an initial Leios impact analysis. To fairly and reliably benchmark a future Leios implementation, our infrastructure and tooling will need to be extended significantly. Several metrics won&#x27;t have the same
weight they currently carry for Praos, due to Leios&#x27; later finality; other metrics will need to be introduced for different new Leios block types, adding appropriate observability to the implementation. Finally, creating and submitting a saturation workload for a system which is built for extremely high throughput will be a challenge in itself.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="new-tracing">New Tracing<a class="hash-link" href="#new-tracing" title="Direct link to heading">â</a></h3><p>We&#x27;ve been working on a medium-sized refactoring that eliminates the <code>cardano-node</code> dependency from <code>cardano-tracer</code>. This means, the tracer service can now be built independently of the Node; all shared data types have been moved
to some more basic packages of the new tracing system. This also enables us to issue releases of the tracer service <em>independently</em> of the Node&#x27;s release cycle. <a href="https://github.com/IntersectMBO/cardano-node/pull/6125" target="_blank" rel="noopener noreferrer">cardano-node PR#6125</a>  </p><p>Last not least, we&#x27;ve kicked off development for a new feature that&#x27;s been motivated by community feedback: Forwarding observables (trace messages, metrics) over TCP. Forwarding to different hosts currently assumes a UNIX domain socket that connects the Node and
the tracer service through an SSH tunnel. This is a portable, versatile, and probably one of the most secure ways to transmit sensitive data. However, in an environment where an operator controls all network port mapping and firewalls, one can
argue that forwarding over TCP/IP is equally viable, as it can be properly isolated - and it is much more convenient to set up and configure. The feature aims, when it&#x27;s completed, to offer both forwarding routes, and let the end user decide.</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/performance-tracing">performance-tracing</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/2025-05-07-performance-and-tracing">Performance &amp; Tracing Update</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2025-05-07T00:00:00.000Z" itemprop="datePublished">May 7, 2025</time> Â· <!-- -->3 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/mgmeier" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/mgmeier.png" alt="Michael Karg"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/mgmeier" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Michael Karg</span></a></div><small class="avatar__subtitle" itemprop="description">Performance and Tracing Team Lead</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">â</a></h2><ul><li><strong>Benchmarking</strong>: <code>10.4.1</code> release benchmarks; UTxO-HD, GC settings and socket I/O feature benchmarks.</li><li><strong>Development</strong>: Abstracting over quick queries and trace queries; enabling query processing on remote hosts.</li><li><strong>Infrastructure</strong>: Workbench simplification merged; GHC8.10 tech debt removed.</li><li><strong>New Tracing</strong>: Provided hotfix for several metrics.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="low-level-overview">Low level overview<a class="hash-link" href="#low-level-overview" title="Direct link to heading">â</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="benchmarking">Benchmarking<a class="hash-link" href="#benchmarking" title="Direct link to heading">â</a></h3><p>We&#x27;ve completed release benchmarks for Node <code>10.4.1</code>. It is the first mainline release of an UTxO-HD node featuring <code>LedgerDB</code>. Leading up to the release, we previously performed and analysed UTxO-HD benchmarks. We were
able to document a regression in RAM usage, and assisted in pinpointing its origin, leading to it being fixed swiftly for the <code>10.4</code> release.  </p><p>Additionally, we ran feature benchmarks for a potential socket I/O optimization in the network layer, and GC setting changes catering to the now-default GHC9.6 compiler. Both benchmarks have shown moderate improvements in various performance metrics.
This might enable the network team to pick up the optimization for <code>10.5</code>. Also, we might be able to update the recommended GC settings for block producers, and add them to our own nix service configs for deployment.  </p><p>The <code>10.4.1</code> performance report has been published on <a href="https://updates.cardano.intersectmbo.org/reports/2025-05-performance-10.4.1" target="_blank" rel="noopener noreferrer">Cardano Updates</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="development">Development<a class="hash-link" href="#development" title="Direct link to heading">â</a></h3><p>We&#x27;ve further evolved the (still experimental) quick query feature of our analysis tool <code>locli</code>. Parametrizable quick queries allow for arbitrary queries into raw benchmarking data, uncovering correlations not part of standard analysis. They are implemented using composable definitions inside a filter-reduce framework. With <code>locli</code>&#x27;s DB storage backend, we can leverage the DB engine to do much of the work. Now, we&#x27;re integrating a precursor to quick queries - so called trace queries - into the framework. Those can process raw trace
data from archived log files. Currently, we&#x27;re adding an abstraction layer such that it is opaque to the framework whether the data was retrieved (and possibly pre-processed) from a DB or from raw traces.  </p><p>Furthermore, we added a custom (CBOR-based) serialization for intermediate results so a query can be evaluated on a remote machine - like the system archiving all benchmarking runs - but triggered, and its results visualized, on your localhost.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="infrastructure">Infrastructure<a class="hash-link" href="#infrastructure" title="Direct link to heading">â</a></h3><p>The workbench nix code optimization has finally been merged. Redundant derivations and recursions have been replaced; many nix store entries have been consolidated. Among other things, the new code also aims to maximize nix cache hits. Furthermore,
as GHC8.10 has now been officially retired from all build pipelines, we were able to clean up all tech debt in our automations that we had to keep around due to supporting the old compiler version.  </p><p>Exactly as we had hoped, this has brought down CI time for the Node by orders of magnitude; first, from over an hour to around 15 min, then to under 10 min. Also, all workbench shell invocations are significantly faster, and clutter in the nix store
is greatly reduced.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="new-tracing">New Tracing<a class="hash-link" href="#new-tracing" title="Direct link to heading">â</a></h3><p>We&#x27;ve been hurrying to provide hotfixes for <code>connectionManager_*</code> and <code>slotsMissed</code> metrics that were faulty on Node <code>10.3</code>. They have been successfully integrated into the Node <code>10.4</code> release.</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/performance-tracing">performance-tracing</a></li></ul></div></footer></article><nav class="pagination-nav" aria-label="Blog list page navigation"><a class="pagination-nav__link pagination-nav__link--next" href="/tags/performance-tracing/page/2"><div class="pagination-nav__label">Older Entries</div></a></nav></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Blog</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/">Home</a></li><li class="footer__item"><a class="footer__link-item" href="/archive">Archive</a></li><li class="footer__item"><a class="footer__link-item" href="/tags">Tags</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2025 Intersect, Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.a4621276.js"></script>
<script src="/assets/js/main.40817c1a.js"></script>
</body>
</html>