<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-tags-post-list-page plugin-blog plugin-id-updates">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">54 posts tagged with &quot;performance-tracing&quot; | Cardano Development Updates</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://updates.cardano.intersectmbo.org/tags/performance-tracing/page/5"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" property="og:title" content="54 posts tagged with &quot;performance-tracing&quot; | Cardano Development Updates"><meta data-rh="true" name="docusaurus_tag" content="blog_tags_posts"><meta data-rh="true" name="docsearch:docusaurus_tag" content="blog_tags_posts"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://updates.cardano.intersectmbo.org/tags/performance-tracing/page/5"><link data-rh="true" rel="alternate" href="https://updates.cardano.intersectmbo.org/tags/performance-tracing/page/5" hreflang="en"><link data-rh="true" rel="alternate" href="https://updates.cardano.intersectmbo.org/tags/performance-tracing/page/5" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/rss.xml" title="Cardano Updates Feed RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/atom.xml" title="Cardano Updates Feed Atom Feed">
<link rel="alternate" type="application/json" href="/feed.json" title="Cardano Updates Feed JSON Feed">



<link rel="alternate" type="application/rss+xml" href="/quarterly/rss.xml" title="Cardano Development Updates RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/quarterly/atom.xml" title="Cardano Development Updates Atom Feed">
<link rel="alternate" type="application/rss+xml" href="/reports/rss.xml" title="Cardano Development Updates RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/reports/atom.xml" title="Cardano Development Updates Atom Feed">

<script src="https://plausible.io/js/script.js" defer="defer" data-domain="updates.cardano.intersectmbo.org"></script><link rel="stylesheet" href="/assets/css/styles.5c10ca85.css">
<link rel="preload" href="/assets/js/runtime~main.a4621276.js" as="script">
<link rel="preload" href="/assets/js/main.40817c1a.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Cardano Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.svg" alt="Cardano Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Cardano Updates</b></a></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">Home</a><a class="navbar__item navbar__link" href="/quarterly">Quarterly</a><a class="navbar__item navbar__link" href="/reports">Reports</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current="page" class="navbar__link active" aria-haspopup="true" aria-expanded="false" role="button" href="/tags">Topics</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/tags">All Topics</a></li><li><a class="dropdown__link" href="/tags/network">Network</a></li><li><a class="dropdown__link" href="/tags/consensus">Consensus</a></li><li><a class="dropdown__link" href="/tags/ledger">Ledger</a></li><li><a class="dropdown__link" href="/tags/hydra">Hydra</a></li><li><a class="dropdown__link" href="/tags/db-sync">DB Sync</a></li><li><a class="dropdown__link" href="/tags/cli-api">Node CLI &amp; API</a></li><li><a class="dropdown__link" href="/quarterly/tags/cli-api-quarterly">Node CLI &amp; API Quarterly</a></li><li><a class="dropdown__link" href="/tags/crypto">Crypto</a></li><li><a class="dropdown__link" href="/tags/goedel">Goedel</a></li><li><a class="dropdown__link" href="/tags/mithril">Mithril</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/tags/performance-tracing">Performance &amp; Tracing</a></li><li><a class="dropdown__link" href="/reports/tags/benchmarking-reports">Benchmarking Reports</a></li><li><a class="dropdown__link" href="/tags/incident">Incident Reports</a></li><li><a class="dropdown__link" href="/tags/security">Security Reports</a></li></ul></div><a class="navbar__item navbar__link" href="/archive">Archive</a><a href="https://updates.cardano.intersectmbo.org" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">Recent Posts</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2025-10-29-consensus">Consensus Team Update</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2025-10-29-ledger">Ledger Team Update</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2025-10-29-mithril">Mithril Team Update</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2025-10-27-performance-and-tracing">Performance &amp; Tracing Update</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2025-10-24-network">Network Team Update</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2025-10-22-mithril">Mithril Team Update</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2025-10-17-hydra">Hydra Team Update</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2025-10-15-mithril">Mithril Team Update</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2025-10-14-consensus">Consensus Team Update</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2025-10-10-sre">SRE Team Update</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><header class="margin-bottom--xl"><h1>54 posts tagged with &quot;performance-tracing&quot;</h1><a href="/tags">View All Tags</a></header><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/2024-06-25-performance-and-tracing">Performance &amp; Tracing Update</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2024-06-25T00:00:00.000Z" itemprop="datePublished">June 25, 2024</time> Â· <!-- -->4 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/mgmeier" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/mgmeier.png" alt="Michael Karg"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/mgmeier" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Michael Karg</span></a></div><small class="avatar__subtitle" itemprop="description">Performance and Tracing Team Lead</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">â</a></h2><ul><li>Benchmarking: Release benchmarks for Node <code>8.12.0</code>; <code>DRep</code> benchmarks with 100k DReps.</li><li>Development: Merged a performance fix on <code>8.11</code>; kicked off development of governance action workload.</li><li>Workbench: Adjusted automations to latest <code>8.12</code> Conway features and Plutus cost model; implementation of CIP-69 and CIP-117 for our tooling is in validation phase.</li><li>Tracing: Work on metrics naming ongoing. Factoring out RTView component is completed and has entered testing.</li><li>IOI Tech Meetup: Our team contributed two presentations at the meetup in Zurich; worked on community report of UTxO scaling benchmarks.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="low-level-overview">Low level overview<a class="hash-link" href="#low-level-overview" title="Direct link to heading">â</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="benchmarking">Benchmarking<a class="hash-link" href="#benchmarking" title="Direct link to heading">â</a></h3><p>We&#x27;ve run and analyzed a full set of release benchmarks for Node versions <code>8.12.0</code>. In comparison with the latest mainnet release <code>8.9.3</code>, we could not observe any regressions. In fact, <code>8.12.0</code> was able to deliver equal network
performance at a slightly reduced resource cost - both for CPU and memory.</p><p>Another benchmark of the Conway ledger with large amounts of <code>DRep</code>s has been performed. This time, 100000 DReps were chosen - this amount aims to simulate a scenario where lots of self-delegation takes place. While a performance
impact is observable in this instance, we can still see that the number of DReps scales well overall, and poses no concern for network peformance.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="development">Development<a class="hash-link" href="#development" title="Direct link to heading">â</a></h3><p>We have contributed and merged a performance fix on <code>8.11</code> which adresses a regressing metric in the forging loop. The regression was only observable under specific conditions. Benchmarks on <code>8.12</code>
have already confirmed the fix to be successful.  </p><p>We&#x27;ve kicked off governance action workloads for benchmarking. This will be an entirely new workload type for Conway era, targeting performance measurements of its decentralized decision making process. The workload will feature
registering proposals, acting as multiple DReps to vote on active proposals, vote tallying and proposal enactment. We&#x27;re very grateful for the Ledger team&#x27;s helpful support so far in creating a workload design for benchmarking - one that evenly stresses
the network over extended periods of time.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="workbench">Workbench<a class="hash-link" href="#workbench" title="Direct link to heading">â</a></h3><p>The workbench automations have been upgraded to handle Node <code>8.12</code> and the corresponding integrations of Cardano API and CLI.  </p><p>Furthermore, we&#x27;ve updated to the latest PlutusV3 costmodel in our benchmarks - as well as implemented CIP-69 and CIP-117 for all our PlutusV3 benchmarking scripts, pending validation by the Plutus team.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="tracing">Tracing<a class="hash-link" href="#tracing" title="Direct link to heading">â</a></h3><p>The work on aligning of metrics naming and semantics of new and legacy tracing is ongoing. Additionally, we&#x27;re adding a handful of metrics to the new tracing system which currently exist in legacy tracing only.</p><p>Factoring out the RTView (&quot;real-time view&quot;) component of <code>cardano-tracer</code> in the new tracing system has finished. This includes a considerable refactoring of <code>cardano-tracer</code>&#x27;s codebase, so that we&#x27;re currently running test on the new codebase. Isolating
RTView is due to its being in prototype stage for too long, and the design decisions taken. In the short term, this will make several package dependencies optional, which have become troublesome for CI, as well as making <code>cardano-tracer</code> more lightweight.
RTView remains as an opt-in.  </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ioi-tech-meetup">IOI Tech Meetup<a class="hash-link" href="#ioi-tech-meetup" title="Direct link to heading">â</a></h3><p>Our entire team traveled to Zurich, Switzerland to attend ZuriHac&#x27;24 and the IOI Tech Meetup. It was fantastic to meet everyone in person, and we all had an amazing and very productive time. A big Thank You to everyone involved in making that happen, and making it a success.  </p><p>We contributed two presentations for the meetup: a thourough introduction of the new tracing system aimed at developers - as it&#x27;s not tailored exclusively to <code>cardano-node</code>, but can be used in other (Haskell) services as well. And secondly,
an overview over the benchmarking framework based on Quantitative Timeliness Agreements which we&#x27;re building - as well as a show-and-tell of our prototype, implementing part of said framework. We&#x27;re grateful for the great interest and feedback from all
the participants.  </p><p>Last not least, we worked on creating a community report of the UTxO scaling benchmarks performed during March and April - to be released soon.</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/performance-tracing">performance-tracing</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/2024-05-24-performance-and-tracing">Performance &amp; Tracing Update</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2024-05-24T00:00:00.000Z" itemprop="datePublished">May 24, 2024</time> Â· <!-- -->4 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/mgmeier" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/mgmeier.png" alt="Michael Karg"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/mgmeier" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Michael Karg</span></a></div><small class="avatar__subtitle" itemprop="description">Performance and Tracing Team Lead</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">â</a></h2><ul><li>Benchmarking: Node versions <code>8.9.3</code> and <code>8.11.0</code>; new <code>PlutusV3</code> plus addtional <code>DRep</code> benchmarks; re-evaluation of network latency.</li><li>Development: BLST workload for PlutusV3 was implemented; improved error/shutdown behaviour for <code>tx-generator</code> is in testing phase.</li><li>Workbench: UTxO-HD tracer configs harmonized. New <code>plutusv3</code> profiles supporting experimental budgets. Work on Haskell profile definition is in validation phase.</li><li>Tracing: New metrics and handle registry feature merged to <code>master</code>. Work on metrics naming ongoing. Factoring out RTView component has begun.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="low-level-overview">Low level overview<a class="hash-link" href="#low-level-overview" title="Direct link to heading">â</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="benchmarking">Benchmarking<a class="hash-link" href="#benchmarking" title="Direct link to heading">â</a></h3><p>Runs and analyses of full sets of release benchmarks have been performed for Node versions <code>8.9.3</code> and <code>8.11.0</code>.  </p><p>For comparison of how the Conway ledger performs when injecting large amounts of <code>DRep</code>s and delegations versus one with zero <code>DReps</code> we&#x27;ve run additional configurations with existing workloads from release benchmarking. So far we&#x27;ve found
that the number of <code>DReps</code> in ledger scales well and does not lead to notable performance penalties.  </p><p>Additionally, we&#x27;ve successfully run the baseline for the upcoming <code>PlutusV3</code> benchmarks on our Nomad cluster. Those will, given the new V3 cost model, serve to determine headroom, or constraint, regarding resource usage and network metrics when
operating under various execution budgets.  </p><p>Last not least, with much appreciated support and feedback from the network team, we performed a re-evaluation of the network the latency matrix for our benchmarking cluster. The cluster stretches over three regions globally. Due to unknown changes in the underlying
hardware infrastructure, a slight delay between Europe and Asia/Pacific regions could be measured. We needed to adjust some existing baselines accordingly - otherwise, this delay could be falsely attributed to a software regression.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="development">Development<a class="hash-link" href="#development" title="Direct link to heading">â</a></h3><p>We have implemented a benchmarking workload using <code>PlutusV3</code>&#x27;s new BLST internals. As those do little memory allocation, but require more CPU steps, this workload will allow us to focus on that particular aspect of block and transaction budgets.</p><p>The <code>tx-generator</code> service will now label each submission thread with its submission target. Additionally, it has been equipped with custom signal handlers. This will improve both how gracefully shutdowns can be performed, and how
precise error reporting is done when losing connection to a submission target. Last not least, the service now supports a configurable <code>KeepAlive</code> timeout for the <code>NodeToNode</code> mini-protocol - accounting for very long major GC pauses on
submission targets under very specific benchmarking workloads. Those features have entered testing phase.   </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="workbench">Workbench<a class="hash-link" href="#workbench" title="Direct link to heading">â</a></h3><p>Thanks to feedback from the consensus team, we&#x27;ve harmonized tracing configurations for our benchmarks between regular and UTxO-HD node. As the latter is more verbose by default, this is a confounding factor for our metrics: We&#x27;re analysing north
of 90 traces per second per cluster node, so all node flavours are required to be equally verbose.  </p><p>The benchmarks based on the BLST workload now additionally support scaling budget components up or down at will. This means we can run a given cost model against custom execution budgets, controlling the point where the workload will exhaust it. This enables comparison
of performance impact of potential changes to those budgets.  </p><p>Porting our performance workbench&#x27;s profile definitions to Haskell has been nearly completed, and an adequate test suite been implemented. This new component has now entered validation phase to make sure it correctly replicates all existing profile content.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="tracing">Tracing<a class="hash-link" href="#tracing" title="Direct link to heading">â</a></h3><p>Two new metrics for <code>cardano-node</code> have landed in <code>master</code> - both for new and legacy tracing systems. They provide detailed build info, and indicate wether the node is a block producer or not.  </p><p>We&#x27;re now working on closing the gap in the metric naming schema between new and legacy tracing. The aim is to allow for a seamless interchange, without additional configuration required, so that all existing monitoring services can rely on identical metric
names with identical semantics.  </p><p>Furthermore, work has begun to factor out the RTView (&quot;real-time view&quot;) component of <code>cardano-tracer</code> in the new tracing system. Unfortunately, the component has remained in prototype stage for over a year, and has revealed some design shortcomings. It&#x27;s aim
is to provide an interactive, real-time dashboard based on metrics from all nodes connected to <code>cardano-tracer</code>. The current design has all front-end side code baked into the backend service, requiring to rebuild the entire service in Haskell even for simple changes in the
dashboard. We decided to isolate the component in the current code base, which still allows for optionally enabling it for a build. The long term goal however is to convert it into a downstream service: It will ingest metrics by reforwarding, or querying a REST API, and will provide
a clear separation of frontend facing code. Thus we, and anybody, can use their favourite web technology for visualization of metrics.</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/performance-tracing">performance-tracing</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/2024-05-07-performance-and-tracing">Performance &amp; Tracing Update</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2024-05-07T00:00:00.000Z" itemprop="datePublished">May 7, 2024</time> Â· <!-- -->5 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/mgmeier" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/mgmeier.png" alt="Michael Karg"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/mgmeier" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Michael Karg</span></a></div><small class="avatar__subtitle" itemprop="description">Performance and Tracing Team Lead</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">â</a></h2><ul><li>Benchmarking: We&#x27;ve performed and analysed benchmarks in the Conway era, with <code>DRep</code>s injected.</li><li>Development: Tracing <code>DRep</code> data has been implemented; improved error reporting in <code>tx-generator</code> and analysis quick queries are ongoing work.</li><li>Workbench: We now fully supports the new CLI <code>create-testnet-data</code> command and <code>DRep</code> injection into Conway genesis. Haskell profile definition work is ongoing.</li><li>Tracing: Various additions to Node metrics are being worked on, such as build info and block producer role. Metrics naming will be further harmonized.</li><li>UTxO Growth: We&#x27;ve finalized analysis and reports of all benchmarks targeting UTxO scaling scenarios.</li><li>UTxO-HD / LMDB: We&#x27;ve performed multiple runs benchmarking the LMDB (on-disk) backend of UTxO-HD.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="low-level-overview">Low level overview<a class="hash-link" href="#low-level-overview" title="Direct link to heading">â</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="benchmarking">Benchmarking<a class="hash-link" href="#benchmarking" title="Direct link to heading">â</a></h3><p>We&#x27;ve run and analyzed a full set of benchmarks comparing the Conway ledger against the Babbage one, on Node <code>8.10.1-pre</code>. For Conway, our additional goal was to measure a vanilla ledger state against one with a large amount of <code>DRep</code>s - and delegations to those <code>DRep</code>s - present. The
benchmarks used our existing value and Plutus workloads to remain comparable to each other.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="development">Development<a class="hash-link" href="#development" title="Direct link to heading">â</a></h3><p>Additional ledger queries for the tracing system have been implemented and merged to <code>master</code>. Those capture the amount of, and the number
of existing delegations to, <code>DRep</code>s as trace output - and thus enable creating a metric on top of it, which can then be monitored.</p><p>The (in our case) non-deterministic nature of shutting down different cluster setups - both local and cloud-based - carries the possibility
that our transaction generation service occasionally misclassifies a regular shutdown as an error. Furthermore, in the case of network malfunctions, the service&#x27;s errors are too unspecific. By implementing thread labels for submission threads, corresponding to each
submission target, and by adding custom smart signal handlers, we&#x27;ll improve the generator&#x27;s error reporting significantly.</p><p>The initial tests for quick queries are being developed further. We&#x27;re moving towards a principled, and generalized, syntax that supports both
prepared, parametrizable queries from the application code, as well as ad-hoc queries stated e.g. on the command line.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="workbench">Workbench<a class="hash-link" href="#workbench" title="Direct link to heading">â</a></h3><p>The performance workbench now fully supports the new <code>cardano-cli</code> command <code>create-test-data</code>. We use it to inject both stake
delegated to stake pools into genesis, and - recently added - stake delegated to <code>DRep</code>s as well. It has been proven very useful
and versatile so far, and will eventually replace the current <code>create-staked</code> command.  </p><p>Work on porting our performance workbench&#x27;s profile definitions to Haskell, and providing them with an appropriate test suite, is still ongoing; currently, we&#x27;re integrating all new profile families that came out of the UTxO growth scenarios.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="tracing">Tracing<a class="hash-link" href="#tracing" title="Direct link to heading">â</a></h3><p>New metrics are being implemented for the tracing system. They will also be part of Prometheus output and as such accessible to
monitoring services. There&#x27;ll be <code>cardano-node</code>&#x27;s detailed build info, as well as a node&#x27;s block producer status, meaning the presence of forger credentials. Those new metrics are being backported to the legacy tracing system, too.  </p><p>Furthermore, we&#x27;ve determined the need to revisit metrics naming. There&#x27;s still a divergence between naming in the legacy
and the new system. While this could be mitigated by passing in extra config options, we think that a transition to the new system
should not impose any unnecessary effort for node operators. A design to fully harmonize the existing naming schemata is currently being
set up.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="utxo-growth">UTxO Growth<a class="hash-link" href="#utxo-growth" title="Direct link to heading">â</a></h3><p>The UTxO Growth benchmarking series has been finalized. We&#x27;ve finished analyses and reports for all scenarios that
were tested and explored.   </p><p>The overarching questions were, given a network of 32GB host systems, how large can the UTxO set grow in general,
how large can it grow before the nodes have to operate close to the RAM limit over extended periods of time, and how does scaling the UTxO set size affect network metrics, such as block diffusion. </p><p>A dedicated &quot;UTxO Scaling Squad&quot; was set up, who was driving the entire process, and we enjoyed a very focused and productive collaboration with them.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="utxo-hd--lmdb">UTxO-HD / LMDB<a class="hash-link" href="#utxo-hd--lmdb" title="Direct link to heading">â</a></h3><p>Last not least, we were able to benchmark UTxO-HD&#x27;s on-disk backend on a network of block producing nodes, on a recent <code>8.9.1</code> version
of <code>cardano-node</code>. The setup allowed of using a direct access SSD device for performance critical disk I/O, whereas the bulk of ChainDB and ledger snapshots remained on a standard AWS EBS volume.  </p><p>The benchmarks comprised both optimistic and pessimistic RAM assumptions for the host OS to further optimize I/O via page cache, as well as medium and large UTxO set sizes - the latter almost tripling current mainnet&#x27;s size. The results were promising; the LMDB backend has proven to be able to accomodate large UTxO sets using significantly less RAM than the default all-in-memory node - and with a more than reasonable trade-off performance-wise. Furthermore, running with pessimistic assumptions, the performance impact on LMDB was very moderate only.</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/performance-tracing">performance-tracing</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/2024-04-19-performance-and-tracing">Performance &amp; Tracing Update</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2024-04-19T00:00:00.000Z" itemprop="datePublished">April 19, 2024</time> Â· <!-- -->3 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/mgmeier" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/mgmeier.png" alt="Michael Karg"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/mgmeier" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Michael Karg</span></a></div><small class="avatar__subtitle" itemprop="description">Performance and Tracing Team Lead</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">â</a></h2><ul><li>Benchmarking: We&#x27;ve performed benchmarks and analyses for Node versions <code>8.9.2</code> and <code>8.10.0</code>.</li><li>Development: Design phase for implementing quick queries in the analysis pipeline has begun.</li><li>Workbench: We&#x27;re finishing up the new features for the reporting pipeline; Haskell profile definition work is ongoing.</li><li>Tracing: Improving the Prometheus output is ongoing; the node&#x27;s build info will be accessible as a Prometheus label.</li><li>UTxO Growth: Our tooling has been augmented to support benchmarks starting with a non-empty chain.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="low-level-overview">Low level overview<a class="hash-link" href="#low-level-overview" title="Direct link to heading">â</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="benchmarking">Benchmarking<a class="hash-link" href="#benchmarking" title="Direct link to heading">â</a></h3><p>We&#x27;ve performed a full set of release benchmarks for Node <code>8.9.2</code>. Comparing with release <code>8.9.1</code>, we could not detect any performance risks for that version. </p><p>The benchmarks for <code>8.10.0</code> have shown a slight improvement in the time the block forging loop needs to evaluate, whilst additionally, resource usage of the <code>cardano-node</code> process was also slightly reduced - a nice performance improvement.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="development">Development<a class="hash-link" href="#development" title="Direct link to heading">â</a></h3><p>Our analysis pipeline is based on batch analysis of data from over 50 cluster nodes; it consumes very large amounts of trace output ex post facto, when the actual benchmark has terminated.
This is very time-intensive, and not viable for obeserving an additional metric that you later on determine might need consideration.  </p><p>We&#x27;re planning to add quick queries into a benchmarking run&#x27;s trace data to our analysis pipeline. These will be structured such that parameterizable, ad-hoc querying is supported. Initial tests showed that evaluation speed
of such queries is fast enough to merit designing a principled, and generalized, syntax for them - and a subsequent implementation.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="workbench">Workbench<a class="hash-link" href="#workbench" title="Direct link to heading">â</a></h3><p>The reporting pipeline has been augmented with direct support for customizable, and stylable, TeX rendering - currently receiving final touches.  </p><p>Porting our performance workbench&#x27;s profile definitions to Haskell, and providing them with an appropriate test suite, is ongoing work. It is our goal to both increase reliable profile definition and validation, and
facilitate usage by engineers less familiar with the workbench.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="tracing">Tracing<a class="hash-link" href="#tracing" title="Direct link to heading">â</a></h3><p>The work to improve system metrics as presented to Prometheus is still ongoing. Type annotations, as well as introducing Prometheus labels for certain metrics to convey (like e.g. build information), will make that interface
more versatile. It also facilitates configuration of monitoring or dashboards like Grafana on top of those Prometheus metrics.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="utxo-growth">UTxO Growth<a class="hash-link" href="#utxo-growth" title="Direct link to heading">â</a></h3><p>For the UTxO scaling benchmarks, we&#x27;ve augmented the workbench with the capability to support injection of a custom synthesized chain into the deployment, and start a benchmark only after replaying that chain - whereas
our benchmarks usually start just with a genesis block. </p><p>To achieve that, different components of our tooling needed addition of features: distributing that chain to the node cluster, having analysis work without necessarily providing trace evidence of each block in the chain being forged by a benchmarking node. Cluster timing had to be adjusted to account for the gap between genesis start time and the chain tip. However, this entire mechanism opens up the possibility of having a very distinct ledger state at hand for a benchmark - one, that&#x27;s been particularly crafted via a series of
pre-defined transactions constituting the blocks during creation of the synthesized chain.  </p><p>In the future, we plan to flesh out a more general design of that mechanism, which currently is tied to a very specific use case only.</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/performance-tracing">performance-tracing</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/2024-03-27-performance-and-tracing">Performance &amp; Tracing Update</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2024-03-27T00:00:00.000Z" itemprop="datePublished">March 27, 2024</time> Â· <!-- -->3 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/mgmeier" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/mgmeier.png" alt="Michael Karg"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/mgmeier" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Michael Karg</span></a></div><small class="avatar__subtitle" itemprop="description">Performance and Tracing Team Lead</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">â</a></h2><ul><li>Benchmarking: Release benchmarks for <code>8.9.1</code> have been performed and analysed.</li><li>Development: We&#x27;ve implemented a benchmarking setup for UTxO-HD&#x27;s LMDB (on-disk) backend.</li><li>Workbench: The now modular, <code>nix</code>-based genesis creation has been merged to <code>master</code>; <code>DRep</code> delegation and integration of a new <code>cardano-cli</code> command are ongoing.</li><li>Tracing: Benchmarking the new handle registry feature in <code>cardano-tracer</code> is complete; quality-of-life improvements to Prometheus output.</li><li>UTxO Growth: We&#x27;ve adjusted our framework to support running UTxO scaling benchmarks on both a single node and a cluster.</li><li>Nomad cluster: new multi-cluster support with the capability to quickly adjust to changes in deployed hardware</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="low-level-overview">Low level overview<a class="hash-link" href="#low-level-overview" title="Direct link to heading">â</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="benchmarking">Benchmarking<a class="hash-link" href="#benchmarking" title="Direct link to heading">â</a></h3><p>We&#x27;ve performed a full set of release benchmarks for Node <code>8.9.1</code>. Comparing with release <code>8.9.0</code>, we could not detect any performance risks for that version. </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="development">Development<a class="hash-link" href="#development" title="Direct link to heading">â</a></h3><p>In context of UTxO scaling, we want to assess the feasability of the current on-disk solution (which is LMDB) of a UTxO-HD enabled node. Using that, the UTxO set will be kept
in live tables and snapshots on disk, significantly reducing memory requirements.  </p><p>We&#x27;ve implemented a benchmark setting, and a node service configuration, supporting direct disk access to a dedicated device which can be initialized with optimized
file system and mount settings. It&#x27;s purpose is to serve as storage for the highly performance-critical disk I/O of the LMDB component.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="workbench">Workbench<a class="hash-link" href="#workbench" title="Direct link to heading">â</a></h3><p>Our automation for creating all flavours of geneses has seen cleanup and refactoring - which has been merged to <code>master</code>. It can now use a more principled, and rigorously checked, modular approach
to define, create and cache the desired genesis files.  </p><p>Working on integrating new <code>cardano-cli</code> functionality in our automation is ongoing. The performance workbench will support a different, and updated, CLI command which will allow injection of <code>DRep</code> delegations into genesis.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="tracing">Tracing<a class="hash-link" href="#tracing" title="Direct link to heading">â</a></h3><p>Benchmarking <code>cardano-tracer</code>&#x27;s new handle registry feature has been performed and evaluated. We&#x27;re satisfied with seeing clear performance improvements along with cleaner code, and much better test coverage.
Especially allocation rate and number of garbage collections (GC) could be significantly reduced, along with the CPU time required for performing GCs. This will allow for higher trace message throughput given
identiacal system resources - plus less system calls issued to the OS in the process.  </p><p>Furthermore, the new tracing system is getting improvements for its Prometheus output - like providing version numbers as metrics, or annotating metrics with their type - enhancing the output&#x27;s overall utility.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="utxo-growth">UTxO Growth<a class="hash-link" href="#utxo-growth" title="Direct link to heading">â</a></h3><p>The performance workbench now supports profiles aimed at simulating UTxO growth both for a single node and an entire cluster. Additionally, simulating different
RAM sizes in combination with specific UTxO set sizes is supported. For a single block producing node, the focus is on quick turnaround when running
a benchmark, gaining insight into the node&#x27;s RAM usage and possible impact on the forging loop.  </p><p>The cluster profiles enable capturing block diffusion metrics as well, however they require a much longer runtime. We can now successfully benchmark the node&#x27;s behaviour
when dealing with UTxO set sizes 4x - 5x of current mainnet, as well as a possible change in behaviour when operating close to phsyical RAM limit due to that.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="nomad-cluster">Nomad cluster<a class="hash-link" href="#nomad-cluster" title="Direct link to heading">â</a></h3><p>Our backend now supports allocating and deploying Nomad jobs for multiple clusters simultaneously - all while keeping existing automations operational. We&#x27;ve taken special precautions
a cluster, as seen by the backend, can be efficiently and easily modified to reflect newly deployed, or changed, hardware. Additionally, we&#x27;ve added support for host volumes inside a Nomad
allocation - which will be needed for benchmarking UTxO-HD&#x27;s on-disk solution.</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/performance-tracing">performance-tracing</a></li></ul></div></footer></article><nav class="pagination-nav" aria-label="Blog list page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/tags/performance-tracing/page/4"><div class="pagination-nav__label">Newer Entries</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/tags/performance-tracing/page/6"><div class="pagination-nav__label">Older Entries</div></a></nav></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Blog</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/">Home</a></li><li class="footer__item"><a class="footer__link-item" href="/archive">Archive</a></li><li class="footer__item"><a class="footer__link-item" href="/tags">Tags</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2025 Intersect, Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.a4621276.js"></script>
<script src="/assets/js/main.40817c1a.js"></script>
</body>
</html>