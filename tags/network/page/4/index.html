<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-tags-post-list-page plugin-blog plugin-id-updates">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">62 posts tagged with &quot;network&quot; | Cardano Development Updates</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://updates.cardano.intersectmbo.org/tags/network/page/4"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" property="og:title" content="62 posts tagged with &quot;network&quot; | Cardano Development Updates"><meta data-rh="true" name="docusaurus_tag" content="blog_tags_posts"><meta data-rh="true" name="docsearch:docusaurus_tag" content="blog_tags_posts"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://updates.cardano.intersectmbo.org/tags/network/page/4"><link data-rh="true" rel="alternate" href="https://updates.cardano.intersectmbo.org/tags/network/page/4" hreflang="en"><link data-rh="true" rel="alternate" href="https://updates.cardano.intersectmbo.org/tags/network/page/4" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/rss.xml" title="Cardano Updates Feed RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/atom.xml" title="Cardano Updates Feed Atom Feed">
<link rel="alternate" type="application/json" href="/feed.json" title="Cardano Updates Feed JSON Feed">



<link rel="alternate" type="application/rss+xml" href="/quarterly/rss.xml" title="Cardano Development Updates RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/quarterly/atom.xml" title="Cardano Development Updates Atom Feed">
<link rel="alternate" type="application/rss+xml" href="/reports/rss.xml" title="Cardano Development Updates RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/reports/atom.xml" title="Cardano Development Updates Atom Feed">

<script src="https://plausible.io/js/script.js" defer="defer" data-domain="updates.cardano.intersectmbo.org"></script><link rel="stylesheet" href="/assets/css/styles.5c10ca85.css">
<link rel="preload" href="/assets/js/runtime~main.3d19331e.js" as="script">
<link rel="preload" href="/assets/js/main.7e74428f.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Cardano Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.svg" alt="Cardano Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Cardano Updates</b></a></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">Home</a><a class="navbar__item navbar__link" href="/quarterly">Quarterly</a><a class="navbar__item navbar__link" href="/reports">Reports</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current="page" class="navbar__link active" aria-haspopup="true" aria-expanded="false" role="button" href="/tags">Topics</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/tags">All Topics</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/tags/network">Network</a></li><li><a class="dropdown__link" href="/tags/consensus">Consensus</a></li><li><a class="dropdown__link" href="/tags/ledger">Ledger</a></li><li><a class="dropdown__link" href="/tags/hydra">Hydra</a></li><li><a class="dropdown__link" href="/tags/db-sync">DB Sync</a></li><li><a class="dropdown__link" href="/tags/cli-api">Node CLI &amp; API</a></li><li><a class="dropdown__link" href="/quarterly/tags/cli-api-quarterly">Node CLI &amp; API Quarterly</a></li><li><a class="dropdown__link" href="/tags/crypto">Crypto</a></li><li><a class="dropdown__link" href="/tags/goedel">Goedel</a></li><li><a class="dropdown__link" href="/tags/mithril">Mithril</a></li><li><a class="dropdown__link" href="/tags/performance-tracing">Performance &amp; Tracing</a></li><li><a class="dropdown__link" href="/reports/tags/benchmarking-reports">Benchmarking Reports</a></li><li><a class="dropdown__link" href="/tags/incident">Incident Reports</a></li><li><a class="dropdown__link" href="/tags/security">Security Reports</a></li></ul></div><a class="navbar__item navbar__link" href="/archive">Archive</a><a href="https://updates.cardano.intersectmbo.org" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">Recent Posts</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2026-03-26-hydra">Hydra Team Update</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2026-02-25-mithril">Mithril Team Update</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2026-02-25-performance-and-tracing">Performance &amp; Tracing Update</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2026-02-18-mithril">Mithril Team Update</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2026-02-16-network">Network Team Update</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2026-02-11-consensus">Consensus Team Update</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2026-02-11-mithril">Mithril Team Update</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2026-02-10-network">Network Team Update</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2026-02-04-mithril">Mithril Team Update</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2026-01-30-performance-and-tracing">Performance &amp; Tracing Update</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><header class="margin-bottom--xl"><h1>62 posts tagged with &quot;network&quot;</h1><a href="/tags">View All Tags</a></header><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/2025-02-19-network">Network Team Update</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2025-02-19T00:00:00.000Z" itemprop="datePublished">February 19, 2025</time> · <!-- -->2 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/coot" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/coot.png" alt="Marcin Szamotulski"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/coot" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Marcin Szamotulski</span></a></div><small class="avatar__subtitle" itemprop="description">Network Team Lead</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="overview-of-sprint-80--sprint-81">Overview of <a href="https://github.com/orgs/IntersectMBO/projects/5/views/1?filterQuery=sprint%3A%22Sprint+80%22" target="_blank" rel="noopener noreferrer">sprint 80</a> &amp; <a href="https://github.com/orgs/IntersectMBO/projects/5/views/1?filterQuery=sprint%3A%22Sprint+81%22" target="_blank" rel="noopener noreferrer">sprint 81</a><a class="hash-link" href="#overview-of-sprint-80--sprint-81" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="current-workstream">Current workstream<a class="hash-link" href="#current-workstream" title="Direct link to heading">​</a></h3><p>We decided to hold some PRs in favour of some others to simplify the merging
process.  Here&#x27;s a dependency graph for PRs on which we&#x27;re working on.  The
<a href="https://github.com/IntersectMBO/ouroboros-network/pull/5016" target="_blank" rel="noopener noreferrer"><strong>Extensible Ouroboros Network Diffusion Stack</strong></a> PR
was the largest in our queue.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="fixes-which-made-into-the-on-going-cardano-node-1021">Fixes which made into the on-going <code>cardano-node-10.2.1</code><a class="hash-link" href="#fixes-which-made-into-the-on-going-cardano-node-1021" title="Direct link to heading">​</a></h3><ul><li>We fixed the peer-sharing application to only use the negotiated
<code>peerSharing</code> flag in the <a href="https://ouroboros-network.cardano.intersectmbo.org/ouroboros-network-api/Ouroboros-Network-NodeToNode-Version.html#t:NodeToNodeVersionData" target="_blank" rel="noopener noreferrer"><code>NodeToNodeVersionData</code></a>; see
<a href="https://github.com/IntersectMBO/ouroboros-network/pull/5061" target="_blank" rel="noopener noreferrer">ouroboros-network#5061</a>.</li><li>We modified <code>IOError</code> exception handling: <a href="https://github.com/IntersectMBO/ouroboros-network/pull/5076" target="_blank" rel="noopener noreferrer">ouroboros-network#5076</a>.</li></ul><p>Previously, we introduced a new <code>IOError</code> handling policy due to a discussion with
an SPO to make some scenarios easier to debug.  After testing it (the changes
never made it into a release), it turned out this could lead to attacks on the
system.  Thus, we advocate for better monitoring of nodes (e.g. if resources
like file descriptors memory are available, the node is making progress)
rather than rely on <code>cardano-node</code> to be up and running.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="new-mux-strategy-for-starting-mini-protocols">New mux strategy for starting mini-protocols<a class="hash-link" href="#new-mux-strategy-for-starting-mini-protocols" title="Direct link to heading">​</a></h3><p><a href="https://github.com/karknu" target="_blank" rel="noopener noreferrer">Karl Knutsson</a> (<a href="https://www.cardanofoundation.org/" target="_blank" rel="noopener noreferrer">CF</a>) implemented a new strategy for starting
mini-protocols, <code>StartOnDemandAny</code>.  A mini-protocol which is using this
strategy will be started as soon as any <code>StartOnDemand</code> (or <code>StartOnDemandAny</code>)
mini-protocol receives input from the network.  We will use this starting
strategy for the <code>keep-alive</code> mini-protocol.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="local-tx-monitor-protocol-changes">Local-TX-Monitor protocol changes<a class="hash-link" href="#local-tx-monitor-protocol-changes" title="Direct link to heading">​</a></h3><p>A new query was added, which allows the retrieval of all measures/dimensions of the
mempool capacity, e.g. byte-size capacity, ledger&#x27;s execution units for both
memory and execution steps, and reference
scripts size. See <a href="https://github.com/IntersectMBO/ouroboros-network/pull/4918" target="_blank" rel="noopener noreferrer">ouroboros-network#4918</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="network-specification-updates">Network Specification Updates<a class="hash-link" href="#network-specification-updates" title="Direct link to heading">​</a></h3><p>We made language improvements in the network specification, see
<a href="https://github.com/IntersectMBO/ouroboros-network/pull/5044" target="_blank" rel="noopener noreferrer">ouroboros-network#5044</a>; and some smaller changes/fixes
<a href="https://github.com/IntersectMBO/ouroboros-network/pull/5053" target="_blank" rel="noopener noreferrer">ouroboros-network#5053</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="other-minor-changes">Other minor changes<a class="hash-link" href="#other-minor-changes" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/IntersectMBO/ouroboros-network/pull/5050" target="_blank" rel="noopener noreferrer"><strong>Label some threads</strong></a>;</li><li><a href="https://github.com/IntersectMBO/ouroboros-network/pull/5072" target="_blank" rel="noopener noreferrer"><strong>Churn no timeouts test failure</strong></a>;</li><li><a href="https://github.com/IntersectMBO/ouroboros-network/pull/5073" target="_blank" rel="noopener noreferrer"><strong>Added haddocks to MiniProtocol type</strong></a>;</li></ul></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/network">network</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/2025-01-20-network">Network Team Update</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2025-01-20T00:00:00.000Z" itemprop="datePublished">January 20, 2025</time> · <!-- -->4 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/coot" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/coot.png" alt="Marcin Szamotulski"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/coot" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Marcin Szamotulski</span></a></div><small class="avatar__subtitle" itemprop="description">Network Team Lead</small></div></div></div><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/karknu" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/karknu.png" alt="Karl Knutsson"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/karknu" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Karl Knutsson</span></a></div><small class="avatar__subtitle" itemprop="description">Software Engineer at Cardano Foundation</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="overview-of-sprint-78--sprint-79">Overview of <a href="https://github.com/orgs/IntersectMBO/projects/5/views/1?filterQuery=sprint%3A%22Sprint+78%22" target="_blank" rel="noopener noreferrer">sprint 78</a> &amp; <a href="https://github.com/orgs/IntersectMBO/projects/5/views/1?filterQuery=sprint%3A%22Sprint+79%22" target="_blank" rel="noopener noreferrer">sprint 79</a><a class="hash-link" href="#overview-of-sprint-78--sprint-79" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="documentation">Documentation<a class="hash-link" href="#documentation" title="Direct link to heading">​</a></h3><p>We reviewed the <a href="https://ouroboros-network.cardano.intersectmbo.org/pdfs/network-spec/network-spec.pdf" target="_blank" rel="noopener noreferrer">technical report</a>. We closed a number of issues,
the most important are:</p><ul><li><a href="https://github.com/IntersectMBO/ouroboros-network/issues/3420" target="_blank" rel="noopener noreferrer"><strong>Document Local Tx-Monitor mini-protocol</strong></a></li><li><a href="https://github.com/IntersectMBO/ouroboros-network/issues/4521" target="_blank" rel="noopener noreferrer"><strong>Document CBOR encoding of Local TX-Submission mini-protocol</strong></a></li><li><a href="https://github.com/IntersectMBO/ouroboros-network/issues/2780" target="_blank" rel="noopener noreferrer"><strong>Links to implemented mini-protocols are obsolete</strong></a></li></ul><p>And a few smaller issues:</p><ul><li><a href="https://github.com/IntersectMBO/ouroboros-network/issues/4686" target="_blank" rel="noopener noreferrer"><strong>RollBack claimed to sometimes contain a header</strong></a></li><li><a href="https://github.com/IntersectMBO/ouroboros-network/issues/4662" target="_blank" rel="noopener noreferrer"><strong>Wrong colors in figure 3.7 of network-spec</strong></a></li><li><a href="https://github.com/IntersectMBO/ouroboros-network/issues/4628" target="_blank" rel="noopener noreferrer"><strong>Is BlockFetch mini-protocol inclusive in the argument range?</strong></a>
(we just verified that the issue is outdated)</li></ul><p>This was done in the <a href="https://github.com/IntersectMBO/ouroboros-network/pull/5036" target="_blank" rel="noopener noreferrer">Network Spec Update</a> PR, we also fixed many grammar
&amp; spelling errors <a href="https://github.com/IntersectMBO/ouroboros-network/pull/5044" target="_blank" rel="noopener noreferrer">network-spec: language</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="srv-record-support">SRV Record Support<a class="hash-link" href="#srv-record-support" title="Direct link to heading">​</a></h3><p>We worked on <a href="https://www.cloudflare.com/en-gb/learning/dns/dns-records/dns-srv-record/" target="_blank" rel="noopener noreferrer">SRV records</a> support by <code>ouroboros-network</code>, <a href="https://github.com/IntersectMBO/ouroboros-network/issues/2780" target="_blank" rel="noopener noreferrer">issue
#2780</a>, <a href="https://github.com/IntersectMBO/ouroboros-network/pull/5018" target="_blank" rel="noopener noreferrer">PR 5018</a>.  We will merge it after <a href="https://github.com/IntersectMBO/ouroboros-network/pull/5016" target="_blank" rel="noopener noreferrer">reuasble
diffusion</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="quering-network-state-through-node-to-client-protocol">Quering Network State through Node-to-Client Protocol<a class="hash-link" href="#quering-network-state-through-node-to-client-protocol" title="Direct link to heading">​</a></h3><p>The aim is to make P2P network stake available through the Local State Query
Mini-Protocol.</p><p>We opened a <a href="https://github.com/IntersectMBO/ouroboros-network/pull/5046" target="_blank" rel="noopener noreferrer">draft PR</a>, also see the <a href="https://github.com/IntersectMBO/ouroboros-network/issues/5006" target="_blank" rel="noopener noreferrer">issue</a>, where we
mentioned all the branches where the work is progressing. See below for more
technical details.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="extensible-ouroboros-network-diffusion-stack">Extensible Ouroboros Network Diffusion Stack<a class="hash-link" href="#extensible-ouroboros-network-diffusion-stack" title="Direct link to heading">​</a></h3><p>The work stream reached the review phase.  See <a href="https://github.com/IntersectMBO/ouroboros-network/pull/5016" target="_blank" rel="noopener noreferrer">issue#5016</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="tx-submission">Tx-Submission<a class="hash-link" href="#tx-submission" title="Direct link to heading">​</a></h3><p>The Consensus team agreed to implement needed mempool performance
optimisations and is making progress on them. See
<a href="https://github.com/IntersectMBO/ouroboros-consensus/issues/1359" target="_blank" rel="noopener noreferrer">ouroboros-consensus#1359</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ouroboros-network-019-release">Ouroboros-Network-0.19 Release<a class="hash-link" href="#ouroboros-network-019-release" title="Direct link to heading">​</a></h3><p>We cut <code>ouroboros-network-0.19</code> and <code>0.19.1</code> <a href="https://github.com/orgs/IntersectMBO/projects/5/views/18" target="_blank" rel="noopener noreferrer">releases</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="configuration-changes-for-block-propagation-times">Configuration Changes for Block Propagation Times<a class="hash-link" href="#configuration-changes-for-block-propagation-times" title="Direct link to heading">​</a></h3><p>Block propagation times are influenced by the number of TCP round trips
required to transmit a block.</p><p>In mid-December, we published a <a href="https://forum.cardano.org/t/problem-with-increasing-blocksize-or-processing-requirements/140044/7" target="_blank" rel="noopener noreferrer">post</a> discussing configuration
changes to the Linux IP stack. These adjustments involved increasing the
initial TCP congestion window to 42 segments and ensuring that the
congestion window remained open for idle connections.</p><p>IOG applied these changes to four stake pools located in Brazil,
South Africa, Dubai, and Japan around December 15th.</p><p>The Cardano Foundation manages a standard peer-to-peer (P2P) node in Paris,
which operates without manual connections to other Cardano
Foundation nodes or IOG nodes. After implementing the configuration changes,
we noted a statistically significant improvement in the propagation times
for blocks larger than 10 segments (about 14,480 bytes) produced by IOG&#x27;s pools.</p><table><thead><tr><th>Block Size (bytes)</th><th>Improvement (ms)</th></tr></thead><tbody><tr><td>14,480 - 28,960</td><td>-132 to -78</td></tr><tr><td>28,960 - 57,920</td><td>-197 to -130</td></tr><tr><td>&gt;57,920</td><td>-255 to -176</td></tr></tbody></table><div style="text-align:center"><img loading="lazy" src="/images/network/2025-01-20-blocks.png" alt="Block Propagation Times" width="600" class="img_ev3q"></div><p>These results demonstrate that a Stake Pool Operator (SPO) can enhance the
propagation times of their own pool&#x27;s blocks by applying config changes
targeting TCP&#x27;s congestion window.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="low-level-summary">Low-level summary<a class="hash-link" href="#low-level-summary" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="querying-network-state-through-node-to-client-protocol">Querying Network State through Node-to-Client Protocol<a class="hash-link" href="#querying-network-state-through-node-to-client-protocol" title="Direct link to heading">​</a></h3><p>In the first interaction, we will make it possible to query the <code>node-to-node</code> state
through <code>LocalStateQuery</code> mini-protocol (part of the node-to-client protocol).</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">data</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">ConnectionManagerState</span><span class="token plain"> </span><span class="token hvariable">peeraddr</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">ConnectionManagerState</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token hvariable">connectionMap</span><span class="token plain">                 </span><span class="token operator" style="color:#393A34">::</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">Map</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token constant" style="color:#36acaa">ConnectionId</span><span class="token plain"> </span><span class="token hvariable">peeraddr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">AbstractState</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">-- ^ map of connections, without outbound connections in</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">-- `ReservedOutboundSt` state.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token hvariable">registeredOutboundConnections</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">::</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">Set</span><span class="token plain"> </span><span class="token hvariable">peeraddr</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">-- ^ set of outbound connections in the `ReserverdOutboundSt` state.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">deriving</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token constant" style="color:#36acaa">Eq</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">Show</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">data</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">InboundState</span><span class="token plain"> </span><span class="token hvariable">peeraddr</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">InboundState</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token hvariable">remoteHotSet</span><span class="token plain">  </span><span class="token operator" style="color:#393A34">::</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!</span><span class="token punctuation" style="color:#393A34">(</span><span class="token constant" style="color:#36acaa">Set</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token constant" style="color:#36acaa">ConnectionId</span><span class="token plain"> </span><span class="token hvariable">peeraddr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token hvariable">remoteWarmSet</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">::</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!</span><span class="token punctuation" style="color:#393A34">(</span><span class="token constant" style="color:#36acaa">Set</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token constant" style="color:#36acaa">ConnectionId</span><span class="token plain"> </span><span class="token hvariable">peeraddr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token hvariable">remoteColdSet</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">::</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!</span><span class="token punctuation" style="color:#393A34">(</span><span class="token constant" style="color:#36acaa">Set</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token constant" style="color:#36acaa">ConnectionId</span><span class="token plain"> </span><span class="token hvariable">peeraddr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token hvariable">remoteIdleSet</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">::</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!</span><span class="token punctuation" style="color:#393A34">(</span><span class="token constant" style="color:#36acaa">Set</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token constant" style="color:#36acaa">ConnectionId</span><span class="token plain"> </span><span class="token hvariable">peeraddr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">deriving</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token constant" style="color:#36acaa">Eq</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">Show</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">data</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">OutboundState</span><span class="token plain"> </span><span class="token hvariable">peeraddr</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">OutboundState</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token hvariable">coldPeers</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">::</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">Set</span><span class="token plain"> </span><span class="token hvariable">peeraddr</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token hvariable">warmPeers</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">::</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">Set</span><span class="token plain"> </span><span class="token hvariable">peeraddr</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token hvariable">hotPeers</span><span class="token plain">  </span><span class="token operator" style="color:#393A34">::</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">Set</span><span class="token plain"> </span><span class="token hvariable">peeraddr</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">deriving</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token constant" style="color:#36acaa">Eq</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">Show</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">data</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">NetworkState</span><span class="token plain"> </span><span class="token hvariable">peeraddr</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">NetworkState</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token hvariable">connectionManagerState</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">::</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">ConnectionManagerState</span><span class="token plain"> </span><span class="token hvariable">peeraddr</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token hvariable">inboundGovernorState</span><span class="token plain">   </span><span class="token operator" style="color:#393A34">::</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">InboundState</span><span class="token plain"> </span><span class="token hvariable">peeraddr</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token hvariable">outboundGovernorState</span><span class="token plain">  </span><span class="token operator" style="color:#393A34">::</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">OutboundState</span><span class="token plain"> </span><span class="token hvariable">peeraddr</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">deriving</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token constant" style="color:#36acaa">Eq</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">Show</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/network">network</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/2024-12-23-network">Network Team Update</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2024-12-23T00:00:00.000Z" itemprop="datePublished">December 23, 2024</time> · <!-- -->2 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/coot" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/coot.png" alt="Marcin Szamotulski"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/coot" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Marcin Szamotulski</span></a></div><small class="avatar__subtitle" itemprop="description">Network Team Lead</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="overview-of-sprint-77">Overview of <a href="https://github.com/orgs/IntersectMBO/projects/5/views/1?filterQuery=sprint%3A%22Sprint+77%22" target="_blank" rel="noopener noreferrer">sprint 77</a><a class="hash-link" href="#overview-of-sprint-77" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="initiator-only-mode-for-local-roots">Initiator only mode for local roots<a class="hash-link" href="#initiator-only-mode-for-local-roots" title="Direct link to heading">​</a></h3><p>We implemented the initiator-only mode for local roots peers described in
<a href="https://github.com/IntersectMBO/ouroboros-network/issues/5020" target="_blank" rel="noopener noreferrer">ouroboros-network#5020</a>.  This feature will be available in
<code>cardano-node-10.3</code> (<a href="https://github.com/IntersectMBO/cardano-node/pull/6055" target="_blank" rel="noopener noreferrer">cardano-node#6055</a>).</p><p>One will be able to specify <code>diffusionMode</code> (either <code>InitiatorOnly</code> or
<code>IntiatorAndRespoinder</code>, the latter is the default) for all local roots in
a given local roots group, e.g.</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;localRoots&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;accessPoints&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;address&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;10.0.0.1&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;port&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3001</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;advertise&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;diffusionMode&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;InitiatorOnly&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;warmValency&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;hotValency&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;accessPoints&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;address&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;10.0.0.2&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;port&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3001</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;advertise&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;diffusionMode&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;InititiatorAndResponder&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;warmValency&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;hotValency&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;publicRoots&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">&quot;useLedgerAfterSlot&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">-1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>As part of <a href="https://github.com/IntersectMBO/ouroboros-network/issues/5020" target="_blank" rel="noopener noreferrer">ouroboros-network#5020</a> we had to change how connections are
identified in the simulated testnet environment.  We exposed
<code>ConnStateIdSupply</code> through P2P interfaces, which allows us to use a global
<code>ConnStateIdSupply</code> for all nodes in the simulation. This way, <code>ConnStateId</code> is
unique for each connection in the simulation. See <a href="https://github.com/IntersectMBO/ouroboros-network/issues/5026" target="_blank" rel="noopener noreferrer">ouroboros-network#5026</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="support-systems-with-multiple-ip-addresses">Support systems with multiple IP addresses<a class="hash-link" href="#support-systems-with-multiple-ip-addresses" title="Direct link to heading">​</a></h3><p>We merged <a href="https://github.com/IntersectMBO/ouroboros-network/issues/5017" target="_blank" rel="noopener noreferrer">ouroboros-network#5017</a> which allows to run <code>cardano-node</code> on
systems with multiple network interfaces or a single interface with multiple IP
addresses.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="reusable-diffusion">Reusable diffusion<a class="hash-link" href="#reusable-diffusion" title="Direct link to heading">​</a></h3><p>We were working on early integration of reusable diffusion work stream with
<code>ouroboros-consensus</code> &amp; <code>cardano-node</code>.   Reusable diffusion will allow us to
support both <code>cardano-node</code> and <code>mithril-node</code> in the future. We are
pleased to say that we are running a <code>cardano-node</code> that uses
refactored diffusion. See:</p><ul><li><a href="https://github.com/IntersectMBO/ouroboros-network/discussions/4987#discussioncomment-11026976" target="_blank" rel="noopener noreferrer">design notes</a></li><li>issue: <a href="https://github.com/IntersectMBO/ouroboros-network/issues/4929" target="_blank" rel="noopener noreferrer">ouroboros-network#4929</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="tx-submission-logic">Tx-Submission Logic<a class="hash-link" href="#tx-submission-logic" title="Direct link to heading">​</a></h3><p>We had a discussion with the consensus team (Karl Knutsson <a href="https://cardanofoundation.org/" target="_blank" rel="noopener noreferrer">CF</a>, Nick Frisby
<a href="https://www.tweag.io/" target="_blank" rel="noopener noreferrer">Tweag</a>) on network requirements for <code>tx-mempool</code>. See:</p><ul><li>issue: <a href="https://github.com/IntersectMBO/ouroboros-network/issues/3311" target="_blank" rel="noopener noreferrer">ouroboros-network#3311</a></li><li>pr: <a href="https://github.com/IntersectMBO/ouroboros-network/pull/4887" target="_blank" rel="noopener noreferrer">ouroboros-network#4887</a></li><li><a href="https://github.com/IntersectMBO/ouroboros-network/pull/4984" target="_blank" rel="noopener noreferrer">ouroboros-network#4984</a> (Karl&#x27;s changes on top of <a href="https://github.com/IntersectMBO/ouroboros-network/pull/4887" target="_blank" rel="noopener noreferrer">ouroboros-network#4887</a>)</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="srv-record-support">SRV record support<a class="hash-link" href="#srv-record-support" title="Direct link to heading">​</a></h3><p>We continued working on the SRV support, see:</p><ul><li>issue: <a href="https://github.com/IntersectMBO/ouroboros-network/issues/2883" target="_blank" rel="noopener noreferrer">ouroboros-network#2883</a></li><li>pr: <a href="https://github.com/IntersectMBO/ouroboros-network/issues/5018" target="_blank" rel="noopener noreferrer">ouroboros-network#5018</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="technical-debt">Technical Debt<a class="hash-link" href="#technical-debt" title="Direct link to heading">​</a></h3><p>We renamed some of the test modules to be more consistent across various
network components, see <a href="https://github.com/IntersectMBO/ouroboros-network/issues/5028" target="_blank" rel="noopener noreferrer">ouroboros-network#5028</a>.</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/network">network</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/2024-12-10-network">Network Team Update</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2024-12-10T00:00:00.000Z" itemprop="datePublished">December 10, 2024</time> · <!-- -->3 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/coot" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/coot.png" alt="Marcin Szamotulski"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/coot" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Marcin Szamotulski</span></a></div><small class="avatar__subtitle" itemprop="description">Network Team Lead</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="overview-of-sprint-76">Overview of <a href="https://github.com/orgs/IntersectMBO/projects/5/views/1?filterQuery=sprint%3A%22Sprint+76%22" target="_blank" rel="noopener noreferrer">sprint 76</a><a class="hash-link" href="#overview-of-sprint-76" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="network-load">Network Load<a class="hash-link" href="#network-load" title="Direct link to heading">​</a></h3><p>The Cardano Foundation monitors the network by injecting &quot;canary&quot; transactions,
allowing us to measure the time taken for a transaction to be included in
a block. Approximately four to five of these transactions are submitted every
hour.</p><p>Since early November, network load has increased, but most transactions are
still included within the first or second block after submission. Even if the
network is not congested, transactions may not reach the Block Producer
responsible for the next block in time due to network propagation delays.
Therefore, only a transaction that takes three or more blocks to be included
indicates a loaded network.</p><p>Since November 1, 2024, we have submitted around 3,700 &quot;canary&quot; transactions,
and only 59 of them took longer than two blocks to be included, meaning 98.4%
of our test transactions were included within the two-block limit. During this
period, the longest observed time to inclusion was five blocks for two
transactions and the maximum wait time is 201 seconds.</p><p><img loading="lazy" alt="Network Load" src="/assets/images/2024-12-10-network-load-132a74d36540a6c053955d138ba017ab.png" width="1986" height="1556" class="img_ev3q"></p><p>Where the y-axis is a fraction of the block size in the respected dimension (e.g.
size, steps, memory).</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="hot-standby-block-producer-nodes">Hot Standby Block-Producer Nodes<a class="hash-link" href="#hot-standby-block-producer-nodes" title="Direct link to heading">​</a></h3><p>In the last Network Working Group Meeting (<strong>NWG</strong>) we discussed solutions for
running hot standby block producers using P2P.  </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="short-term-solution-local-root-initiator-only-outbound-connections">Short-Term Solution: Local Root Initiator Only Outbound Connections<a class="hash-link" href="#short-term-solution-local-root-initiator-only-outbound-connections" title="Direct link to heading">​</a></h3><p>We agreed to implement initiator-only connections for local roots, which
wouldn&#x27;t bind to the node address (and thus would be made from an ephemeral
port).  This allows SPOs to have hot standby nodes which are hidden from relays
using a firewall rule, while they still can connect to the relays (so they
receive blocks while the blocks they produce are not sent to the network). See
the <a href="https://github.com/IntersectMBO/ouroboros-network/issues/5020" target="_blank" rel="noopener noreferrer">ouroboros-network#5020</a> issue and associated PRs:</p><ul><li><a href="https://github.com/IntersectMBO/ouroboros-network/issues/5021" target="_blank" rel="noopener noreferrer">ouroboros-network#5021</a></li><li><a href="https://github.com/IntersectMBO/ouroboros-network/issues/5017" target="_blank" rel="noopener noreferrer">ouroboros-network#5017</a></li></ul><p>The latter PR makes P2P node run on systems with multiple network interfaces
or a single interface with multiple IP addresses.</p><p>An SPO can control the diffusion mode (initiator only / initiator
and responder) in the topology file.  A draft PR is available in the
<a href="https://github.com/IntersectMBO/cardano-node/tree/coot/connection-manager-initiator-only-0.13.2.5" target="_blank" rel="noopener noreferrer">coot/connection-manager-initiator-only-0.13.2.5 </a> branch.</p><p>In the NWG meeting, it was agreed that once this functionality is implemented, we
can remove NonP2P code from <code>ouroboros-network</code> (<a href="https://github.com/IntersectMBO/ouroboros-network/issues/5007" target="_blank" rel="noopener noreferrer">ouroboros-network#5007</a>).</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="long-term-solution">Long-Term Solution<a class="hash-link" href="#long-term-solution" title="Direct link to heading">​</a></h3><p>An agreed long-term solution is to allow to control block propagation of
self-produced blocks through <code>cardano-cli</code>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="reusable-diffusion">Reusable Diffusion<a class="hash-link" href="#reusable-diffusion" title="Direct link to heading">​</a></h2><p>We continued working on making ouroboros-network reusable for both
<code>cardano-node</code> and <code>mithril</code> (see <a href="https://cips.cardano.org/cip/CIP-0137" target="_blank" rel="noopener noreferrer">CIP#137</a>).  The PR can be found here:
<a href="https://github.com/IntersectMBO/ouroboros-network/issues/5016" target="_blank" rel="noopener noreferrer">ouroboros-network#5016</a>, while a more detailed description of its direction can
be found <a href="https://github.com/IntersectMBO/ouroboros-network/wiki/Reusable-Diffusion-Investigation" target="_blank" rel="noopener noreferrer">here</a>.  During this sprint, we carried out a team-wise PR
review.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="block-fetch-client-for-genesis">Block Fetch Client For Genesis<a class="hash-link" href="#block-fetch-client-for-genesis" title="Direct link to heading">​</a></h2><p>A new block-fetch client designed for Genesis was merged, see
<a href="https://github.com/IntersectMBO/ouroboros-network/pull/4919" target="_blank" rel="noopener noreferrer">ouroboros-network#4919</a>.  The design of the new block-fetch Gensis logic is
described in <a href="https://ouroboros-network.cardano.intersectmbo.org/ouroboros-network/Ouroboros-Network-BlockFetch-Decision-Genesis.html" target="_blank" rel="noopener noreferrer">here</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="kes-agent-raw-bearer-api">KES Agent: Raw Bearer API<a class="hash-link" href="#kes-agent-raw-bearer-api" title="Direct link to heading">​</a></h2><p>We recently merged <a href="https://github.com/IntersectMBO/ouroboros-network/pull/4395" target="_blank" rel="noopener noreferrer">ouroboros-network#4395</a> - a PR which is important for the
KES-agent workstream.</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/network">network</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/2024-11-08-network">Network Team Update</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2024-11-08T00:00:00.000Z" itemprop="datePublished">November 8, 2024</time> · <!-- -->2 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/coot" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/coot.png" alt="Marcin Szamotulski"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/coot" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Marcin Szamotulski</span></a></div><small class="avatar__subtitle" itemprop="description">Network Team Lead</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="overview-of-sprint-74">Overview of <a href="https://github.com/orgs/IntersectMBO/projects/5/views/1?filterQuery=sprint%3A+%22Sprint+74%22" target="_blank" rel="noopener noreferrer">sprint 74</a><a class="hash-link" href="#overview-of-sprint-74" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="dropping-nonp2p-network-stack">Dropping NonP2P network stack<a class="hash-link" href="#dropping-nonp2p-network-stack" title="Direct link to heading">​</a></h3><p>We are advertising that we will drop the non-p2p network stack.  This will
happen after the next hard fork.  Please comment on the PR if this will be
problematic for you.  Here&#x27;s the PR: <a href="https://github.com/IntersectMBO/ouroboros-network/pull/5007" target="_blank" rel="noopener noreferrer">ouroboros-network#5007</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="node-to-client-versions">Node-to-Client versions<a class="hash-link" href="#node-to-client-versions" title="Direct link to heading">​</a></h3><p>We dropped <code>node-to-client</code> versions earlier than version <code>16</code>,
<a href="https://github.com/IntersectMBO/ouroboros-network/pull/5002" target="_blank" rel="noopener noreferrer">ouroboros-network#5002</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="mithril-design">Mithril Design<a class="hash-link" href="#mithril-design" title="Direct link to heading">​</a></h3><p>We completed <a href="https://github.com/IntersectMBO/ouroboros-network/wiki/Reusable-Diffusion-Investigation" target="_blank" rel="noopener noreferrer">review</a> how to adopt ouroboros-network for
Mithril design.  We started to experiment with <code>ouroboros-network</code> in that
direction.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="next-cardano-node-release">Next Cardano-Node release<a class="hash-link" href="#next-cardano-node-release" title="Direct link to heading">​</a></h3><p>The next <code>cardano-node</code> release will include the following changes from the
networking team:</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="typed-protocols">Typed-Protocols<a class="hash-link" href="#typed-protocols" title="Direct link to heading">​</a></h4><p>The integration of <code>ouroboros-network-0.18</code>, which is using the new
<code>typed-protocols-0.3</code> with <code>ouroboros-consensus</code>, was merged,
<a href="https://github.com/IntersectMBO/ouroboros-consensus/pull/1223" target="_blank" rel="noopener noreferrer">ouroboros-consensus#1223</a>.  Integration with <code>cardano-cli</code> and <code>cardano-api</code>
was rebased and handed to the release engineer.  Integration with <code>ekg-forward</code>
was merged: <a href="https://github.com/input-output-hk/ekg-forward/pull/35" target="_blank" rel="noopener noreferrer">ekg-forward#35</a>.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="genesis">Genesis<a class="hash-link" href="#genesis" title="Direct link to heading">​</a></h4><p>The following changes to support Genesis (both creating big ledger peer
snapshots &amp; providing them in a topology file)</p><ul><li><a href="https://github.com/IntersectMBO/cardano-api/pull/521" target="_blank" rel="noopener noreferrer"><code>cardano-api</code>: <strong>Added a new query for a snapshot of big ledger peers</strong></a></li><li><a href="https://github.com/IntersectMBO/cardano-cli/pull/727" target="_blank" rel="noopener noreferrer"><code>cardano-cli</code>: <strong>Query a node for a snapshot of big ledger peers</strong></a></li><li><a href="https://github.com/IntersectMBO/cardano-node/pull/5787" target="_blank" rel="noopener noreferrer"><code>cardano-node</code>: <strong>Support for big ledger peer snapshot in the topology file</strong></a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="connection-manager">Connection Manager<a class="hash-link" href="#connection-manager" title="Direct link to heading">​</a></h3><p>We merged the documentation review of the connection manager, <a href="https://github.com/IntersectMBO/ouroboros-network/pull/5001" target="_blank" rel="noopener noreferrer">ouroboros-network#5001</a>.
We also renamed connection manager methods (as suggested by Neil Davies
(<!-- -->[PNSOL]<!-- -->)): <a href="https://github.com/IntersectMBO/ouroboros-network/pull/5000" target="_blank" rel="noopener noreferrer">ouroboros-network#5000</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="outbound-governor">Outbound Governor<a class="hash-link" href="#outbound-governor" title="Direct link to heading">​</a></h3><p>We started to experiment with using FRP to implement the outbound governor in a way
that is both easier to maintain and reason about.</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/network">network</a></li></ul></div></footer></article><nav class="pagination-nav" aria-label="Blog list page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/tags/network/page/3"><div class="pagination-nav__label">Newer Entries</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/tags/network/page/5"><div class="pagination-nav__label">Older Entries</div></a></nav></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Blog</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/">Home</a></li><li class="footer__item"><a class="footer__link-item" href="/archive">Archive</a></li><li class="footer__item"><a class="footer__link-item" href="/tags">Tags</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2026 Intersect, Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.3d19331e.js"></script>
<script src="/assets/js/main.7e74428f.js"></script>
</body>
</html>